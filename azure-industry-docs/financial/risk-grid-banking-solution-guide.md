---
title: ソリューション ガイドのリスク グリッド コンピューティング
author: dstarr
ms.author: dastarr
ms.date: 5/2/2018
ms.topic: article
ms.service: industry
description: 銀行取引におけるリスク グリッド コンピューティング向け Azure Batch 実装の技術的な側面を紹介します。
ms.openlocfilehash: d3470a2e546e73f4c0f1478413ca4b1af7433a66
ms.sourcegitcommit: 76f2862adbec59311b5888e043a120f89dc862af
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2018
ms.locfileid: "51654299"
---
# <a name="risk-grid-computing-in-banking-solution-guide"></a><span data-ttu-id="ce131-103">銀行取引におけるリスク グリッド コンピューティングのソリューション ガイド</span><span class="sxs-lookup"><span data-stu-id="ce131-103">Risk Grid Computing in Banking Solution Guide</span></span>

<span data-ttu-id="ce131-104">この記事では、銀行取引における Microsoft Azure を使用したリスク グリッド コンピューティングのサポートと拡張の技術的な概要について、推奨システムとおおまかなアーキテクチャを含めて説明します。</span><span class="sxs-lookup"><span data-stu-id="ce131-104">This article provides a technical overview of using Microsoft Azure to support and enhance risk grid computing in banking, including recommended systems and high-level architectures.</span></span>

<span data-ttu-id="ce131-105">このドキュメントは、リスク コンピューティング用に提案されたソリューションについて深く理解する必要があるソリューション アーキテクト (場合によっては技術的意思決定者) を対象としています。</span><span class="sxs-lookup"><span data-stu-id="ce131-105">This document is intended for Solution Architects, and in some cases Technical Decision Makers, who want a deep dive on proposed solutions for risk computing.</span></span>

## <a name="introduction"></a><span data-ttu-id="ce131-106">はじめに</span><span class="sxs-lookup"><span data-stu-id="ce131-106">Introduction</span></span>

<span data-ttu-id="ce131-107">金融リスク分析モデルは一般にバッチ ジョブとして処理され、処理能力、データ アクセス、分析の要件を押し上げる大きな計算負荷を伴います。</span><span class="sxs-lookup"><span data-stu-id="ce131-107">Financial risk analysis models are typically processed as batch jobs, with heavy compute loads generating high demand for computing power, data access, and analysis.</span></span> <span data-ttu-id="ce131-108">多くの場合、リスク グリッド コンピューティング計算の要件は時間の経過と共に増加し、それに従ってコンピューティング リソースの必要量も増えます。</span><span class="sxs-lookup"><span data-stu-id="ce131-108">Demand for risk grid computing calculations often grows over time, and correspondingly the need for compute resources increases.</span></span>

<span data-ttu-id="ce131-109">Azure で利用可能な幅広い製品とサービスは、ほとんどの問題に対して複数のソリューションが存在する可能性があることを意味します。</span><span class="sxs-lookup"><span data-stu-id="ce131-109">The broad range of available products and services in Azure means there can be more than one solution to most problems.</span></span> <span data-ttu-id="ce131-110">この記事では、銀行取引における、[Microsoft Azure Batch](/azure/batch/batch-dotnet-get-started?WT.mc_id=gridbanksg-docs-dastarr) を使用したリスク グリッド コンピューティング ソリューションにとって最も効果的と考えられる技術、パターン、実践の概要を説明します。</span><span class="sxs-lookup"><span data-stu-id="ce131-110">This article provides an overview of the technologies, patterns and practices gauged to be most effective for a risk grid computing solution in banking using [Microsoft Azure Batch](/azure/batch/batch-dotnet-get-started?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="ce131-111">Azure Batch は、リスク グリッド コンピューティング モデルで一般的に使用されるインフラストラクチャと、バッチ処理のさまざまなステージの両方に対して、コスト効果の高い安全なソリューションを提供する無料のサービスです。</span><span class="sxs-lookup"><span data-stu-id="ce131-111">Azure Batch is a free service providing cost-effective and secure solutions for both the infrastructure and the various stages of batch processing typically used with risk grid computing models.</span></span> <span data-ttu-id="ce131-112">Azure Batch では、ハイブリッド ネットワークを使用して、またはバッチ プロセス全体を Azure に移すことによって、現在のオンプレミス コンピューティング リソースの強化や拡張を行うことが (または置き換えも) できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-112">Azure Batch can augment, extend, or even replace current on-premises compute resource investments using hybrid networks or by moving the entire Batch process into Azure.</span></span>  <span data-ttu-id="ce131-113">データはクラウドとの間で送受信されることもあれば、クラウドへのバースト モデルでオンプレミス リソースが不足しているときに、他のデータが計算ノードによって処理される間はオンプレミス上に留まることもあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-113">Data can traverse up and down from the cloud or stay on-premises while other data can be processed by compute nodes in a burst-to-cloud model when on-premises resources run low.</span></span>

## <a name="anatomy-of-a-batch-run"></a><span data-ttu-id="ce131-114">バッチ実行の分析</span><span class="sxs-lookup"><span data-stu-id="ce131-114">Anatomy of a Batch run</span></span>

<span data-ttu-id="ce131-115">通常、バッチ実行には少なくとも 2 つのアプリケーションが使用されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-115">There are typically at least two applications involved in a Batch run.</span></span> <span data-ttu-id="ce131-116">1 つのアプリケーション (通常は "ヘッド ノード" 上で実行される) からジョブをプールに送信し、場合によっては計算ノードの調整を行います。</span><span class="sxs-lookup"><span data-stu-id="ce131-116">One application, typically run on a “head node,” submits the job to the pool and sometimes orchestrates the compute nodes.</span></span> <span data-ttu-id="ce131-117">オーケストレーションは、Azure portal を使用して構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-117">The orchestration can also be configured via the Azure portal.</span></span> <span data-ttu-id="ce131-118">もう 1 つのアプリケーションは計算ノードによってタスクとして実行されます (図 1 を参照)。</span><span class="sxs-lookup"><span data-stu-id="ce131-118">The other application is run by the compute nodes as a task (see Figure 1).</span></span>

<span data-ttu-id="ce131-119">計算ノード アプリケーションは、並列処理リスク モデリング ファイルのタスクを実行します。</span><span class="sxs-lookup"><span data-stu-id="ce131-119">The compute node application performs the task of parallel processing risk modeling files.</span></span> <span data-ttu-id="ce131-120">計算ノード上に複数のアプリケーションをインストールして実行できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-120">There can be more than one application installed and run on the compute nodes.</span></span>

<span data-ttu-id="ce131-121">これらのアプリケーションは、[Batch API](/azure/batch/batch-apis-tools?WT.mc_id=gridbanksg-docs-dastarr) を使用して、Azure Portal から直接アップロードするか、[Batch 用 Azure CLI コマンド](/azure/batch/cli-samples?WT.mc_id=gridbanksg-docs-dastarr)によってアップロードできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-121">These applications can be uploaded via the [Batch API](/azure/batch/batch-apis-tools?WT.mc_id=gridbanksg-docs-dastarr), directly through the Azure Portal, or via the [Azure CLI commands for Batch](/azure/batch/cli-samples?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

![Azure Batch グリッド コンピューティング](./assets/risk-grid-compute-assets/05-batch-grid-computing.png)

<span data-ttu-id="ce131-123">**図 1:** Azure Batch グリッド コンピューティング</span><span class="sxs-lookup"><span data-stu-id="ce131-123">**Figure 1:** Azure Batch grid computing</span></span>

<span data-ttu-id="ce131-124">バッチ実行は複数の論理要素で構成されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-124">A Batch run consists of several logical elements.</span></span> <span data-ttu-id="ce131-125">図 2 は、バッチ ジョブの論理モデルを示しています。</span><span class="sxs-lookup"><span data-stu-id="ce131-125">Figure 2 shows the logical model of a batch job.</span></span> <span data-ttu-id="ce131-126">プールは、バッチ実行に使用される VM のコンテナーであり、計算ノード VM をプロビジョニングします。</span><span class="sxs-lookup"><span data-stu-id="ce131-126">A pool is a container for the VMs involved in the Batch run and provisions the compute node VMs.</span></span> <span data-ttu-id="ce131-127">プールは、計算ノード上にインストールされたアプリケーションのコンテナーでもあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-127">A pool is also the container for the applications installed on the compute nodes.</span></span> <span data-ttu-id="ce131-128">ジョブはプール内で作成され、実行されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-128">Jobs are created and run within the pool.</span></span> <span data-ttu-id="ce131-129">タスクは、ジョブによって実行されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-129">Tasks are executed by the jobs.</span></span> <span data-ttu-id="ce131-130">タスクは worker アプリケーションの実行であり、コマンド ライン命令によって呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-130">Tasks are a run of the worker application and are invoked by a command line instruction.</span></span>

<span data-ttu-id="ce131-131">worker アプリケーションは、その作成時に計算ノードにインストールされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-131">The worker application is installed to the compute node when it is created.</span></span>

![プール、ジョブ、タスク](./assets/risk-grid-compute-assets/06-pool-job-logical-model.png)

<span data-ttu-id="ce131-133">**図 2:** Bath の概念の論理モデル</span><span class="sxs-lookup"><span data-stu-id="ce131-133">**Figure 2:** Logical Batch concept model</span></span>

<span data-ttu-id="ce131-134">ジョブ実行時、プールによって、必要な worker VM がプロビジョニングされ、worker アプリケーションがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-134">When the job executes, the pool provisions any worker VMs needed and installs the worker applications.</span></span> <span data-ttu-id="ce131-135">ジョブによってそれらの計算ノードにタスクが割り当てられると、コマンド ライン命令が実行され、通常はそれによって、インストールされているアプリケーションまたはスクリプトが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-135">The job assigns tasks to those compute nodes, which in turn run a command line instruction which typically calls the installed applications or scripts.</span></span>
<span data-ttu-id="ce131-136">Batch の使用は通常、次に示す典型的なパターンに従います。</span><span class="sxs-lookup"><span data-stu-id="ce131-136">Using Batch typically follows a prototypical pattern, described as follows:</span></span>

1. <span data-ttu-id="ce131-137">Batch 資産を含むリソース グループを作成します。</span><span class="sxs-lookup"><span data-stu-id="ce131-137">Create a resource group to contain the Batch assets.</span></span>
2. <span data-ttu-id="ce131-138">リソース グループ内に Batch アカウントを作成します。</span><span class="sxs-lookup"><span data-stu-id="ce131-138">Within the resource group, create a Batch account.</span></span>
3. <span data-ttu-id="ce131-139">リンクされたストレージ アカウントを作成します。</span><span class="sxs-lookup"><span data-stu-id="ce131-139">Create a linked storage account.</span></span>
4. <span data-ttu-id="ce131-140">worker VM をプロビジョニングするためのプールを作成します。</span><span class="sxs-lookup"><span data-stu-id="ce131-140">Create a pool in which to provision the worker VMs.</span></span>
5. <span data-ttu-id="ce131-141">計算ノードのアプリケーションまたはスクリプトをプールにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="ce131-141">Upload the compute node application or scripts to the pool.</span></span>
6. <span data-ttu-id="ce131-142">プール内の VM にタスクを割り当てるためのジョブを作成します。</span><span class="sxs-lookup"><span data-stu-id="ce131-142">Create a job to assign tasks to the VMs in the pool.</span></span>
7. <span data-ttu-id="ce131-143">ジョブをプールに追加します。</span><span class="sxs-lookup"><span data-stu-id="ce131-143">Add the job to the pool.</span></span>
8. <span data-ttu-id="ce131-144">バッチの実行を開始します。</span><span class="sxs-lookup"><span data-stu-id="ce131-144">Begin the Batch run.</span></span>
9. <span data-ttu-id="ce131-145">タスクはジョブによってキューに入れられ、計算ノード上で実行されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-145">The job queues tasks to run on the compute nodes.</span></span>
10. <span data-ttu-id="ce131-146">計算ノードでは、VM が使用可能になったときにタスクが実行されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-146">Compute nodes run the tasks as the VMs become available.</span></span>

<span data-ttu-id="ce131-147">このプロセスを図 3 に示します。</span><span class="sxs-lookup"><span data-stu-id="ce131-147">An illustration of this process is show in Figure 3.</span></span>

![バッチ実行プロセス](./assets/risk-grid-compute-assets/07-batch-run-process.png)

<span data-ttu-id="ce131-149">**図 3:** Batch の概念の論理モデル</span><span class="sxs-lookup"><span data-stu-id="ce131-149">**Figure 3:** Logical Batch concept model</span></span>

<span data-ttu-id="ce131-150">タスクが完了したら、計算ノードを削除することで、使用していないときに料金が発生するのを避けることができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-150">Once tasks are complete, it can be useful to remove the compute nodes to not incur fees while not in use.</span></span> <span data-ttu-id="ce131-151">それらを削除するには、コードまたはポータルを使用して、それらを含むプールを削除すると、worker VM が削除されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-151">To delete them, via code or the portal, one can delete the containing pool, which will remove the worker VMs.</span></span>

<span data-ttu-id="ce131-152">Batch の使用を開始するための詳細なチュートリアルについては、「[5 分間のクイック スタート](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr)」にある、複数の言語または Azure portal を使用したプロセスについての説明を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-152">For more detailed walkthroughs on how to get starting with Batch, [5-minute Quickstarts](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) are available to take you through the process in several languages or through the Azure portal.</span></span>

## <a name="batch-process-scheduling"></a><span data-ttu-id="ce131-153">Batch でのプロセスのスケジューリング</span><span class="sxs-lookup"><span data-stu-id="ce131-153">Batch process scheduling</span></span>

<span data-ttu-id="ce131-154">Azure Batch にはスケジューラが組み込まれているため、ポータルまたは API を使用して各実行のスケジュールを定義できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-154">Azure Batch has a scheduler built in so scheduling of each run can be defined in the portal or through APIs.</span></span> <span data-ttu-id="ce131-155">Batch ジョブ スケジューラでは、複数のジョブを起動するための複数のスケジュールを定義できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-155">The Batch job scheduler can define multiple schedules to fire multiple jobs.</span></span> <span data-ttu-id="ce131-156">各ジョブには、ジョブ開始時および終了時に何を行うかといった固有のプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-156">Each job has its own properties such as what to do when the job starts and ends.</span></span> <span data-ttu-id="ce131-157">ジョブのスケジュールは、定期的な間隔で設定することも、1 回の実行用に設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-157">Job schedules can be set on recurring intervals or for a one-time run.</span></span>

<span data-ttu-id="ce131-158">多くの銀行グリッド コンピューティング システムでは、既に独自のスケジューリング サービスを使用しています。</span><span class="sxs-lookup"><span data-stu-id="ce131-158">Many bank grid computing systems already have their own scheduling service.</span></span> <span data-ttu-id="ce131-159">自分のスケジューラを Azure に移す差し迫った必要性はないかもしれません。</span><span class="sxs-lookup"><span data-stu-id="ce131-159">There may be no immediate need to move my scheduler to Azure.</span></span> <span data-ttu-id="ce131-160">これはシームレスに機能することが可能です。Azure Batch は手動で呼び出すことも、SDK を使用して呼び出すこともできるため、スケジューリングを引き続きオンプレミスで実行しながら、ワークロードを Azure 上で処理することができるからです。</span><span class="sxs-lookup"><span data-stu-id="ce131-160">This can work seamlessly because Azure Batch may be invoked manually or through an SDK, allowing scheduling to still occur on-premises and workloads to be processed in Azure.</span></span>

<span data-ttu-id="ce131-161">バッチ処理は、あらかじめ定義されたスケジュールに従って実行することも、オンデマンドで実行することもできますが、どちらの場合も、計算ノード VM を使っていないときは、それらを稼働状態に維持する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="ce131-161">Batch processing can happen on a predetermined schedule or on demand, but in either case there is no need to keep compute node VMs alive when they aren’t being used.</span></span>  <span data-ttu-id="ce131-162">数千ではないとしても数百の計算ノードを使用している場合は、キューに入っていたタスクの実行が完了した時点でサーバーのプロビジョニングを解除することによって、大幅なコスト削減を実現できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-162">When using hundreds, if not thousands, of VM compute nodes, significant cost savings can be realized by de-provisioning the servers when they are done running their queued tasks.</span></span>

## <a name="compute-node-applications"></a><span data-ttu-id="ce131-163">計算ノード アプリケーション</span><span class="sxs-lookup"><span data-stu-id="ce131-163">Compute node applications</span></span>

<span data-ttu-id="ce131-164">計算ノードには、タスクが呼び出されたときに実行されるアプリケーションが必要です。</span><span class="sxs-lookup"><span data-stu-id="ce131-164">Compute nodes need an application to run when a task is invoked.</span></span> <span data-ttu-id="ce131-165">それらのアプリケーションは、worker 上にインストールされたときに処理を行うジョブを実行するために、企業が作成します。</span><span class="sxs-lookup"><span data-stu-id="ce131-165">These applications are written by the business to perform the processing jobs when installed on the workers.</span></span> <span data-ttu-id="ce131-166">銀行取引のシナリオ向けのリスク グリッド コンピューティングにおいて、このアプリケーションでは多くの場合、ダウンストリーム分析などの処理に適した特別な形式にデータを変換するジョブが発生します。</span><span class="sxs-lookup"><span data-stu-id="ce131-166">In risk grid computing for banking scenarios this this application often takes on the job of transforming data into formats especially suited for downstream analytics or other processing.</span></span>

<span data-ttu-id="ce131-167">アプリケーションを計算ノードに配布するためにプールに追加すると、アプリケーションはアプリケーション パッケージとしてアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-167">When providing the application to the pool for distribution to compute nodes, it is uploaded in an application package.</span></span> <span data-ttu-id="ce131-168">アプリケーション パッケージは、以前にアップロードされたアプリケーション パッケージの別のバージョンとすることができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-168">An application package may be another version of a previously uploaded application package.</span></span> <span data-ttu-id="ce131-169">1 つの計算ノードに複数のアプリケーション パッケージをインストールできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-169">More than one application package can be installed to one compute node.</span></span> <span data-ttu-id="ce131-170">ジョブには、worker マシンに読み込むアプリケーション パッケージが含まれています。</span><span class="sxs-lookup"><span data-stu-id="ce131-170">The job contains the applications packages to load onto the worker machines.</span></span>

<span data-ttu-id="ce131-171">アプリケーション パッケージのデプロイも、バージョンによって管理できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-171">Application package deployment may also be managed by version.</span></span> <span data-ttu-id="ce131-172">1 つのアプリケーション パッケージの複数のバージョンがプールに読み込まれている場合は、図 4 に示すように、特定の 1 つのバージョンをバッチ実行で使用するように指定できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-172">If multiple versions of an application package have been loaded into a pool, a specific version may be designated for use in a Batch run as shown in Figure 4.</span></span> <span data-ttu-id="ce131-173">これは、監査の環境において、または企業が以前の実行の再現を希望する場合に、必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-173">This may be necessary in audit environments or when the business wants to reproduce a prior run.</span></span> <span data-ttu-id="ce131-174">また、worker アプリケーションにバグが混入した場合に、ロールバックを目的として使用されることもあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-174">It can also be used for roll-back purposes if a bug is introduced to the worker application.</span></span>

![バッチ実行プロセス](./assets/risk-grid-compute-assets/08-versioning-worker-applications.png)

<span data-ttu-id="ce131-176">**図 4:** 計算ノードのタスク アプリケーションのバージョン指定</span><span class="sxs-lookup"><span data-stu-id="ce131-176">**Figure 4:** Versioning compute node task applications</span></span>

<span data-ttu-id="ce131-177">アプリケーション パッケージは、タスクでアプリケーションを実行するために必要なアプリケーション バイナリとサポート ファイルを含む .zip ファイルとしてプールにアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-177">An application package is uploaded to the pool as a .zip file containing the application binaries and supporting files required for tasks to run the application.</span></span> <span data-ttu-id="ce131-178">アプリケーション パッケージには 2 つのスコープがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-178">There are 2 scopes for application packages.</span></span> <span data-ttu-id="ce131-179">アプリケーション パッケージは、プールのスコープ内に指定するか、タスクのスコープ内に指定することができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-179">You can designate an application package in scope of the pool, or in the scope of tasks.</span></span>

## <a name="pool-application-packages"></a><span data-ttu-id="ce131-180">プールのアプリケーション パッケージ</span><span class="sxs-lookup"><span data-stu-id="ce131-180">Pool application packages</span></span>

<span data-ttu-id="ce131-181">これらのパッケージは、プール内のすべての計算ノードにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-181">These packages are deployed to every compute node in the pool.</span></span> <span data-ttu-id="ce131-182">計算ノード VM がプロビジョニング、再起動または再イメージ化されたとき、更新されたアプリケーションが存在する場合は、プールのアプリケーション パッケージの新しいコピーがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-182">When a compute node VM is provisioned, rebooted or reimaged, a new copy of any pool application packages is installed, should an updated application exist.</span></span> <span data-ttu-id="ce131-183">1 つのプールに 1 つ以上のアプリケーション パッケージが割り当てられる場合があります。これは、計算ノードでは指定されたすべてのパッケージが取得されることを意味します。</span><span class="sxs-lookup"><span data-stu-id="ce131-183">One or more application packages can be assigned to a pool, which means the compute nodes will get all packages designated.</span></span>

## <a name="task-application-packages"></a><span data-ttu-id="ce131-184">タスクのアプリケーション パッケージ</span><span class="sxs-lookup"><span data-stu-id="ce131-184">Task application packages</span></span>

<span data-ttu-id="ce131-185">タスク レベルをターゲットとするアプリケーション パッケージは、タスクを実行するようにスケジュールされた計算ノードだけにインストールされます。</span><span class="sxs-lookup"><span data-stu-id="ce131-185">Application packages targeting the task level are only installed to compute nodes scheduled to run a task.</span></span> <span data-ttu-id="ce131-186">タスクのアプリケーション パッケージは、1 つのプール内で複数のジョブが実行される用途に適しています。</span><span class="sxs-lookup"><span data-stu-id="ce131-186">Task applications packages are intended for use when more than one job is run in one pool.</span></span>

<span data-ttu-id="ce131-187">タスク アプリケーションは、プールレベルのジョブによって生成されたデータを集約する場合に便利です。これはリスク グリッド コンピューティングのシナリオに適しています。</span><span class="sxs-lookup"><span data-stu-id="ce131-187">Task applications are useful when aggregating data produced by pool-level jobs, which can be relevant in risk grid computing scenarios.</span></span> <span data-ttu-id="ce131-188">たとえば、タスク アプリケーションでは、リスク計算ワークフローで後ほど使用されるデータを生成する一連のリスク計算を実行できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-188">For example, a task application may run a set of risk calculations which generate data to be used later in the risk calculation workflow.</span></span>

## <a name="scaling-batch-jobs"></a><span data-ttu-id="ce131-189">バッチ ジョブのスケール</span><span class="sxs-lookup"><span data-stu-id="ce131-189">Scaling batch jobs</span></span>

<span data-ttu-id="ce131-190">銀行は多くの場合、コンピューティング リソースの使用率が低い週末や夜間に、リスク分析のバッチ実行を実施します。</span><span class="sxs-lookup"><span data-stu-id="ce131-190">Banks often perform risk analysis batch runs over weekends or at night when computing resources are underutilized.</span></span> <span data-ttu-id="ce131-191">このモデルは有効な場合がある一方、すぐに規模が拡大し、より多くの worker マシンをグリッドに追加するためにより多くの資金が必要になります。</span><span class="sxs-lookup"><span data-stu-id="ce131-191">While this model works for some, it can quickly be outgrown, requiring more capital to add more worker machines to the grid.</span></span>

<span data-ttu-id="ce131-192">バッチ ジョブの実行に時間がかかりすぎる場合や、バッチ実行により多くのコンピューティング能力が必要な場合、Azure には複数のオプションが用意されています。</span><span class="sxs-lookup"><span data-stu-id="ce131-192">If Batch jobs are taking too long to run or you want more computing power in your Batch runs, Azure offers several options.</span></span>

1. <span data-ttu-id="ce131-193">より多くの計算ノード マシンを割り当ててスケール アウトします。</span><span class="sxs-lookup"><span data-stu-id="ce131-193">Allocate more compute node machines to scale out.</span></span>
2. <span data-ttu-id="ce131-194">より能力の高い計算ノード マシンを割り当ててスケール アップします。</span><span class="sxs-lookup"><span data-stu-id="ce131-194">Allocate more powerful compute node machines to scale up.</span></span> <span data-ttu-id="ce131-195">コア数やメモリについて、また GPU 処理能力についても、より高いパフォーマンスのニーズを満たす Azure マシンをプロビジョニングします。</span><span class="sxs-lookup"><span data-stu-id="ce131-195">Azure machines may be provisioned to meet high performance needs of for cores and memory, and even GPU computing power.</span></span>

> <span data-ttu-id="ce131-196">注: Microsoft HPC Pack の Batch との併用は、より複雑なモデルであり、この記事では説明しません。</span><span class="sxs-lookup"><span data-stu-id="ce131-196">Note: Using Microsoft HPC Pack with Batch is a more complex model and is not discussed in this article.</span></span>

<span data-ttu-id="ce131-197">Batch 処理クラスター内にある処理 VM は、2 つだけと少ない場合もあれば、数千の同期タスクが、数万のコアを持つ数千の VM 計算ノード上で実行される場合もあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-197">In a Batch processing cluster, there may be as few as two processing VMs, or thousands of simultaneous tasks running on thousands of VM compute nodes with tens of thousands of cores.</span></span> <span data-ttu-id="ce131-198">各 VM は、一度に 1 つのタスクを実行します。</span><span class="sxs-lookup"><span data-stu-id="ce131-198">Each VM is responsible for running a single task at a time.</span></span> <span data-ttu-id="ce131-199">プール内の VM の数は、負荷が増加または減少したときに、構成に従って手動または自動でスケールできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-199">The number of VMs in a pool may be scaled manually or automatically as configured when load increases or decreases.</span></span>

### <a name="burst-to-cloud"></a><span data-ttu-id="ce131-200">クラウドへのバースト</span><span class="sxs-lookup"><span data-stu-id="ce131-200">Burst to cloud</span></span>

<span data-ttu-id="ce131-201">大規模な分析ジョブの実行によってオンプレミス グリッド内のコンピューティング リソースが不足したとき、"クラウドへのバースト" は、Azure 内のより多くの計算ノードを追加することによって、それらのリソースを増強する方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="ce131-201">When compute resources in an on-premises grid are running low due to executing a large analysis job, “burst to cloud” offers a way to augment those resources by adding more compute nodes in Azure.</span></span> <span data-ttu-id="ce131-202">クラウドへのバーストは、オンプレミス リソースに対する需要が高くなったときに、プライベート クラウドまたはインフラストラクチャのワークロードをクラウド サーバーに分散するモデルです。</span><span class="sxs-lookup"><span data-stu-id="ce131-202">Burst to cloud is a model in which private clouds or infrastructure distribute their workload to cloud servers when demand is high for on-premises resources.</span></span>

<span data-ttu-id="ce131-203">これらの計算ノードは、Azure の IaaS プラットフォーム上にプロビジョニングされる Linux または Windows 仮想マシンとして、あらかじめ構成することができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-203">These compute nodes can be pre-configured as Linux or Windows virtual machines to be provisioned in Azure’s IaaS platform.</span></span> <span data-ttu-id="ce131-204">さらに、サーバーをプロビジョニングし、Tibco Gridserver や IBM Symphony などの既存の投資と連携するように自動的に構成することができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-204">Further, servers can be provisioned and automatically configured to work with existing investments like Tibco Gridserver and IBM Symphony.</span></span>

### <a name="automatic-scaling-formulas"></a><span data-ttu-id="ce131-205">自動スケールの数式</span><span class="sxs-lookup"><span data-stu-id="ce131-205">Automatic scaling formulas</span></span>

<span data-ttu-id="ce131-206">このエラスティックな特徴を Azure portal 上で、または[自動スケールの数式](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr)を使用して構成できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-206">This elasticity can be configured in the Azure portal or by using [automatic scaling formulas](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="ce131-207">自動スケールの数式は、Batch 処理スケジューラにアップロードされた、Batch の動作をきめ細かく制御するためのスクリプトです。</span><span class="sxs-lookup"><span data-stu-id="ce131-207">Automatic scaling formulas are scripts uploaded to the Batch processing scheduler for fine-grained control of Batch behavior.</span></span> <span data-ttu-id="ce131-208">計算ノードのプールに対する自動スケールは、ノードを自動スケールの数式に関連付けることによって行われます。</span><span class="sxs-lookup"><span data-stu-id="ce131-208">Automatic scaling on a pool of compute nodes is done by associating the nodes with auto-scale formulas.</span></span>

<span data-ttu-id="ce131-209">次に、1 台の VM を使用して自動スケールを開始し、必要に応じて 50 VM までスケールアップすることを指示する、自動スケールの数式の例を示します。</span><span class="sxs-lookup"><span data-stu-id="ce131-209">Below is an example of an automatic scaling formula directing auto scaling to start with one VM and scale up to 50 VMs as needed.</span></span> <span data-ttu-id="ce131-210">タスクが完了すると、VM が 1 台ずつ解放され、自動スケールの数式によってプールが縮小します。</span><span class="sxs-lookup"><span data-stu-id="ce131-210">As tasks complete, VMs become free one by one and the auto scaling formula shrinks the pool.</span></span>

```Formula
startingNumberOfVMs = 1;
maxNumberofVMs = 50;
pendingTaskSamplePercent = $PendingTasks.GetSamplePercent(180 * TimeInterval_Second);
pendingTaskSamples = pendingTaskSamplePercent < 70 ? startingNumberOfVMs : avg($PendingTasks.GetSample(180 * TimeInterval_Second));
$TargetDedicatedNodes=min(maxNumberofVMs, pendingTaskSamples);
```

### <a name="other-scaling-techniques"></a><span data-ttu-id="ce131-211">その他のスケール手法</span><span class="sxs-lookup"><span data-stu-id="ce131-211">Other scaling techniques</span></span>

<span data-ttu-id="ce131-212">自動スケールは、PowerShell コマンドレット Enable-AzureBatchAutoScale によって有効にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-212">Automatic scaling can also be enabled by the Enable-AzureBatchAutoScale PowerShell cmdlet.</span></span> <span data-ttu-id="ce131-213">Enable-AzureBatchAutoScale コマンドレットを使用すると、指定したプールの自動スケールが可能になります。</span><span class="sxs-lookup"><span data-stu-id="ce131-213">The Enable-AzureBatchAutoScale cmdlet enables automatic scaling of the specified pool.</span></span> <span data-ttu-id="ce131-214">例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="ce131-214">An example follows.</span></span>

1. <span data-ttu-id="ce131-215">最初のコマンドでは、式を定義し、`$Formula` 変数に格納します。</span><span class="sxs-lookup"><span data-stu-id="ce131-215">The first command defines a formula, and then saves it to the `$Formula` variable.</span></span>
2. <span data-ttu-id="ce131-216">2 番目のコマンドでは、`RiskGridPool` という名前のプールに対するスケールを、`$Formula` 内の式を使用して有効にします。</span><span class="sxs-lookup"><span data-stu-id="ce131-216">The second command enables automatic scaling on the pool named `RiskGridPool` using the formula in `$Formula`.</span></span>

```console
C:\> $Formula = ‘startingNumberOfVMs = 1;
maxNumberofVMs = 50;
pendingTaskSamplePercent = $PendingTasks.GetSamplePercent(180 * TimeInterval_Second?WT.mc_id=gridbanksg-docs-dastarr);
pendingTaskSamples = pendingTaskSamplePercent < 70 ? startingNumberOfVMs : avg($PendingTasks.GetSample(180 * TimeInterval_Second));
$TargetDedicatedNodes=min(maxNumberofVMs, pendingTaskSamples);’;

C:\> Enable-AzureBatchAutoScale -Id "RiskGridPool" -AutoScaleFormula $Formula -BatchContext $Context
```

<span data-ttu-id="ce131-217">スケールは、Azure CLI を使用して、`az batch pool resize` コマンドと Azure Portal によって実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-217">Scaling can also be accomplished using the Azure CLI with the `az batch pool resize` command and the Azure Portal.</span></span>

## <a name="data-storage-and-retention"></a><span data-ttu-id="ce131-218">データの保存と保持</span><span class="sxs-lookup"><span data-stu-id="ce131-218">Data storage and retention</span></span>

<span data-ttu-id="ce131-219">データが計算ノードに取り込まれて処理された後、その結果の出力データをデータベース内に格納し、さらに処理や分析を行うことができます。または、格納する前の取り込みの時点で確実に、ダウンストリーム処理用の適切な形式に変換できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-219">Once data is ingested and processed by a compute node, the resulting output data may be stored in a database for further processing and analysis or transformed upon ingestion before storage to ensure proper formats for downstream processing.</span></span> <span data-ttu-id="ce131-220">Microsoft Azure にはストレージのオプションが複数用意されています。</span><span class="sxs-lookup"><span data-stu-id="ce131-220">Microsoft Azure offers several storage options.</span></span> <span data-ttu-id="ce131-221">[使用するデータ ストア テクノロジ](/azure/architecture/data-guide/?WT.mc_id=gridbanksg-docs-dastarr)の選択は、分析および/または、ダウンストリーム プロセスでのレポートのニーズに大きく依存します。</span><span class="sxs-lookup"><span data-stu-id="ce131-221">The choice of [which data store technology to use](/azure/architecture/data-guide/?WT.mc_id=gridbanksg-docs-dastarr) depends largely on analysis and or reporting needs in downstream processes.</span></span>

<span data-ttu-id="ce131-222">ハイブリッド ネットワークの使用時、データ ストレージのターゲットがオンプレミスである可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-222">When using a hybrid network, the data storage target may be on-premises.</span></span> <span data-ttu-id="ce131-223">ハイブリッド ネットワーク経由で Batch を使用する場合、Azure ベースのストレージの場所を使用して、計算ノードからオンプレミスのデータ ストアにデータを書き戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-223">When using Batch over a hybrid network, compute nodes can write data back to an on-premises data store without using an Azure-based storage location.</span></span> <span data-ttu-id="ce131-224">worker から Azure ファイル ストレージに書き込むこともできます。このストレージはディスクとしてマウントできるため、オンプレミスのファイルを使用するプロセスから簡単にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-224">Workers can also write to Azure File storage, which can be mounted as a disk on an on-premises machine for easy access by any process that works with the files on-premises.</span></span>

## <a name="monitoring-and-logging"></a><span data-ttu-id="ce131-225">監視およびログ記録</span><span class="sxs-lookup"><span data-stu-id="ce131-225">Monitoring and logging</span></span>

<span data-ttu-id="ce131-226">バッチ ジョブの今後の実行を最適化するには、最適化した領域を識別しやすいようにデータを記録しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-226">To optimize future runs of the Batch job, data should be recorded to help identify areas of optimization.</span></span> <span data-ttu-id="ce131-227">たとえば、worker が CPU のキャパシティに近い状態で実行されている場合は、計算ノードにコアを追加することが CPU による制約の回避に役立ち、ジョブをより高速に完了することができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-227">For example, if workers are running near CPU capacity, adding cores to the compute nodes may help avoid being CPU-bound and the job can finish faster.</span></span> <span data-ttu-id="ce131-228">バッチ ジョブ内で実行されるアプリケーションにはそれぞれ固有の特性があり、バッチ実行において VM に対して行う最適化は同一とは限りません。</span><span class="sxs-lookup"><span data-stu-id="ce131-228">Each application run in the Batch job has its own characteristics and the optimizations made to the VMs in the Batch runs may differ.</span></span> <span data-ttu-id="ce131-229">メモリ集中型タスクの場合、次回の実行時にマシンを異なる方法で構成すると、より多くのメモリを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-229">For memory intensive tasks, more memory can be allocated by configuring the machines differently in the next run.</span></span>

<span data-ttu-id="ce131-230">ログ記録は、計算ノード アプリケーションとグリッド ヘッド アプリケーションによって、または [Batch 診断ログ](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr)を使用するジョブによって行うことができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-230">Logging can be done by the compute node and grid head applications or by a job using [Batch Diagnostic Logging](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="ce131-231">バッチ実行のパフォーマンスに関する情報のログ記録を構成すると、パフォーマンスの向上と、より高速なタスク完了のために改善すべき領域の特定に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="ce131-231">Logging information about the performance of the Batch runs can be configured to help identify which areas to improve for better performance and faster task completion.</span></span>

### <a name="custom-batch-monitoring-and-logging"></a><span data-ttu-id="ce131-232">カスタムの Batch 監視とログ記録</span><span class="sxs-lookup"><span data-stu-id="ce131-232">Custom Batch monitoring and logging</span></span>

<span data-ttu-id="ce131-233">制御アプリケーションと計算ノード アプリケーションでは、このデータを生成して保存し、さらに詳しく分析できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-233">The controlling application and compute node applications can generate this data and store it for further analysis.</span></span> <span data-ttu-id="ce131-234">バッチ ジョブを最適化するうえで役に立つデータとして、次のようなデータがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-234">Data found helpful in optimizing Batch jobs includes:</span></span>

- <span data-ttu-id="ce131-235">各タスクの開始時刻と終了時刻</span><span class="sxs-lookup"><span data-stu-id="ce131-235">Start and end times for each task</span></span>
- <span data-ttu-id="ce131-236">各計算ノードが動作しており、タスクを実行していた時間</span><span class="sxs-lookup"><span data-stu-id="ce131-236">The time each compute node is alive and running tasks</span></span>
- <span data-ttu-id="ce131-237">各計算ノードが動作しており、タスクを実行していなかった時間</span><span class="sxs-lookup"><span data-stu-id="ce131-237">The time each compute node is alive and not running tasks</span></span>
- <span data-ttu-id="ce131-238">全体的なバッチ ジョブの実行時間</span><span class="sxs-lookup"><span data-stu-id="ce131-238">The overall batch job run time</span></span>

### <a name="batch-diagnostic-logging"></a><span data-ttu-id="ce131-239">Batch 診断のログ記録</span><span class="sxs-lookup"><span data-stu-id="ce131-239">Batch Diagnostic Logging</span></span>

<span data-ttu-id="ce131-240">インストルメンテーション データの生成には、コントローラーと計算ノード アプリケーションを使用する以外の別の方法があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-240">There is an alternative to using the controller and compute node applications to emit instrumentation data.</span></span> <span data-ttu-id="ce131-241">[Batch 診断ログ](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr)では、さまざまな実行データをキャプチャできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-241">[Batch Diagnostics Logging](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr) can capture a lot of the run data.</span></span> <span data-ttu-id="ce131-242">Batch 診断ログは既定では有効になっておらず、Batch アカウントに対して有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-242">Batch Diagnostic Logging is not enabled by default and must be enabled for the Batch account.</span></span>

<span data-ttu-id="ce131-243">Batch 診断ログによって、バッチ実行のトラブルシューティングと最適化に役立つ大量のデータが提供されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-243">Batch Diagnostic Logging provides a significant amount of data aiding in trouble shooting and optimizing Batch runs.</span></span> <span data-ttu-id="ce131-244">ジョブとタスクの開始時刻と終了時刻、コア数、合計ノード数、その他多くのメトリック。</span><span class="sxs-lookup"><span data-stu-id="ce131-244">Start and end times for job and tasks, core count, total node count and many other metrics.</span></span>

<span data-ttu-id="ce131-245">Batch ログ記録には、プールの作成、ジョブの実行、タスクの実行など、バッチ実行によって生成されたイベントを格納するために、生成されたログの送信先となるストレージが必要です。診断ログ イベントを Azure ストレージ アカウントに格納することに加えて、Batch サービス ログ イベントを [Azure イベント ハブ](/azure/event-hubs/event-hubs-what-is-event-hubs?WT.mc_id=gridbanksg-docs-dastarr)にストリーミングし、[Azure Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=gridbanksg-docs-dastarr) に送信することができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-245">Batch Logging requires a storage destination for the logs emitted, storing events produced by the Batch run such as pool creation, job execution, task execution, etc. In addition to storing diagnostic log events in an Azure Storage account, Batch Service Log events can be streamed to an [Azure Event Hub](/azure/event-hubs/event-hubs-what-is-event-hubs?WT.mc_id=gridbanksg-docs-dastarr), and sent to [Azure Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="ce131-246">このようなデータを使用して、中核となる計算ノード アプリケーションとヘッド ノード アプリケーションを最適化できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-246">Using these data, core computing and head node applications may be optimized.</span></span> <span data-ttu-id="ce131-247">そうすることで、必要なくなった worker VM のプロビジョニング解除を迅速化すること (バッチ実行が最後まで完了するのを待つのではなく) などによって、コストを削減できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-247">This can lower costs due to things like faster deprovisioning worker VMs when they are no longer needed, rather than waiting for the end of the Batch run to complete.</span></span>

### <a name="batch-management-tools"></a><span data-ttu-id="ce131-248">Batch の管理ツール</span><span class="sxs-lookup"><span data-stu-id="ce131-248">Batch management tools</span></span>

<span data-ttu-id="ce131-249">Azure portal には、Batch 監視ダッシュボードが用意されていて、ジョブ実行中の Batch に関する情報が表示されるほか、アカウントのクォータ使用状況に関する情報も表示されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-249">The Azure portal provides a Batch monitoring dashboard which shows information about Batch as jobs are running and even account quota usage.</span></span> <span data-ttu-id="ce131-250">多くのバッチ ジョブ アプリケーションでは、それで十分です。</span><span class="sxs-lookup"><span data-stu-id="ce131-250">It is sufficient for many Batch job applications.</span></span>

<span data-ttu-id="ce131-251">Azure portal 上で使用できる Batch の管理ツールと視覚化ツールに加えて、Batch を管理するための、[BatchLabs](https://github.com/Azure/BatchLabs) という無料オープン ソース ツールがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-251">In addition to the Batch management and visualization tools available in the Azure portal, there is a free open source tool, [BatchLabs](https://github.com/Azure/BatchLabs) for managing Batch.</span></span> <span data-ttu-id="ce131-252">これは、Azure Batch アプリケーションの作成、デバッグ、監視に役立つスタンドアロンのクライアント ツールです。</span><span class="sxs-lookup"><span data-stu-id="ce131-252">This is a standalone client tool to help create, debug and monitor Azure Batch applications.</span></span> <span data-ttu-id="ce131-253">Mac、Linux、または Windows 用のインストール パッケージをダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="ce131-253">Download an installation package for Mac, Linux, or Windows.</span></span>

## <a name="network-models"></a><span data-ttu-id="ce131-254">ネットワーク モデル</span><span class="sxs-lookup"><span data-stu-id="ce131-254">Network models</span></span>

<span data-ttu-id="ce131-255">リスク分析では多くの場合、数千とはいかないまでも数百単位のドキュメントをリスク グリッド コンピューティング プロセスに取り込む必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-255">Risk analysis often requires hundreds, if not thousands, of documents to be ingested into the risk grid computing process.</span></span> <span data-ttu-id="ce131-256">多くの場合、これらのファイルはオンプレミスのファイル ストア、ネットワーク共有、またはその他のリポジトリに配置されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-256">These files are often located on-premises in a file store, network share, or other repository.</span></span> <span data-ttu-id="ce131-257">Azure ベースの VM を使用してこれらのファイルに対するアクセスと処理を行うときは、多くの場合、オンプレミス ネットワークを Azure ネットワークにシームレスに接続するとファイル アクセスがシンプルで高速になり、便利です。</span><span class="sxs-lookup"><span data-stu-id="ce131-257">When using Azure-based VMs to access and process those files, it is often useful for the on-premises network to be seamlessly connected to the Azure network, so file access is simple and fast.</span></span> <span data-ttu-id="ce131-258">このアプローチはさらに、計算ノード上で処理を行うためコードの変更が不要であるということも意味します。</span><span class="sxs-lookup"><span data-stu-id="ce131-258">This approach may even mean no code changes are needed to the code doing the processing on the compute nodes.</span></span>

<span data-ttu-id="ce131-259">Azure には、セキュリティで保護された信頼性の高い方法で現在のオンプレミス システムを Azure に接続するために、[Microsoft Azure ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) と [VPN Gateway](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr) という 2 つのモデルが用意されています。</span><span class="sxs-lookup"><span data-stu-id="ce131-259">Azure offers two models for securely and reliably connecting current on-premises systems to Azure, [Microsoft Azure ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) and [VPN Gateway](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="ce131-260">実装、パフォーマンス、[その他の属性](/azure/networking/networking-overview?WT.mc_id=gridbanksg-docs-dastarr)には違いがあるものの、両方とも、セキュリティで保護された信頼性の高い接続を実現します。</span><span class="sxs-lookup"><span data-stu-id="ce131-260">Both offer secure reliable connectivity, although there are differences in implementation, performance and [other attributes](/azure/networking/networking-overview?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="ce131-261">または、リスク グリッド コンピューティングのヘッド ノードをオンプレミスで動作させ、REST API または .NET やその他の言語の SDK を使用して、バッチ ジョブを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="ce131-261">Alternatively, the risk grid computing head node may live on-premises and execute the Batch job through the REST APIs or SDKs in .NET and other languages.</span></span>

<span data-ttu-id="ce131-262">その他にも、ハイブリッド ネットワーク ソリューションを使わずに Azure とオンプレミス リソースとの間の違いを埋める方法があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-262">There are other techniques for bridging the gap between Azure and on-premises resources without a hybrid network solution.</span></span> <span data-ttu-id="ce131-263">これについて以下に詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="ce131-263">More information on this is provided below.</span></span>

### <a name="expressroute"></a><span data-ttu-id="ce131-264">ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="ce131-264">ExpressRoute</span></span>

<span data-ttu-id="ce131-265">ExpressRoute では、現在のインターネット サービス プロバイダーなどの接続パートナー (ISP?WT.mc_id=gridbanksg-docs-dastarr) によって提供されるプライベート接続を経由して、オンプレミスまたはデータセンターのネットワークを Azure に接続します。</span><span class="sxs-lookup"><span data-stu-id="ce131-265">ExpressRoute ties your on-premises or datacenter network to Azure through a private connection facilitated by a connectivity partner, such as your current Internet Service Provider (ISP?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="ce131-266">これにより、両方のネットワークが相互に同じネットワーク インスタンスとして表示できるようになり、ネットワーク間でのシームレスなアクセスが可能になります。</span><span class="sxs-lookup"><span data-stu-id="ce131-266">This enables both networks to see each other as the same network instance, providing seamless access between networks.</span></span> <span data-ttu-id="ce131-267">既存のオンプレミス システムを Azure ネットワークに統合する場合、ネットワークの統合は不可欠であり、ExpressRoute を使用すると可能な最速の接続速度が得られます。</span><span class="sxs-lookup"><span data-stu-id="ce131-267">Network integration is critical when you want to integrate existing on-premises systems with an Azure network, and ExpressRoute offers the fastest connection speeds possible.</span></span>

<span data-ttu-id="ce131-268">Azure ExpressRoute の料金の詳細については、[こちらを参照してください](https://azure.microsoft.com/en-us/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-268">Additional pricing information for Azure ExpressRoute [can be found here](https://azure.microsoft.com/en-us/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

### <a name="vpn-gateway"></a><span data-ttu-id="ce131-269">VPN Gateway</span><span class="sxs-lookup"><span data-stu-id="ce131-269">VPN Gateway</span></span>

<span data-ttu-id="ce131-270">VPN Gateway は、ネットワークを Azure に接続するもう 1 つの方法です。</span><span class="sxs-lookup"><span data-stu-id="ce131-270">A VPN Gateway is another way to connect your network to Azure.</span></span> <span data-ttu-id="ce131-271">このモデルの欠点は、トラフィックがインターネットを経由して転送されることです。</span><span class="sxs-lookup"><span data-stu-id="ce131-271">The downside of this model is traffic flows over the Internet.</span></span> <span data-ttu-id="ce131-272">結果として接続の回復性が下がり、ネットワーク速度が ExpressRoute の速度に到達できない可能性がありますが、これはリスク グリッド コンピューティングのシナリオにとって障害にはならないと考えられます (通常、データ ファイルの読み込みは高速な処理であるため)。</span><span class="sxs-lookup"><span data-stu-id="ce131-272">The connection can less resilient as a result and network speeds cannot reach those of ExpressRoute, however this may not be a barrier for a risk grid computing scenario as reading data files is typically a fast operation.</span></span>

<span data-ttu-id="ce131-273">VPN Gateway の料金の詳細については、[こちらを参照してください](https://azure.microsoft.com/en-us/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-273">Additional pricing information for VPN Gateway [can be found here](https://azure.microsoft.com/en-us/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

### <a name="choices-for-connectivity-details"></a><span data-ttu-id="ce131-274">接続の選択に関する詳細</span><span class="sxs-lookup"><span data-stu-id="ce131-274">Choices for connectivity details</span></span>

<span data-ttu-id="ce131-275">図 5 に示すように、ネットワークを Azure に拡張するには基本的に 2 つのモデルがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-275">There are essentially two models for extending your network to Azure as shown in Figure 5.</span></span>

1. <span data-ttu-id="ce131-276">仮想ゲートウェイ – サイト対サイト</span><span class="sxs-lookup"><span data-stu-id="ce131-276">Virtual Gateway – Site-to-Site</span></span>
2. <span data-ttu-id="ce131-277">ExpressRoute – Exchange または ISP プロバイダー</span><span class="sxs-lookup"><span data-stu-id="ce131-277">ExpressRoute – Exchange or ISP provider</span></span>

![サイト対サイトと ExpressRoute](./assets/risk-grid-compute-assets/10-s2s-expressroute.png)

<span data-ttu-id="ce131-279">**図 5:** サイト対サイトと ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="ce131-279">**Figure 5:** Site-to-Site and ExpressRoute</span></span>

#### <a name="virtual-gateway-site-to-site-integration"></a><span data-ttu-id="ce131-280">仮想ゲートウェイによるサイト対サイトの統合</span><span class="sxs-lookup"><span data-stu-id="ce131-280">Virtual Gateway Site-to-Site integration</span></span>

<span data-ttu-id="ce131-281">[サイト対サイトの VPN Gateway](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal?WT.mc_id=gridbanksg-docs-dastarr) によってオンプレミス ネットワークを Azure VNet に接続します。</span><span class="sxs-lookup"><span data-stu-id="ce131-281">A [Site-to-Site VPN Gateway](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal?WT.mc_id=gridbanksg-docs-dastarr) connects your on-premises network to an Azure VNet.</span></span> <span data-ttu-id="ce131-282">実質的に (リソース、サーバー、成果物への双方向アクセスが可能な) 同じネットワークの一部とすることで、ネットワーク間の差を埋めます。</span><span class="sxs-lookup"><span data-stu-id="ce131-282">This bridges the gap between networks essentially making them parts of the same network, with two-way access to resources, servers, and artifacts.</span></span> <span data-ttu-id="ce131-283">これにより、リスク グリッド コンピューティングのバッチ ジョブを実行している Azure worker VM からデータ ファイルへの直接アクセスが可能になります。</span><span class="sxs-lookup"><span data-stu-id="ce131-283">This allows direct access to data files from the Azure worker VMs running the risk grid computing batch job.</span></span>

#### <a name="expressroute-integration"></a><span data-ttu-id="ce131-284">ExpressRoute による統合</span><span class="sxs-lookup"><span data-stu-id="ce131-284">ExpressRoute integration</span></span>

<span data-ttu-id="ce131-285">Azure パートナー ネットワーク プロバイダーによって提供される ExpressRoute 接続を使用して、サイト対サイト接続と同じ利点を実現でき、しかも速度と信頼性が向上します。</span><span class="sxs-lookup"><span data-stu-id="ce131-285">An ExpressRoute connection facilitated by an Azure partner network provider realizes the same benefits as a Site-to-Site connection, but with higher speeds and reliability.</span></span>

<span data-ttu-id="ce131-286">ExpressRoute 接続モデルについては、[こちらを参照してください] (/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-286">Get more information about [ExpressRoute connectivity models] (/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

### <a name="batch-processing-without-an-azure-hybrid-network"></a><span data-ttu-id="ce131-287">Azure ハイブリッド ネットワークを使用しない Batch 処理</span><span class="sxs-lookup"><span data-stu-id="ce131-287">Batch processing without an Azure hybrid network</span></span>

<span data-ttu-id="ce131-288">もう 1 つの Batch シナリオでは、Azure ベースのコンピューティング マシンによって後から処理できるように、すべてのデータ ファイルを Azure ストレージにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="ce131-288">Another Batch scenario is uploading all data files into Azure storage for later processing by Azure-based compute machines.</span></span> <span data-ttu-id="ce131-289">ファイル ストレージと Blob ストレージが、リスク グリッド コンピューティングのデータ格納場所の候補になると考えられます。</span><span class="sxs-lookup"><span data-stu-id="ce131-289">File storage and Blob storage are likely candidates for storing risk grid computing data.</span></span>

<span data-ttu-id="ce131-290">図 6 に示すように、このシナリオでは、ジョブ コントローラーとすべての計算ノードが Azure 上で動作します。</span><span class="sxs-lookup"><span data-stu-id="ce131-290">In this scenario, the job controller and all compute nodes live in Azure as shown in Figure 6.</span></span> <span data-ttu-id="ce131-291">Azure Machine Learning ソリューションやその他のシステムによるさらなる処理に備えて処理されたデータの送信先としては、Azure データ ストアが考えられます。</span><span class="sxs-lookup"><span data-stu-id="ce131-291">The likely destination for processed data is an Azure data store, in preparation for further processing by Azure Machine Learning solutions or other systems.</span></span> <span data-ttu-id="ce131-292">この追加処理は、この記事の取り扱い範囲外です。</span><span class="sxs-lookup"><span data-stu-id="ce131-292">This additional processing is beyond the scope of this article.</span></span>

![サイト対サイトと ExpressRoute](./assets/risk-grid-compute-assets/09-batch-upload-process.png)

<span data-ttu-id="ce131-294">**図 6:** Batch のアップロードから実行までのライフサイクル</span><span class="sxs-lookup"><span data-stu-id="ce131-294">**Figure 6:** Batch upload to execution lifecycle</span></span>

### <a name="hybrid-network-connectivity-resources"></a><span data-ttu-id="ce131-295">ハイブリッド ネットワーク接続のリソース</span><span class="sxs-lookup"><span data-stu-id="ce131-295">Hybrid network connectivity resources</span></span>

<span data-ttu-id="ce131-296">ご自分の状況に複数の構成が適用できる場合があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-296">Several configurations may be applicable in your situation.</span></span> <span data-ttu-id="ce131-297">ネットワーク接続と Azure への統合に関する決定とアーキテクチャに関するガイダンスとして、パターンと実践グループによる「_[オンプレミス ネットワークの Azure への接続](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr)_」の記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-297">To help with decisions and architectural guidance regarding connecting network connectivity to Azure, see the article _[Connect an on-premises network to Azure](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr)_ by the patterns & practices group.</span></span>

- <span data-ttu-id="ce131-298">代替の VPN Gateway 構成方法については、[こちらの記事を参照してください](/azure/vpn-gateway/vpn-gateway-about-vpngateways?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-298">[See this article](/azure/vpn-gateway/vpn-gateway-about-vpngateways?WT.mc_id=gridbanksg-docs-dastarr) for VPN Gateway configuration alternatives.</span></span>
- <span data-ttu-id="ce131-299">[ExpressRoute 接続モデル](/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr)について説明します。</span><span class="sxs-lookup"><span data-stu-id="ce131-299">Learn about [ExpressRoute connectivity models](/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr).</span></span>
- <span data-ttu-id="ce131-300">[ExpressRoute の料金](https://azure.microsoft.com/en-us/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr)を計算します。</span><span class="sxs-lookup"><span data-stu-id="ce131-300">Calculate [ExpressRoute pricing](https://azure.microsoft.com/en-us/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>
- <span data-ttu-id="ce131-301">[VPN Gateway の料金](https://azure.microsoft.com/en-us/pricing/details/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr)</span><span class="sxs-lookup"><span data-stu-id="ce131-301">Calculate [VPN Gateway pricing](https://azure.microsoft.com/en-us/pricing/details/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="ce131-302">セキュリティに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="ce131-302">Security considerations</span></span>

<span data-ttu-id="ce131-303">Azure [仮想ネットワーク (VNet)](/azure/virtual-network/virtual-networks-overview?WT.mc_id=gridbanksg-docs-dastarr) を作成し、その中にプールの計算ノードを作成できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-303">An Azure [virtual network (VNet)](/azure/virtual-network/virtual-networks-overview?WT.mc_id=gridbanksg-docs-dastarr) may be created and the pool's compute nodes created within it.</span></span> <span data-ttu-id="ce131-304">これにより、バッチ実行に対して追加レベルの分離性が提供され、[Azure Active Directory (AAD)](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr) を使用した認証が可能になります。</span><span class="sxs-lookup"><span data-stu-id="ce131-304">This provides an extra level of isolation for the Batch runs and allows authentication using [Azure Active Directory (AAD)](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="ce131-305">詳細については、[プール ネットワーク構成](/azure/batch/batch-api-basics#pool-network-configuration?WT.mc_id=gridbanksg-docs-dastarr)に関する記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-305">See [Pool network configuration](/azure/batch/batch-api-basics#pool-network-configuration?WT.mc_id=gridbanksg-docs-dastarr) for more information.</span></span>

<span data-ttu-id="ce131-306">AAD を使用してバッチ アプリケーションを認証するには、2 つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-306">There are two ways to authenticate a Batch application using AAD:</span></span>

1. <span data-ttu-id="ce131-307">**統合認証**。</span><span class="sxs-lookup"><span data-stu-id="ce131-307">**Integrated authentication**.</span></span> <span data-ttu-id="ce131-308">AAD アカウントを使用しているバッチ アプリケーションでは、そのアカウントを使用して、データ ストアやその他のリソースへのリソースを取得できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-308">A batch application using AAD accounts can use the account to gain resources to data stores and other resources.</span></span>

2. <span data-ttu-id="ce131-309">**サービス プリンシパル**。</span><span class="sxs-lookup"><span data-stu-id="ce131-309">**Service principal**.</span></span> <span data-ttu-id="ce131-310">AAD サービス プリンシパルは、ユーザーとアプリケーション用のアクセス ポリシーとアクセス許可を定義したものです。</span><span class="sxs-lookup"><span data-stu-id="ce131-310">AAD Service principals define access policy and permissions for users and applications.</span></span> <span data-ttu-id="ce131-311">サービス プリンシパルによって、そのアプリケーションに結び付けられている秘密鍵を使用した認証がユーザーに提供されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-311">A service principal provides authentication to users using a secret key tied to that application.</span></span> <span data-ttu-id="ce131-312">これにより、秘密鍵を使用して無人アプリケーションを認証できるようになります。</span><span class="sxs-lookup"><span data-stu-id="ce131-312">This allows authenticating an unattended application with a secret key.</span></span> <span data-ttu-id="ce131-313">サービス プリンシパルには、実行時のリソースへのアクセスの際にアプリケーションを表すための、アプリケーション用のポリシーとアクセス許可が定義されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-313">A service principal defines the policy and permissions for an application to represent the application when accessing resources at runtime.</span></span> <span data-ttu-id="ce131-314">[こちら](/azure/active-directory/develop/active-directory-application-objects?WT.mc_id=gridbanksg-docs-dastarr)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-314">[Learn more here](/azure/active-directory/develop/active-directory-application-objects?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="ce131-315">AAD を使用したバッチ処理におけるセキュリティの詳細については、[こちらの記事を参照してください](/azure/batch/batch-aad-auth?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-315">For more information on security in batch processing with AAD, [see this article](/azure/batch/batch-aad-auth?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="ce131-316">Batch サービスは、共有キーによって認証することもできます。</span><span class="sxs-lookup"><span data-stu-id="ce131-316">The Batch service can also authenticate with a shared key.</span></span> <span data-ttu-id="ce131-317">認証サービスでは、データと認証という 2 つのヘッダーの値を HTTP 要求に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-317">The authentication service requires two header values to be added to the HTTP request, data and authorization.</span></span> <span data-ttu-id="ce131-318">共有キーによる認証の詳細については、[こちらを参照してください](/rest/api/batchservice/authenticate-requests-to-the-azure-batch-service?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-318">[See here for more](/rest/api/batchservice/authenticate-requests-to-the-azure-batch-service?WT.mc_id=gridbanksg-docs-dastarr) on shared key authentication.</span></span>

## <a name="cost-considerations"></a><span data-ttu-id="ce131-319">コストに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="ce131-319">Cost considerations</span></span>

<span data-ttu-id="ce131-320">Azure Batch は無料でご利用いただけます。</span><span class="sxs-lookup"><span data-stu-id="ce131-320">There is no charge for using Azure Batch.</span></span> <span data-ttu-id="ce131-321">仮想マシン稼働時間、ストレージ、ネットワークなど、基になるリソースの使用した分だけをお支払いいただきます。</span><span class="sxs-lookup"><span data-stu-id="ce131-321">You only pay for the underlying resources consumed, such as virtual machine uptime, storage, and networking.</span></span> <span data-ttu-id="ce131-322">ただし、計算ノードの VM は稼働していない間も料金が発生するため、必要なくなったマシンはプロビジョニング解除することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ce131-322">However, the compute node VMs still cost money when sitting idle, so it is a good idea to deprovision machines when they are no longer needed.</span></span> <span data-ttu-id="ce131-323">これを行うには、多くの場合、それらを含むプールを削除します。</span><span class="sxs-lookup"><span data-stu-id="ce131-323">This is often done by deleting the pool containing them.</span></span>
>
<span data-ttu-id="ce131-324">プールを作成するときに、必要な計算ノードの種類と種類ごとの数を指定できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-324">When creating a pool, you can specify which types of compute nodes you want and the number of each.</span></span> <span data-ttu-id="ce131-325">計算ノードには、次の 2 種類があります。</span><span class="sxs-lookup"><span data-stu-id="ce131-325">The two types of compute nodes are as follows:</span></span>
>
><span data-ttu-id="ce131-326">**専用の計算ノード**は、ワークロード用に予約されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-326">**Dedicated compute nodes** are reserved for your workloads.</span></span> <span data-ttu-id="ce131-327">これは優先順位の低いノードより高価ですが、決して割り込まれないことが保証されています。</span><span class="sxs-lookup"><span data-stu-id="ce131-327">They are more expensive than low-priority nodes, but they are guaranteed to never be preempted.</span></span>
>
><span data-ttu-id="ce131-328">**優先順位の低い計算ノード**は、Azure の余剰キャパシティを利用してバッチ ワークロードを実行します。</span><span class="sxs-lookup"><span data-stu-id="ce131-328">**Low-priority compute nodes** take advantage of surplus capacity in Azure to run Batch workloads.</span></span> <span data-ttu-id="ce131-329">優先順位の低いノードは専用のノードより 1 時間あたりのコストが低く、多くのコンピューティング能力が必要なワークロードを可能にします。</span><span class="sxs-lookup"><span data-stu-id="ce131-329">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="ce131-330">詳細については、「[優先順位の低い VM で Batch を使用する](/azure/batch/batch-low-pri-vms?WT.mc_id=gridbanksg-docs-dastarr)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-330">For more information, see [Use low-priority VMs with Batch](/azure/batch/batch-low-pri-vms?WT.mc_id=gridbanksg-docs-dastarr).</span></span>
>
><span data-ttu-id="ce131-331">専用ノードと優先順位の低いノードが、同じプール内に存在できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-331">Dedicated and low-priority nodes may exist in the same pool.</span></span>
>
><span data-ttu-id="ce131-332">優先順位の低いコンピューティング ノードと専用のコンピューティング ノードの両方の価格情報については、「[Batch Pricing (Batch の価格)](https://azure.microsoft.com/pricing/details/batch/?WT.mc_id=gridbanksg-docs-dastarr)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-332">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="ce131-333">Batch 診断ログ サービスの使用時、Azure ストレージに出力されるデータには料金が発生します。</span><span class="sxs-lookup"><span data-stu-id="ce131-333">When using the Batch Diagnostic Logging service, the data emitted to Azure storage incurs a cost.</span></span> <span data-ttu-id="ce131-334">これは他のデータと同様のストレージ データであり、保持される診断データの量が料金に影響します。</span><span class="sxs-lookup"><span data-stu-id="ce131-334">This is storage data like any other data, and pricing is impacted by the amount of diagnostic data retained.</span></span>

## <a name="getting-started"></a><span data-ttu-id="ce131-335">使用の開始</span><span class="sxs-lookup"><span data-stu-id="ce131-335">Getting started</span></span>

<span data-ttu-id="ce131-336">リスク グリッド コンピューティング用の Batch コンピューティングのように複雑な領域では、使用を開始するための場所が多数ありますが、ここでは、Batch テクノロジをよりよく理解するための論理的な出発点をいくつか示します。</span><span class="sxs-lookup"><span data-stu-id="ce131-336">While there are many places to get started with a complex domain like Batch computing for risk grid computing, here are some logical starting points to better understand the Batch technology.</span></span>

<span data-ttu-id="ce131-337">コードと Azure portal の例を使用して Batch での作業を開始する場合は、[こちらを参照することをお勧めします](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="ce131-337">[This is a great place to start](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) working with Batch using coding and Azure portal examples.</span></span> <span data-ttu-id="ce131-338">Azure Batch のサンプル アプリケーションは、[GitHub](https://github.com/Azure/azure-batch-samples) でも無料で利用できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-338">The Azure Batch sample applications are also freely available [on GitHub](https://github.com/Azure/azure-batch-samples).</span></span>

<span data-ttu-id="ce131-339">バッチ計算ジョブを作成して実行するための簡単なアプリケーションを構築するのに役立つクイック チュートリアルを次に示します。</span><span class="sxs-lookup"><span data-stu-id="ce131-339">Below are some quick tutorials to help you build a simple application to create and run batch compute jobs.</span></span> <span data-ttu-id="ce131-340">アプリケーションを構築するためのオプションは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="ce131-340">Options for building the application are as follows:</span></span>

- [<span data-ttu-id="ce131-341">Batch .NET API</span><span class="sxs-lookup"><span data-stu-id="ce131-341">Batch .NET API</span></span>](/azure/batch/batch-dotnet-get-started?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="ce131-342">Batch SDK for Python</span><span class="sxs-lookup"><span data-stu-id="ce131-342">Batch SDK for Python</span></span>](/azure/batch/batch-python-tutorial?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="ce131-343">Batch SDK for Node.js</span><span class="sxs-lookup"><span data-stu-id="ce131-343">Batch SDK for Node.js</span></span>](/azure/batch/batch-nodejs-get-started?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="ce131-344">PowerShell を使用した Batch 管理</span><span class="sxs-lookup"><span data-stu-id="ce131-344">Batch management with PowerShell</span></span>](/azure/batch/batch-powershell-cmdlets-get-started?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="ce131-345">Azure CLI を使用した Batch 管理</span><span class="sxs-lookup"><span data-stu-id="ce131-345">Batch management with the Azure CLI</span></span>](/azure/batch/batch-cli-get-started?WT.mc_id=gridbanksg-docs-dastarr)

<span data-ttu-id="ce131-346">概念実証の取り組みを開始することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-346">Consider launching a proof-of-concept initiative.</span></span> <span data-ttu-id="ce131-347">Azure へのデータ インジェストのために、どのようなアプローチを使用しますか。</span><span class="sxs-lookup"><span data-stu-id="ce131-347">What will your approach be for data ingestion into Azure?</span></span> <span data-ttu-id="ce131-348">ハイブリッド ネットワークを使用しますか。または、SDK や REST インターフェイスを使用してデータをアップロードしますか。</span><span class="sxs-lookup"><span data-stu-id="ce131-348">Will you use a hybrid network or upload data via an SDK or REST interface?</span></span> <span data-ttu-id="ce131-349">ハイブリッド ネットワークを考えている場合は、これを実現するためのパイロットの開始を検討してください。</span><span class="sxs-lookup"><span data-stu-id="ce131-349">If you are considering a bybrid network, consider launching a pilot to put this in place.</span></span>

<span data-ttu-id="ce131-350">Batch コンピューティング ジョブのサイズを見積もり、適切なスケーリング ソリューションを選択します。</span><span class="sxs-lookup"><span data-stu-id="ce131-350">Evaluate the size of your Batch compute jobs and select the right scaling solution.</span></span> <span data-ttu-id="ce131-351">[自動スケールの数式](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr)を使用すると、複雑なスケジューリング シナリオを実現できます。一方、それよりもシンプルなシナリオは Azure portal を使用して実現できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-351">[Autoscaling formulas](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr) enable complex scheduling scenarios while simpler scenarios are achivable by using the Azure portal.</span></span>

## <a name="technologies-presented"></a><span data-ttu-id="ce131-352">使用するテクノロジ</span><span class="sxs-lookup"><span data-stu-id="ce131-352">Technologies presented</span></span>

<span data-ttu-id="ce131-353">[Azure Batch](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) は、クラウド上で大規模な並列処理ジョブを実行する機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="ce131-353">[Azure Batch](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) provides capabilities to run large scale parallel processing jobs in the cloud.</span></span>

<span data-ttu-id="ce131-354">[Azure Active Directory](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr) は、マルチテナントに対応したクラウドベースのディレクトリおよび ID 管理サービスで、中核となるディレクトリ サービス、アプリケーションのアクセス管理、ID の保護が 1 つのソリューションに統合されています。</span><span class="sxs-lookup"><span data-stu-id="ce131-354">[Azure Active Directory](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr) is a multi-tenant, cloud-based directory, and identity management service combining core directory services, application access management, and identity protection into a single solution.</span></span>

<span data-ttu-id="ce131-355">[自動スケールの数式](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr)は、Batch のスケール動作をきめ細かく制御するために、バッチ処理スケジューラにアップロードされたスクリプトです。</span><span class="sxs-lookup"><span data-stu-id="ce131-355">[Automatic scaling formulas](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr) are scripts uploaded to the batch processing scheduler for fine grained control of Batch scaling behaviors.</span></span>

<span data-ttu-id="ce131-356">[Batch 診断ログ](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr)は、ご自分のバッチ実行と生成されたイベントから詳細なログを作成できる、Azure Batch の機能です。</span><span class="sxs-lookup"><span data-stu-id="ce131-356">[Batch Diagnostics Logging](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr) is a feature of Azure Batch enabling creation of a detailed log from your Batch runs and the events generated.</span></span> <span data-ttu-id="ce131-357">ログは Azure Storage に格納されます。</span><span class="sxs-lookup"><span data-stu-id="ce131-357">Logs are stored in Azure Storage.</span></span>

<span data-ttu-id="ce131-358">[BatchLabs](https://github.com/Azure/BatchLabs) は、Batch の監視と管理のためのスタンドアロン アプリケーションであり、Windows、MacOS、Linux 上で使用できます。</span><span class="sxs-lookup"><span data-stu-id="ce131-358">[BatchLabs](https://github.com/Azure/BatchLabs) is a standalone application for Batch monitoring and management available Windows, MacOS and Linux.</span></span>

<span data-ttu-id="ce131-359">[ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) は、オンプレミス ネットワークと Azure ネットワークを結合するための、高速で高い信頼性を備えたハイブリッド ネットワーク ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="ce131-359">[ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) is a high speed and reliability hybrid network solution for joining on-premises and Azure networks.</span></span>

<span data-ttu-id="ce131-360">[VPN Gateway](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr) は、オンプレミス ネットワークと Azure ネットワークを結合するためにインターネットを使用する、ハイブリッド ネットワーク ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="ce131-360">[VPN Gateway](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr) is a hybrid network solution using the Internet for joining on-premises and Azure networks.</span></span>

## <a name="conclusion"></a><span data-ttu-id="ce131-361">まとめ</span><span class="sxs-lookup"><span data-stu-id="ce131-361">Conclusion</span></span>

<span data-ttu-id="ce131-362">このドキュメントでは、銀行取引向けリスク グリッド コンピューティング用に Azure Batch を使用する場合の、技術的なソリューションと考慮事項の概要を示しました。</span><span class="sxs-lookup"><span data-stu-id="ce131-362">This document provided an overview of technical solutions and considerations when using Azure Batch for risk grid computing for banking.</span></span> <span data-ttu-id="ce131-363">この記事では、Azure Batch の定義から[ネットワーク接続のオプション](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr)、さらに料金に関する考慮事項まで、さまざまなことを説明しました。</span><span class="sxs-lookup"><span data-stu-id="ce131-363">The article covered a lot of ground from the definition of Azure Batch to [networking options](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr), and even cost considerations.</span></span>

<span data-ttu-id="ce131-364">リスク グリッド コンピューティング用に Azure Batch の評価に進むことを検討する場合は、作業を開始するための適切なリソースとして、[このページ](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr)を参照することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="ce131-364">When considering moving forward in evaluating Azure Batch for risk grid computing, [this page](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) is a good resource for getting started.</span></span> <span data-ttu-id="ce131-365">リスク グリッド コンピューティングの本質である並列ファイル処理に関する、サンプルのガイド付きチュートリアルが用意されています。</span><span class="sxs-lookup"><span data-stu-id="ce131-365">It provides sample guided tutorials for parallel file processing, which is inherent in risk grid computing.</span></span> <span data-ttu-id="ce131-366">Azure Portal、Azure CLI、.NET、Python を使用したチュートリアルがあります。</span><span class="sxs-lookup"><span data-stu-id="ce131-366">Tutorials are provided using the Azure Portal, Azure CLI, .NET and Python.</span></span>
