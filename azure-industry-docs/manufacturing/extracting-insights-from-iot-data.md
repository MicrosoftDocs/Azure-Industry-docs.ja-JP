---
title: 製造業向けの IoT から分析情報を抽出するためのアーキテクチャ
description: Azure サービスを使用して IoT データから分析情報を抽出します。
author: ercenk
ms.author: ercenk
manager: gmarchet
ms.service: industry
ms.topic: article
ms.date: 11/28/2019
ms.openlocfilehash: 34577d595144c12ca9a85d1b28388a3bc84fb701
ms.sourcegitcommit: a6eefa2a605c9e1c5015ae107c9847b18d415746
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2019
ms.locfileid: "74540440"
---
# <a name="extracting-actionable-insights-from-iot-data"></a><span data-ttu-id="7abae-103">IoT データからアクションにつながる分析情報を抽出する</span><span class="sxs-lookup"><span data-stu-id="7abae-103">Extracting actionable insights from IoT data</span></span>

<span data-ttu-id="7abae-104">工場の機械の担当者は、モノのインターネット (IoT) がプロセスと結果の向上における次のステップであることを既に認識しています。</span><span class="sxs-lookup"><span data-stu-id="7abae-104">If you are responsible for the machines on a factory floor, you are already aware that the Internet of Things (IoT) is the next step in improving your processes and results.</span></span> <span data-ttu-id="7abae-105">機械または工場のフロアにセンサーを設置することが最初のステップです。</span><span class="sxs-lookup"><span data-stu-id="7abae-105">Having sensors on machines, or the factory floor, is the first step.</span></span> <span data-ttu-id="7abae-106">次のステップはそのデータを使用することであり、それがこのドキュメントの目的です。</span><span class="sxs-lookup"><span data-stu-id="7abae-106">The next step is to use the data—which is the object of this document.</span></span> <span data-ttu-id="7abae-107">このガイドでは、IoT データの分析からアクションにつながる分析情報を抽出するために必要なコンポーネントの技術的な概要を説明します。</span><span class="sxs-lookup"><span data-stu-id="7abae-107">This guide provides a technical overview of the components needed to extract actionable insights from IoT data analytics.</span></span>

<span data-ttu-id="7abae-108">IoT 分析ソリューションでは、一連のデバイスから送られてきた生の IoT データを、より分析に適した形式に変換します。</span><span class="sxs-lookup"><span data-stu-id="7abae-108">IoT analytics solutions are about transforming raw IoT data coming from a set of devices into a form that is better suited for analytics.</span></span> <span data-ttu-id="7abae-109">データが分析可能な形式になったら、実際に分析を実行できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-109">Once the data is in an analyzable form we can actually perform analytics.</span></span> <span data-ttu-id="7abae-110">分析の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="7abae-110">Some examples of analytics include:</span></span>

- <span data-ttu-id="7abae-111">時間経過による温度を示す横棒グラフなど、テレメトリ データのシンプルな視覚エフェクト</span><span class="sxs-lookup"><span data-stu-id="7abae-111">simple visualizations of the telemetry data, for example, a bar chart showing temperatures over time</span></span>
- <span data-ttu-id="7abae-112">総合設備効率 (OEE) など、主要業績評価指標 (KPI) の計算</span><span class="sxs-lookup"><span data-stu-id="7abae-112">calculation of KPIs, for example, Overall Equipment Effectiveness (OEE)</span></span>
- <span data-ttu-id="7abae-113">機械学習モデルを利用した予測分析</span><span class="sxs-lookup"><span data-stu-id="7abae-113">predictive analytics powered by machine learning models</span></span>

<span data-ttu-id="7abae-114">これらの分析は、さらに、アクションを示す分析情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-114">These analytics, in turn, provide insights that inform actions.</span></span> <span data-ttu-id="7abae-115">アクションの範囲は、機械への単純なコマンドの送信から、操作パラメーターの調整、別のソフトウェア システムでのアクションの実行、会社全体への運用改善プログラムの実装といったことにまで及びます。</span><span class="sxs-lookup"><span data-stu-id="7abae-115">Actions may range from sending a simple command to a machine, to tweaking operational parameters, to performing an action on another software system, to implementing company-wide operational improvement programs.</span></span>

<span data-ttu-id="7abae-116">次の図は、工場の機械と最終的な結果の間で発生するアクションのチェーンを示したものです。最終的な結果は "使用率" のダッシュボード表現であり、グラフと "87.5%" というラベルが表示されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-116">The figure below shows a chain of actions that occur between a factory machine and the end result, which is a dashboard representation of “utilization,” showing a graph and the label “87.5%.”</span></span>

![工場からダッシュボードまで。](assets/extracting-insights-from-iot/factory-to-dashboard.png)

<span data-ttu-id="7abae-118">わかりやすくするため、機械の使用率というシンプルな KPI を使用しています。</span><span class="sxs-lookup"><span data-stu-id="7abae-118">For the purposes of illustration, we will use the calculation of a simple KPI: machine utilization.</span></span> <span data-ttu-id="7abae-119">"*機械の使用率*" は、機械が実際に部品を "*製造している*" 時間の割合です。</span><span class="sxs-lookup"><span data-stu-id="7abae-119">*Machine utilization* is the percentage of time the machine is actually *producing* parts.</span></span> <span data-ttu-id="7abae-120">たとえば、シフトが 8 時間であり、そのうちの 7 時間だけ機械が部品を製造している場合、そのシフトにおけるその機械の使用率は 87.5% (7/8 x 100) になります。</span><span class="sxs-lookup"><span data-stu-id="7abae-120">For example, if there are 8 hours in a shift, and the machine is producing parts for 7 of those hours, then the machine utilization for that shift is 87.5% (7/8 x 100).</span></span>

## <a name="approach"></a><span data-ttu-id="7abae-121">アプローチ</span><span class="sxs-lookup"><span data-stu-id="7abae-121">Approach</span></span>

<span data-ttu-id="7abae-122">IoT アプリケーションを構成するコンポーネントは、データまたはイベントを送信する**モノ** (つまりデバイス)、データを使用して生成される**分析情報**、さらに分析情報を使用して生成される、ビジネスやプロセスの改善に役立つ**アクション**の 3 つです。</span><span class="sxs-lookup"><span data-stu-id="7abae-122">IoT applications have three components: **things** (or devices), sending data or events that are used to generate **insights**, which are used to generate **actions** to help improve a business or process.</span></span>

<span data-ttu-id="7abae-123">製造工場の機器 (モノ) は、動作しながらさまざまな種類のデータを送信します。</span><span class="sxs-lookup"><span data-stu-id="7abae-123">The equipment in a manufacturing plant (things) sends various types of data as it operates.</span></span> <span data-ttu-id="7abae-124">たとえば、供給量と温度のデータを送信するフライス盤などです。このデータを使用して、機械が稼働しているかどうかが評価され (分析情報)、それを使用して工場が最適化されます (アクション)。</span><span class="sxs-lookup"><span data-stu-id="7abae-124">An example is a milling machine sending feed rate and temperature data; this is used to evaluate whether the machine is running or not—an insight—which is used to optimize the plant—an action.</span></span> <span data-ttu-id="7abae-125">ここでは、データを抽出し、ダッシュボードで視覚化し、新しい分析情報を抽出して、さらにアクションを実行する手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="7abae-125">We will go through the steps to extract the data, visualize it in a dashboard, extract new insights, and take further actions.</span></span>
<span data-ttu-id="7abae-126">![モノから分析情報に、そしてアクションへ。](assets/extracting-insights-from-iot/things-insights-actions.png)</span><span class="sxs-lookup"><span data-stu-id="7abae-126">![Things to Insights to Actions.](assets/extracting-insights-from-iot/things-insights-actions.png)</span></span>

<span data-ttu-id="7abae-127">Microsoft では、IoT アプリケーション向けの参照アーキテクチャの概要を公開しており、さまざまなサブシステムと、それらのサブシステムに対して推奨されるアプローチが示されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-127">Microsoft has published a high level reference architecture for IoT applications that walks through the various subsystems and the recommended approaches for those subsystems.</span></span>
<span data-ttu-id="7abae-128">IoT アプリケーションは、以下のサブシステムで構成されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-128">An IoT application consists of the following subsystems:</span></span>

1. <span data-ttu-id="7abae-129">デバイス、またはオンプレミスのエッジ ゲートウェイ: クラウドにメッセージ ソース (デバイス) を安全に登録できる特定の種類のデバイスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-129">Devices, or on-premises edge gateways, which are a specific kind of device that can securely register message sources (devices) with the cloud.</span></span> <span data-ttu-id="7abae-130">エッジ ゲートウェイでは、ネイティブ プロトコルから別の形式 (JSON など) へのメッセージ変換が行われる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-130">The edge gateway may also transform messages from a native protocol to another format (such as JSON).</span></span>
2. <span data-ttu-id="7abae-131">クラウド ゲートウェイ サービスまたはハブ ([Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) や [Azure Event Hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk) など): データを安全に取り込んで、デバイス管理機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-131">A cloud gateway service, or hub (such as [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) or [Azure Event Hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk)), to securely ingest data and provide device management capabilities.</span></span> 
3. <span data-ttu-id="7abae-132">ストリーム プロセッサ: ストリーミング データを使用します。</span><span class="sxs-lookup"><span data-stu-id="7abae-132">Stream processors that consume streaming data.</span></span> <span data-ttu-id="7abae-133">プロセッサは、ビジネス プロセスと統合して、ストレージにデータを配置することもありますも。</span><span class="sxs-lookup"><span data-stu-id="7abae-133">The processors may also integrate with business processes and place the data into storage.</span></span>
4. <span data-ttu-id="7abae-134">ダッシュボード形式のユーザー インターフェイス: IoT データを視覚化し、デバイスの管理を容易にします。</span><span class="sxs-lookup"><span data-stu-id="7abae-134">A user interface, in the form of a dashboard, to visualize IoT data and facilitate device management.</span></span>

![ソリューションのアーキテクチャ。](assets/extracting-insights-from-iot/architecture.png)

<span data-ttu-id="7abae-136">この記事では、分析情報を抽出するプロセスに注目します。</span><span class="sxs-lookup"><span data-stu-id="7abae-136">In this article, we focus on the process of extracting insights.</span></span> <span data-ttu-id="7abae-137">主要な手順を次に示します。</span><span class="sxs-lookup"><span data-stu-id="7abae-137">These are the major steps:</span></span>

1. <span data-ttu-id="7abae-138">データにアクセスし、処理を行ってデータ ストリームにします。</span><span class="sxs-lookup"><span data-stu-id="7abae-138">Access the data and process it into a data stream.</span></span>
2. <span data-ttu-id="7abae-139">データを処理して格納します。</span><span class="sxs-lookup"><span data-stu-id="7abae-139">Process and store the data.</span></span>
3. <span data-ttu-id="7abae-140">データを視覚化または提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-140">Visualize or present the data.</span></span> 

<span data-ttu-id="7abae-141">次の図は、データ ソースから、変換、取り込み、処理と格納、提示、最終的なアクションという、データの流れを示したものです。</span><span class="sxs-lookup"><span data-stu-id="7abae-141">The figure below is a diagram that shows the flow of data, from data source, to convert, to ingestion, to process and store, to presentation, and finally action.</span></span>

![データ フロー: ソース、取り込み、提示、アクション。](assets/extracting-insights-from-iot/data-flow.png)

## <a name="converting-the-data-to-a-stream"></a><span data-ttu-id="7abae-143">データからストリームへの変換</span><span class="sxs-lookup"><span data-stu-id="7abae-143">Converting the data to a stream</span></span>

<span data-ttu-id="7abae-144">IoT のデータは時系列データ、つまり一定の期間について見た方が意味のある、"モノ" からの値です。</span><span class="sxs-lookup"><span data-stu-id="7abae-144">IoT data is time-series data: values from “things” that can be more meaningful over a time span.</span></span> <span data-ttu-id="7abae-145">工場の機器はある時間だけ動作し、その間にイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="7abae-145">Equipment on a plant floor operates through time, and events occur during that time.</span></span> <span data-ttu-id="7abae-146">工場のデータが [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) などのデータ インジェスト サービスに送信されない場合は、そのストア (生産実行システム (MES) や HTTP エンドポイントなど) から定期的にデータをポーリングして、インジェスト サービスにデータを送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-146">If the data on the plant floor is not sent to a data ingestion service, such as [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk), we must poll for the data periodically from its store—for  example, a Manufacturing Execution System (MES), or an HTTP endpoint), and send the data to an ingestion service.</span></span>  
<span data-ttu-id="7abae-147">データからストリームへの変換は、通常、次のように行われます。</span><span class="sxs-lookup"><span data-stu-id="7abae-147">To convert data to a stream, we usually:</span></span>

1. <span data-ttu-id="7abae-148">データ ソースにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="7abae-148">Access the data source.</span></span>
2. <span data-ttu-id="7abae-149">データを変換して補強します。</span><span class="sxs-lookup"><span data-stu-id="7abae-149">Transform and enrich the data.</span></span>
3. <span data-ttu-id="7abae-150">ストリーミング データを取り込むことができるエンドポイントにデータを送信します。</span><span class="sxs-lookup"><span data-stu-id="7abae-150">Post the data to an endpoint that can ingest streaming data.</span></span>

<span data-ttu-id="7abae-151">ここでは、データ ソースへのアクセスについては詳しく説明しません。アクセスはデータが存在する場所に依存し、バリエーションが多すぎるからです。</span><span class="sxs-lookup"><span data-stu-id="7abae-151">We don’t cover the access to the data source in detail here, since access depends on where the data resides,  and the variations are too numerous.</span></span>

## <a name="transforming-and-enriching-the-data"></a><span data-ttu-id="7abae-152">データの変換と補強</span><span class="sxs-lookup"><span data-stu-id="7abae-152">Transforming and enriching the data</span></span>

<span data-ttu-id="7abae-153">通常は、生データに対して変換操作を行うことで、データを標準化し、取り込むことができる状態にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-153">Raw data must usually undergo transformation operations to standardize it and prepare it for ingestion.</span></span>  <span data-ttu-id="7abae-154">具体的な変換は、使用される分析の種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="7abae-154">The specific transformations will vary depending on the type of analytics used.</span></span>  <span data-ttu-id="7abae-155">データ変換の一般的な例としては、時系列データに欠測があって入力する必要がある場合や、異なる機械の間で時間尺度を合理化する必要がある場合などです。</span><span class="sxs-lookup"><span data-stu-id="7abae-155">Some common examples of data transformations are time-series data where measurements may be missing and need to be inputted, or where the time scales across different machines needs to be rationalized.</span></span>  <span data-ttu-id="7abae-156">望ましいデータ レコードは、タイムスタンプを含み (ソースに含まれる場合)、名前と値のペアになっていることです。</span><span class="sxs-lookup"><span data-stu-id="7abae-156">We would like to have data records that are timestamped (if the source contains it) and in name-value pairs.</span></span> <span data-ttu-id="7abae-157">一般に、データは階層形式で送られてきて、それをフラットな構造に変換する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-157">Commonly, the data comes in a hierarchical format, and must be transformed into a flat structure.</span></span>

<span data-ttu-id="7abae-158">次の図では、サイズが一定ではない階層データ構造を、標準化された列と行の形式 (ブロック) に変換しています。</span><span class="sxs-lookup"><span data-stu-id="7abae-158">The figure below shows a hierarchical data structure with a jagged profile, converted to a standardized column and row format (a block).</span></span>

![階層からフラットへのデータの整形。](assets/extracting-insights-from-iot/hierarchy-to-flat.png)

<span data-ttu-id="7abae-160">通常、データにはインターネットからはアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="7abae-160">Usually, the data is not accessible from the internet.</span></span> <span data-ttu-id="7abae-161">一般的なパターンは、エッジ ゲートウェイを使用して、工場からインジェスト ポイントにデータをプッシュすることです。</span><span class="sxs-lookup"><span data-stu-id="7abae-161">A common pattern is to use an edge gateway to push data from the plant floor to the ingestion point.</span></span> <span data-ttu-id="7abae-162">[Azure IoT Edge](https://docs.microsoft.com/azure/iot-edge?WT.mc_id=iotinsightssoln-docs-ercenk) は、IoT Hub を基にして構築されたサービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-162">[Azure IoT Edge](https://docs.microsoft.com/azure/iot-edge?WT.mc_id=iotinsightssoln-docs-ercenk) is a service that builds on top of IoT Hub.</span></span> <span data-ttu-id="7abae-163">IoT Edge デバイスは、ゲートウェイとして機能することができ、透過ゲートウェイ、プロトコル変換、ID 変換の 3 つの[パターン](https://docs.microsoft.com/azure/iot-edge/iot-edge-as-gateway?WT.mc_id=iotinsightssoln-docs-ercenk)に対応します。</span><span class="sxs-lookup"><span data-stu-id="7abae-163">An IoT Edge device can act as a gateway to cover three [patterns](https://docs.microsoft.com/azure/iot-edge/iot-edge-as-gateway?WT.mc_id=iotinsightssoln-docs-ercenk): transparent gateway, protocol translation, and identity translation.</span></span>

<span data-ttu-id="7abae-164">外部からデータを使用でき、インターネットからデータにアクセスできる場合は、複数の Azure サービスを使用して、データにアクセスし、変換して、補強することができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-164">If the data is available externally and is accessible from internet, several Azure services can be used to access, transform, and enrich the data.</span></span> <span data-ttu-id="7abae-165">次のようなオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-165">Among those options are:</span></span>

- <span data-ttu-id="7abae-166">[App Service](https://docs.microsoft.com/azure/app-service/?WT.mc_id=iotinsightssoln-docs-ercenk)、[Azure Kubernetes Service](https://docs.microsoft.com/azure/aks/?WT.mc_id=iotinsightssoln-docs-ercenk) (AKS)、[Container Instances](https://docs.microsoft.com/azure/container-instances/?WT.mc_id=iotinsightssoln-docs-ercenk)、[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview?WT.mc_id=iotinsightssoln-docs-ercenk) など、さまざまな Azure コンピューティング サービスにデプロイされたカスタム コード。</span><span class="sxs-lookup"><span data-stu-id="7abae-166">Custom code deployed in various Azure compute services, such as [App Service](https://docs.microsoft.com/azure/app-service/?WT.mc_id=iotinsightssoln-docs-ercenk),  [Azure Kubernetes Service](https://docs.microsoft.com/azure/aks/?WT.mc_id=iotinsightssoln-docs-ercenk) (AKS), [Container Instances](https://docs.microsoft.com/azure/container-instances/?WT.mc_id=iotinsightssoln-docs-ercenk), or [Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>
- [<span data-ttu-id="7abae-167">Azure Logic Apps</span><span class="sxs-lookup"><span data-stu-id="7abae-167">Azure Logic Apps</span></span>](https://docs.microsoft.com/azure/logic-apps/?WT.mc_id=iotinsightssoln-docs-ercenk)
- [<span data-ttu-id="7abae-168">Azure Data Factory のパイプラインとアクティビティ</span><span class="sxs-lookup"><span data-stu-id="7abae-168">Pipelines and activities in Azure Data Factory</span></span>](/azure/data-factory/copy-activity-overview?/WT. mc_id = iotinsightssoln-ercenk)
- [<span data-ttu-id="7abae-169">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="7abae-169">Azure Functions</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=iotinsightssoln-docs-ercenk)
- [<span data-ttu-id="7abae-170">BizTalk Services</span><span class="sxs-lookup"><span data-stu-id="7abae-170">BizTalk Services</span></span>](https://azure.microsoft.com/services/biztalk-services/)

<span data-ttu-id="7abae-171">上記の各サービスには、シナリオに応じて、それぞれに固有のベネフィットとコストがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-171">Each of the services above have their own benefits and costs, depending on the scenario.</span></span> <span data-ttu-id="7abae-172">たとえば、Logic Apps では、[XML ドキュメントを変換する](https://docs.microsoft.com/azure/logic-apps/logic-apps-enterprise-integration-transform?WT.mc_id=iotinsightssoln-docs-ercenk)ための手段が提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-172">For example, Logic Apps provide a means for [transforming XML documents](https://docs.microsoft.com/azure/logic-apps/logic-apps-enterprise-integration-transform?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="7abae-173">ただし、データは非常に複雑な XML ドキュメントになる可能性があるため、データを変換する大規模な XSLT スクリプトを開発するのは実際的でない場合があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-173">However, the data can be an overly complex XML document, so it may not be practical to develop a large XSLT script to transform the data.</span></span> <span data-ttu-id="7abae-174">そのような場合は、さまざまな Azure サービスから複数のマイクロサービスを使用してハイブリッド ソリューションを開発することがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-174">In this case, one might develop a hybrid solution using multiple microservices from different Azure services.</span></span> <span data-ttu-id="7abae-175">たとえば、Azure Logic Apps に実装されたマイクロサービスでは、HTTP エンドポイントをポーリングし、生の結果を一時的に格納して、別のマイクロサービスに通知することができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-175">For example, a microservice, implemented in Azure Logic Apps, can poll an HTTP endpoint, store the raw result temporarily, and notify another microservice.</span></span> <span data-ttu-id="7abae-176">メッセージを変換する他のマイクロサービスのカスタム コードは、[Azure Functions ホスト](https://github.com/Azure/azure-functions-host)でホストできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-176">The other microservice—which transforms the message—can be custom code hosted on [Azure Functions Host](https://github.com/Azure/azure-functions-host).</span></span>  

![Functions によってデータをポーリングされて処理される Https。](assets/extracting-insights-from-iot/poll-logic-process.png)

<span data-ttu-id="7abae-178">または、Azure Data Factory によって調整されるワークフローを使用して、一連のアクティビティで変換を実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-178">Alternatively, you may opt for a workflow orchestrated by Azure Data Factory where a sequence of activities performs the transformations.</span></span> <span data-ttu-id="7abae-179">使用できるアクティビティの種類について詳しくは、「[Azure Data Factory のパイプラインとアクティビティ](https://docs.microsoft.com/azure/data-factory/concepts-pipelines-activities)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-179">For more details on the type of activities available, see [Pipelines and activities in Azure Data Factory](https://docs.microsoft.com/azure/data-factory/concepts-pipelines-activities).</span></span>
<span data-ttu-id="7abae-180">受信時にメッセージにタイムスタンプを設定できます。または、メッセージに含まれるタイムスタンプを使用して、測定された複数の値の時系列を再構築することもできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-180">The messages can be timestamped at reception, or they may contain a timestamp to let us reconstruct the time series of several values measured.</span></span> <span data-ttu-id="7abae-181">そのため、情報の整合性と最終的な応答の適時性を保証するには、極めて小さいインジェスト待機時間と高いスループットが不可欠です。</span><span class="sxs-lookup"><span data-stu-id="7abae-181">Hence, negligible ingestion latency and high throughput are fundamental to guarantee the integrity of information and timeliness of eventual responses.</span></span> <span data-ttu-id="7abae-182">待機時間を最小限にするため、工場のできる限り近くでタイムスタンプを正規化します。</span><span class="sxs-lookup"><span data-stu-id="7abae-182">To minimize the latency, we normalize the time stamps as close as possible to the plant.</span></span>

## <a name="ingesting-the-data-stream"></a><span data-ttu-id="7abae-183">データ ストリームの取り込み</span><span class="sxs-lookup"><span data-stu-id="7abae-183">Ingesting the data stream</span></span>

<span data-ttu-id="7abae-184">データをストリームとして分析するには、時間枠に基づいてデータに対してクエリを実行し、パターンとリレーションシップを識別できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-184">To analyze the data as a stream, we can do queries on the data based on time windows to identify patterns and relationships.</span></span> <span data-ttu-id="7abae-185">Azure プラットフォームには、高スループットでデータを取り込むことができるさまざまなサービスがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-185">There are various services on the Azure platform that can ingest data at high throughput.</span></span>
<span data-ttu-id="7abae-186">以下のどのサービスを選ぶかは、デバイスの管理、プロトコルのサポート、スケーラビリティ、チームで優先されるプログラミング モデルなど、プロジェクトのニーズに依存します。たとえば、チームによっては、経験のために Kafka の使用を優先したり、ソリューションに対して Kafka ブローカーを使用することが必要であったりする場合があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-186">Choosing between the services below depends on the needs of the project, such as device management, protocol support, scalability, team’s preference of programming model etc. For example, team may have a preference to use Kafka because of their experience, or the need to have a Kafka broker for the solution.</span></span> <span data-ttu-id="7abae-187">または、別のケースでは、取り込みポイントへのデバイスのアクセスをセキュリティで保護するために、[IoT Hub Device Provisioning Service の TPM キーの構成証明](https://docs.microsoft.com/azure/iot-dps/?WT.mc_id=iotinsightssoln-docs-ercenk)をデータ インジェスト システムで利用することがプロジェクトで要求される場合があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-187">Or, for another case, the project may need the data ingestion system to take advantage of [IoT Hub Device Provisioning Service’s TPM Key Attestation](https://docs.microsoft.com/azure/iot-dps/?WT.mc_id=iotinsightssoln-docs-ercenk) to secure the access of the devices to the ingestion point.</span></span>

- <span data-ttu-id="7abae-188">[Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) は、IoT アプリケーションとデバイスの間に存在する双方向通信ハブです。</span><span class="sxs-lookup"><span data-stu-id="7abae-188">[Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) is a bi-directional communication hub between IoT applications and the devices.</span></span> <span data-ttu-id="7abae-189">セキュリティで保護された通信、メッセージのルーティング、他の Azure サービスとの統合、デバイスを制御および構成するための管理機能を提供することで、完全な機能を備えた IoT ソリューションを可能にするスケーラブルなサービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-189">It is a scalable service that enables full-featured IoT solutions by providing secure communications, message routing, integration with other Azure services, and management features to control and configure the devices.</span></span>

- <span data-ttu-id="7abae-190">[Azure Event Hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk) は、非常に高いスループット レートで同時実行ソースからテレメトリ データを収集するための高スケールのインジェスト専用サービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-190">[Azure Event Hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk) is a high-scale ingestion-only service for collecting telemetry data from concurrent sources at exceedingly high throughput rates.</span></span>
- <span data-ttu-id="7abae-191">[HDInsight での Apache Kafka](https://docs.microsoft.com/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) は、[Apache Kafka](https://kafka.apache.org/) をホストするマネージド サービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-191">[Apache Kafka on HDInsight](https://docs.microsoft.com/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) is a managed service that hosts [Apache Kafka](https://kafka.apache.org/).</span></span> <span data-ttu-id="7abae-192">Apache Kafka は、オープンソースの分散ストリーミング プラットフォームであり、メッセージ ブローカーの機能も提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-192">Apache Kafka is an open-source distributed streaming platform that also provides message broker functionality.</span></span> <span data-ttu-id="7abae-193">ホステッド サービスでは、Kafka のアップタイムに関して 99.9% のサービス レベル アグリーメント (SLA) があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-193">The hosted service has a Service Level Agreement (SLA) of 99.9% on Kafka uptime.</span></span>

## <a name="processing-and-storing-the-data"></a><span data-ttu-id="7abae-194">データの処理と格納</span><span class="sxs-lookup"><span data-stu-id="7abae-194">Processing and storing the data</span></span>

<span data-ttu-id="7abae-195">IoT アプリケーションは、イベント ドリブン システムなので、履歴データを保持して操作する必要もあるという課題をもたらします。</span><span class="sxs-lookup"><span data-stu-id="7abae-195">The IoT applications introduce challenges, as they are event-driven systems, that also need to keep and operate on historical data.</span></span> <span data-ttu-id="7abae-196">受信データは追加型のデータであり、大規模になることがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-196">The incoming data is an append type of data and can potentially grow large.</span></span> <span data-ttu-id="7abae-197">主としてアーカイブ、一括分析、機械学習 (ML) モデルの構築という理由から、長期的なデータ保持が必要になります。</span><span class="sxs-lookup"><span data-stu-id="7abae-197">There is a need to keep data for longer periods, primarily for these reasons: archive, batch analytics, and to build machine learning (ML) models.</span></span> <span data-ttu-id="7abae-198">その一方で、異常の検出、ローリング時間枠でのパターンの認識、値がしきい値を上回ったり下回ったりした場合のアラートのトリガーのために、ほぼリアルタイムで分析を行うには、イベント ストリームが不可欠です。</span><span class="sxs-lookup"><span data-stu-id="7abae-198">On the other hand, the event stream is crucial for analyzing in near real-time to detect anomalies, recognize patterns over rolling time windows, or triggering alerts, if values go over or below a threshold.</span></span>
<span data-ttu-id="7abae-199">Microsoft の Azure IoT 参照アーキテクチャでは、ラムダ アーキテクチャを使用する IoT ソリューションでのデバイスからクラウドへのメッセージとイベントに対する推奨されるデータ フローが提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-199">Microsoft’s Azure IoT Reference Architecture presents a recommended data flow for device to cloud messages and events in an IoT solution using Lambda architecture.</span></span> <span data-ttu-id="7abae-200">ラムダ アーキテクチャではほぼリアルタイムのストリーミング データとアーカイブ データ両方の分析が可能で、受信データの処理に最適なオプションです。</span><span class="sxs-lookup"><span data-stu-id="7abae-200">The Lambda architecture enables the analysis of both near real-time, streaming data, as well as archived data, which makes it the best option for processing of the incoming data.</span></span>

## <a name="lambda-architecture"></a><span data-ttu-id="7abae-201">ラムダ アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="7abae-201">Lambda architecture</span></span>

<span data-ttu-id="7abae-202">ラムダ アーキテクチャは、データ フロー用に 2 つのパスを作成することでこの問題に対処しています。</span><span class="sxs-lookup"><span data-stu-id="7abae-202">The Lambda architecture addresses this problem by creating two paths for data flow.</span></span> <span data-ttu-id="7abae-203">システムに送信されるすべてのデータは、次の 2 つのパスを経由します。</span><span class="sxs-lookup"><span data-stu-id="7abae-203">All data coming into the system goes through these two paths:</span></span>

- <span data-ttu-id="7abae-204">バッチ レイヤー (コールド パス) は、すべての受信データを未加工の形式で保存し、データに対してバッチ処理を実行します。</span><span class="sxs-lookup"><span data-stu-id="7abae-204">A batch layer (cold path) stores all the incoming data in its raw form and performs batch processing on the data.</span></span> <span data-ttu-id="7abae-205">この処理の結果は、バッチ ビューとして保存されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-205">The result of this processing is stored as a batch view.</span></span> <span data-ttu-id="7abae-206">それは複雑な分析を実行する遅い処理のパイプラインです。たとえば、複数のソースからの長期 (時間、日、それ以上) のデータを結合し、レポートや機械学習モデルとなどの新しい情報を生成するような場合です。</span><span class="sxs-lookup"><span data-stu-id="7abae-206">It is a slow processing pipeline executing complex analysis, for example combining data from multiple sources and over a longer period (hours, days, or longer), and generating new information such as reports, machine learning models, etcetera.</span></span>
- <span data-ttu-id="7abae-207">スピード レイヤー (ホット パス) では、リアルタイムでデータを分析します。</span><span class="sxs-lookup"><span data-stu-id="7abae-207">A speed layer (warm path) analyzes data in real time.</span></span> <span data-ttu-id="7abae-208">このレイヤーは、精度と引き換えに待機時間が短くなるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-208">This layer is designed for low latency, at the expense of accuracy.</span></span> <span data-ttu-id="7abae-209">受信メッセージをアーカイブして表示し、これらのレコードを分析して短期の重要な情報とアラームなどのアクションを生成する、高速処理パイプラインです。</span><span class="sxs-lookup"><span data-stu-id="7abae-209">It is a faster processing pipeline that archives and displays incoming messages, and analyzes these records generating short term critical information and actions such as alarms.</span></span>
- <span data-ttu-id="7abae-210">バッチ レイヤーは "サービス レイヤー" にフィードし、サービス レイヤーはクエリに応答します。</span><span class="sxs-lookup"><span data-stu-id="7abae-210">The batch layer feeds into a “serving layer,” which responds to queries.</span></span> <span data-ttu-id="7abae-211">バッチ レイヤーは、効率的なクエリのためにバッチ ビューにインデックスを付けます。</span><span class="sxs-lookup"><span data-stu-id="7abae-211">The batch layer indexes the batch view for efficient querying.</span></span> <span data-ttu-id="7abae-212">速度レイヤーは、最新のデータに基づく増分更新でサービス レイヤーを更新します。</span><span class="sxs-lookup"><span data-stu-id="7abae-212">The speed layer updates the serving layer with incremental updates based on the most recent data.</span></span>

<span data-ttu-id="7abae-213">次の図では、変換のステージを表す 5 つのブロックを示します。</span><span class="sxs-lookup"><span data-stu-id="7abae-213">The following image shows five blocks that represent stages of transformation.</span></span> <span data-ttu-id="7abae-214">最初のブロックはデータ ストリームであり、スピード レイヤーとバッチ レイヤーの両方に並列でフィードします。</span><span class="sxs-lookup"><span data-stu-id="7abae-214">The first block is the data stream, which feeds both the speed layer and batch layer in parallel.</span></span> <span data-ttu-id="7abae-215">どちらのレイヤーもサービス レイヤーにフィードします。スピード レイヤーとサービス レイヤーはどちらも、分析クライアントにフィードします。</span><span class="sxs-lookup"><span data-stu-id="7abae-215">Both layers feed the serving layer, The speed layer and the serving layer both feed the analytics client.</span></span>
<span data-ttu-id="7abae-216">![ラムダ アーキテクチャ。](assets/extracting-insights-from-iot/lambda-schematic.png)</span><span class="sxs-lookup"><span data-stu-id="7abae-216">![Lambda architecture.](assets/extracting-insights-from-iot/lambda-schematic.png)</span></span>

 <span data-ttu-id="7abae-217">Azure プラットフォームでは、アーキテクチャの実装に使用できるさまざまなサービスが提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-217">Azure platform provides various services that can be used for implementing the architecture.</span></span> <span data-ttu-id="7abae-218">次の図では、それらのサービスを実装のためにマップする方法を示します。</span><span class="sxs-lookup"><span data-stu-id="7abae-218">The following diagram shows how those services can be mapped to implement it.</span></span> <span data-ttu-id="7abae-219">図では、変換の 5 つのステージが示されており、各ステージに関連する Azure テクノロジが含まれます。</span><span class="sxs-lookup"><span data-stu-id="7abae-219">The figure shows the five stages of transformation, with each stage containing relevant Azure technologies.</span></span> <span data-ttu-id="7abae-220">暗色のボックスは、これらのタスクを実行するのに複数のオプションを使用できることを表します。</span><span class="sxs-lookup"><span data-stu-id="7abae-220">The darker colored boxes represent the availability of multiple options to perform those tasks.</span></span>

![ラムダ アーキテクチャ。](assets/extracting-insights-from-iot/lambda-architecture-all.png)

<span data-ttu-id="7abae-222">スピード レイヤーのデータ インジェスト サービスのオプションについては、前のセクション「データ ストリームの取り込み」で説明されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-222">The options for the data ingestion service on the speed layer are covered in the previous section, “Ingesting the data stream.”</span></span>

<span data-ttu-id="7abae-223">[HDInsight での Apache Kafka](https://docs.microsoft.com/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) は、データ インジェスト サービスとストリーム処理の両方に対するデータ ストリームを実装するサービス オプションにできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-223">[Apache Kafka on HDInsight](https://docs.microsoft.com/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) can be a service option to implement the data stream both for the data ingestion service and the stream processing.</span></span>

<span data-ttu-id="7abae-224">データ インジェスト サービスに対して Event Hubs を使用する場合は、[Azure Stream Analytics](https://docs.microsoft.com/azure/stream-analytics?WT.mc_id=iotinsightssoln-docs-ercenk) (ASA) を使用します。</span><span class="sxs-lookup"><span data-stu-id="7abae-224">Use [Azure Stream Analytics](https://docs.microsoft.com/azure/stream-analytics?WT.mc_id=iotinsightssoln-docs-ercenk) (ASA) if you are using Event Hubs for the data ingestion service.</span></span> <span data-ttu-id="7abae-225">Azure Stream Analytics は、デバイスからの大量のデータ ストリームを分析することができるイベント処理エンジンです。</span><span class="sxs-lookup"><span data-stu-id="7abae-225">Azure Stream Analytics is an event-processing engine that allows you to examine high volumes of data streaming from devices.</span></span> <span data-ttu-id="7abae-226">受信データは、デバイス、センサー、Web サイト、ソーシャル メディア フィード、アプリケーションなどから得ることができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-226">Incoming data can originate from devices, sensors, web sites, social media feeds, applications, and more.</span></span> <span data-ttu-id="7abae-227">また、データ ストリームから情報を抽出し、パターンや関係を把握することもできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-227">It also supports extracting information from data streams, identifying patterns, and relationships.</span></span>

<span data-ttu-id="7abae-228">Stream Analytics のクエリの出発点となるのは、ストリーミング データのソースです。ソースは、Azure Event Hubs や Azure IoT Hub に取り込まれるほか、Azure Blob Storage などのデータ ストアから取り込まれます。</span><span class="sxs-lookup"><span data-stu-id="7abae-228">Stream Analytics queries start with a source of streaming data that is ingested into Azure Event Hub, Azure IoT Hub or from a data store like Azure Blob Storage.</span></span> <span data-ttu-id="7abae-229">ストリームを分析するには、データのストリーム配信元の入力ソースを指定する Stream Analytics ジョブを作成します。</span><span class="sxs-lookup"><span data-stu-id="7abae-229">To examine a stream, create a Stream Analytics job that specifies the input source that streams data.</span></span> <span data-ttu-id="7abae-230">データやパターン、関係をどのように探し出すかを定義する変換クエリもこのジョブで指定します。</span><span class="sxs-lookup"><span data-stu-id="7abae-230">The job also specifies a transformation query that defines how to look for data, patterns, or relationships.</span></span> <span data-ttu-id="7abae-231">変換クエリには、SQL に似たクエリ言語が活用されます。特定の期間にわたるストリーミング データに対し、この言語を使ってフィルター処理、並べ替え、集計、結合が行われます。</span><span class="sxs-lookup"><span data-stu-id="7abae-231">The transformation query leverages a SQL-like query language that is used to filter, sort, aggregate, and join streaming data over a period of time.</span></span>

## <a name="warm-path"></a><span data-ttu-id="7abae-232">ウォーム パス</span><span class="sxs-lookup"><span data-stu-id="7abae-232">Warm Path</span></span>

<span data-ttu-id="7abae-233">このドキュメントのシナリオ例は、機械使用率 KPI (ガイドの先頭で説明済み) です。</span><span class="sxs-lookup"><span data-stu-id="7abae-233">The example scenario for this document is a machine utilization KPI (introduced at the beginning of the guide).</span></span> <span data-ttu-id="7abae-234">データを単純に解釈し、機械がデータを送信している場合は利用されていると想定します。</span><span class="sxs-lookup"><span data-stu-id="7abae-234">We could opt for a naive interpretation of the data and assume that if the machine is sending data then it is being utilized.</span></span> <span data-ttu-id="7abae-235">ただし、機械は実際には何も製造していないときでもデータを送信することがあります (たとえば、アイドル時やメンテナンス時)。</span><span class="sxs-lookup"><span data-stu-id="7abae-235">However, the machine could be sending data while not really producing anything (for example, it could be idle, or being maintained).</span></span> <span data-ttu-id="7abae-236">これは、IoT データから分析情報を抽出しようとするときの非常に一般的な課題を示します。つまり、探しているデータは、取得しているデータでは手に入りません。</span><span class="sxs-lookup"><span data-stu-id="7abae-236">This highlights a very common challenge when trying to extract insight out of IoT data: the data you are looking for is not available in the data you are getting.</span></span> <span data-ttu-id="7abae-237">そのため、この例では、機械が製造しているかどうかを明確に示すデータを取得していません。</span><span class="sxs-lookup"><span data-stu-id="7abae-237">So, in our example, we are not getting data clearly and unequivocally telling us whether or not the machine is producing.</span></span>  <span data-ttu-id="7abae-238">したがって、他のデータ ソースで取得しているデータを結合し、機械が製造しているかどうかを判断するためのルールを適用することで、使用状況を推測する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-238">Therefore, we need to infer utilization by combining the data we are getting with other sources of data, and applying rules to determine of whether or not the machine is producing.</span></span> <span data-ttu-id="7abae-239">さらに、会社によって "製造" の解釈が異なる場合があるため、ルールも変わる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-239">In addition, these rules may change from company to company since they may have different interpretations of what “producing” is.</span></span> <span data-ttu-id="7abae-240">ウォーム パスは、システムを通じたデータ フローの分析のすべてです。</span><span class="sxs-lookup"><span data-stu-id="7abae-240">The warm path is all about analyzing as the data flows through the system.</span></span> <span data-ttu-id="7abae-241">このストリームをほぼリアルタイムで処理し、ウォーム ストレージに保存して、分析クライアントにプッシュします。</span><span class="sxs-lookup"><span data-stu-id="7abae-241">We process this stream in near-real time, save it to the warm storage, and push it to the analytics clients.</span></span>

<span data-ttu-id="7abae-242">Azure Event Hubs はビッグ データ ストリーミング プラットフォームであり、毎秒数百万のイベントを受け取って処理できるイベント インジェスト サービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-242">Azure Event Hubs is a big data streaming platform and event ingestion service, capable of receiving and processing millions of events per second.</span></span> <span data-ttu-id="7abae-243">Event Hubs では、分散されたソフトウェアやデバイスから生成されるイベント、データ、またはテレメトリを処理および格納できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-243">Event Hubs can process and store events, data, or telemetry produced by distributed software and devices.</span></span> <span data-ttu-id="7abae-244">イベント ハブに送信されたデータは、任意のリアルタイム分析プロバイダーやバッチ処理/ストレージ アダプターを使用して、変換および保存できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-244">Data sent to an event hub can be transformed and stored using any real-time analytics provider or batching/storage adapters.</span></span> <span data-ttu-id="7abae-245">Event Hubs は、データ フローのウォーム パスの最初のステップに最適です。</span><span class="sxs-lookup"><span data-stu-id="7abae-245">Event Hubs makes the perfect match for the first step in the warm path for the data flow.</span></span>

<span data-ttu-id="7abae-246">次の図では、スピード レイヤーのステージを示します。</span><span class="sxs-lookup"><span data-stu-id="7abae-246">The figure below shows the speed layer stage.</span></span> <span data-ttu-id="7abae-247">イベント ハブ、Stream Analytics インスタンス、ウォーム ストレージ用のデータ ストアで構成されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-247">It consists of an event hub, a Stream Analytics instance, and a data store for warm storage.</span></span>

![ラムダ アーキテクチャ: スピード レイヤーが強調表示されている。](assets/extracting-insights-from-iot/lambda-2.png)
  
<span data-ttu-id="7abae-249">Azure プラットフォームではイベント ハブでのイベント処理用に多くのオプションが提供されていますが、Stream Analytics をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-249">The Azure platform provides many options for processing the events on an Event Hub, however, we recommend Stream Analytics.</span></span> <span data-ttu-id="7abae-250">Stream Analytics では、ストリーミングされたデータを視覚化するために Power BI サービスにデータをプッシュすることもできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-250">Stream Analytics can also push data to the Power BI service to visualize streamed data.</span></span>

<span data-ttu-id="7abae-251">Stream Analytics では、たとえばタンブリング/スライディング/ホッピング ウィンドウ、ストリーム集計、外部データ ソース結合など、大規模で複雑な分析を実行できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-251">Stream Analytics can execute complex analysis at scale, for example, tumbling/sliding/hopping windows, stream aggregations, and external data source joins.</span></span> <span data-ttu-id="7abae-252">さらに複雑な処理の場合は、次の図に示すように、複数のイベント ハブ インスタンス、Stream Analytics ジョブ、Azure 関数をカスケードしてパフォーマンスを拡張できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-252">For even more complex processing, performance can be extended by cascading multiple instances of Event Hubs, Stream Analytics jobs, and Azure functions, as shown in the following figure.</span></span>

![イベント ハブ、分析、Power BI。](assets/extracting-insights-from-iot/event-hubs-to-power-bi.png)
  
<span data-ttu-id="7abae-254">ウォーム ストレージは、Azure SQL Database など、Azure プラットフォーム上の各種サービスで実装できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-254">Warm storage can be implemented with various services on the Azure platform, such as Azure SQL Database.</span></span> <span data-ttu-id="7abae-255">お勧めは [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) です。</span><span class="sxs-lookup"><span data-stu-id="7abae-255">We recommend [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="7abae-256">それは、Microsoft のグローバル分散型マルチモデル データベースです。</span><span class="sxs-lookup"><span data-stu-id="7abae-256">It is Microsoft's globally distributed, multi-model database.</span></span> <span data-ttu-id="7abae-257">柔軟でスキーマに依存しない自動インデックス作成および高度なクエリ インターフェイスからメリットが得られるデータセットに最適です。</span><span class="sxs-lookup"><span data-stu-id="7abae-257">It is best for datasets that can benefit from flexible, schema-agnostic, automatic indexing, and rich query interfaces.</span></span> <span data-ttu-id="7abae-258">Cosmos DB は、複数リージョンと読み取り/書き込みに対応し、自動フェールオーバーに加えて手動フェールオーバーをサポートします。</span><span class="sxs-lookup"><span data-stu-id="7abae-258">Cosmos DB allows multi-region, read/write, and supports manual failover in addition to automatic failover.</span></span> <span data-ttu-id="7abae-259">さらに、Cosmos DB では、ユーザーはデータに Time to Live (TTL) を設定でき、古いデータは自動的に期限切れになります。</span><span class="sxs-lookup"><span data-stu-id="7abae-259">In addition, Cosmos DB allows the user to set a time-to-live (TTL) on their data, which makes expiring old data automatic.</span></span> <span data-ttu-id="7abae-260">レコードがデータベース内に留まる時間を制御し、したがってデータベースのサイズを制御する機能を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-260">We recommend using the feature to control the time the records stay in the database, thus controlling the database size.</span></span>

<span data-ttu-id="7abae-261">Cosmos DB の価格は、使用されたストレージとプロビジョニングされた[要求ユニット数](https://docs.microsoft.com/azure/cosmos-db/request-units)に基づきます。</span><span class="sxs-lookup"><span data-stu-id="7abae-261">Pricing for Cosmos DB is based on storage used and [request units](https://docs.microsoft.com/azure/cosmos-db/request-units) provisioned.</span></span> <span data-ttu-id="7abae-262">Cosmos DB は、大規模なデータ セットの集計が関係するクエリを必要としないシナリオに最適です。このようなクエリでは、デバイスの最後のイベントなどの基本的なクエリより多くの要求ユニットが必要になります。</span><span class="sxs-lookup"><span data-stu-id="7abae-262">Cosmos DB is best for scenarios that do not require queries involving aggregation over large sets of data, as those queries require more request units than a basic query such as the last event for a device.</span></span>  

<span data-ttu-id="7abae-263">[Microsoft Power BI](https://docs.microsoft.com/power-bi/power-bi-overview?WT.mc_id=iotinsightssoln-docs-ercenk) はソフトウェア サービス、アプリ、コネクタのコレクションであり、これらが連携して、関連のないデータ ソースを、一貫性があり視覚的に没入型で対話形式の分析情報に変換します。</span><span class="sxs-lookup"><span data-stu-id="7abae-263">[Microsoft Power BI](https://docs.microsoft.com/power-bi/power-bi-overview?WT.mc_id=iotinsightssoln-docs-ercenk) is a collection of software services, apps, and connectors that work together to turn your unrelated sources of data into coherent, visually immersive, and interactive insights.</span></span> <span data-ttu-id="7abae-264">Power BI は、重要な情報を最新の状態に維持するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="7abae-264">Power BI helps you stay up to date with the information that matters to you.</span></span> <span data-ttu-id="7abae-265">[Power BI でのリアルタイム ストリーミング](https://docs.microsoft.com/power-bi/service-real-time-streaming?WT.mc_id=iotinsightssoln-docs-ercenk)を利用して、データをサービスにプッシュできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-265">You can utilize the [real-time streaming in Power BI](https://docs.microsoft.com/power-bi/service-real-time-streaming?WT.mc_id=iotinsightssoln-docs-ercenk) to push data to the service.</span></span> <span data-ttu-id="7abae-266">このリアルタイム ストリームは、Power BI のダッシュボード上のさまざまなビジュアルに対するリアルタイム ストリーミング データ ソースとして機能できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-266">This real time stream can act as a real time streaming data source for various visuals on the Power BI dashboard.</span></span>

## <a name="cold-path"></a><span data-ttu-id="7abae-267">コールド パス</span><span class="sxs-lookup"><span data-stu-id="7abae-267">Cold Path</span></span>

<span data-ttu-id="7abae-268">ウォーム パスは、時間経過に伴うパターンを検出するためのストリーム処理が行われる場所です。</span><span class="sxs-lookup"><span data-stu-id="7abae-268">The warm path is where the stream processing occurs to discover patterns over time.</span></span> <span data-ttu-id="7abae-269">ただし、機械、ライン、プラント、製造されるパーツなど、異なるピボットと集計で、過去の期間についての使用率も計算する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-269">However we also would like to calculate the utilization over a period of time in the past, with different pivots, and aggregations, such as machine, line, plant, produced part etcetera.</span></span> <span data-ttu-id="7abae-270">これらの結果をウォーム パスの結果とマージして、ユーザーに統合されたビューを提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-270">We  want to merge those results with the warm path results to present a unified view to the user.</span></span> <span data-ttu-id="7abae-271">コールド パスには、バッチ レイヤーとサービス レイヤーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="7abae-271">The cold path includes the batch layer and the serving layers.</span></span> <span data-ttu-id="7abae-272">その組み合わせにより、システムの長期的なビューが提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-272">The combination provides a long-term view of the system.</span></span>

<span data-ttu-id="7abae-273">コールド パスには、ソリューションの長期データ ストアが含まれます。</span><span class="sxs-lookup"><span data-stu-id="7abae-273">The cold path contains the long-term data store for the solution.</span></span> <span data-ttu-id="7abae-274">また、長い期間に対する高速のクエリ応答を提供する事前に計算された集計ビューを作成するバッチ レイヤーも含まれます。</span><span class="sxs-lookup"><span data-stu-id="7abae-274">It also contains the batch layer, which creates pre-calculated aggregate views to provide fast query responses over long periods of time.</span></span> <span data-ttu-id="7abae-275">Azure プラットフォーム上のこのレイヤーで使用可能なテクノロジの選択肢は非常に多様です。</span><span class="sxs-lookup"><span data-stu-id="7abae-275">The technology options available for this layer on Azure platform is quite diverse.</span></span>

![ラムダ アーキテクチャ: バッチ レイヤーが強調表示されている。](assets/extracting-insights-from-iot/lambda-3.png)
  
<span data-ttu-id="7abae-277">[Azure Time Series Insights](https://docs.microsoft.com/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) (TSI) は、時系列データ用の分析、ストレージ、視覚化サービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-277">[Azure Time Series Insights](https://docs.microsoft.com/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) (TSI) is an analytics, storage and visualization service for time series data.</span></span> <span data-ttu-id="7abae-278">SQL に似たフィルターと集計を提供し、ユーザー定義関数の必要性を減らします。</span><span class="sxs-lookup"><span data-stu-id="7abae-278">It provides SQL-like filtering and aggregation, alleviating the need for user-defined functions.</span></span> <span data-ttu-id="7abae-279">TSI は、Event Hubs、IoT Hub、Azure Blob Storage からデータを受信できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-279">TSI can receive data from Event Hubs, IoT Hub or Azure Blob storage.</span></span> <span data-ttu-id="7abae-280">TSI のすべてのデータはメモリと SSD に格納され、対話型分析でデータを常に使用できることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-280">All data in TSI is stored in-memory and in SSDs, which ensures that the data is always ready for interactive analytics.</span></span> <span data-ttu-id="7abae-281">たとえば、数千万件のイベントに対する一般的な集計が、ミリ秒単位で返ります。</span><span class="sxs-lookup"><span data-stu-id="7abae-281">For example, a typical aggregation over tens of millions of events returns on the order of milliseconds.</span></span> <span data-ttu-id="7abae-282">また、異なる時系列のオーバーレイ、ダッシュボードの比較、アクセシビリティの高い表形式ビュー、ヒート マップなどの視覚化も提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-282">It also provides visualizations such as overlays of different time series, dashboard comparisons, accessible tabular views, and heat maps.</span></span> <span data-ttu-id="7abae-283">TSI の主な機能は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="7abae-283">Key features of TSI include:</span></span>

- <span data-ttu-id="7abae-284">データについてのレポートをすぐに必要としないソリューション用の組み込み視覚化サービス。</span><span class="sxs-lookup"><span data-stu-id="7abae-284">Built-in visualization services for solutions that do not need to report on data immediately.</span></span> <span data-ttu-id="7abae-285">TSI では、データ レコードのクエリに対して約 30 から 60 秒の待機時間があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-285">TSI has an approximate latency for querying data records of 30-60 seconds.</span></span> 
- <span data-ttu-id="7abae-286">大規模なデータ セットのクエリを実行する機能。</span><span class="sxs-lookup"><span data-stu-id="7abae-286">The ability to query large sets of data.</span></span>
- <span data-ttu-id="7abae-287">任意の数のユーザーが、追加コストなしで、無制限の数のクエリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-287">Any number of users can conduct an unlimited number of queries for no extra cost.</span></span>

<span data-ttu-id="7abae-288">TSI の最大リテンション期間は 400 日、最大ストレージ制限は 3 TB です。</span><span class="sxs-lookup"><span data-stu-id="7abae-288">TSI has a maximum retention of 400 days and a maximum storage limit of 3 TB.</span></span> <span data-ttu-id="7abae-289">さらに長いリテンション期間、またはより多くの容量が必要な場合は、コールド ストレージ データベースを使用します (必要に応じて、クエリ用にデータを TSI にスワップします)。</span><span class="sxs-lookup"><span data-stu-id="7abae-289">If you require a longer retention span, or more capacity, use a cold storage database (swapping data into TSI for querying as needed).</span></span>

<span data-ttu-id="7abae-290">IoT アプリケーション用のコールド ストレージは、必ず時間と共に増大します。</span><span class="sxs-lookup"><span data-stu-id="7abae-290">Cold storage for an IoT application is certain to grow large over time.</span></span> <span data-ttu-id="7abae-291">ここでは、データは、長期間保存され、分析のためにバッチ ビューで集計されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-291">This is where data is stored for the long term and aggregated at the batch views for analytics.</span></span> <span data-ttu-id="7abae-292">ML モデル用のデータもここに格納されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-292">Data for ML models is also stored here.</span></span> <span data-ttu-id="7abae-293">コールド ストレージには [Azure Storage](https://docs.microsoft.com/azure/storage/?WT.mc_id=iotinsightssoln-docs-ercenk) をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-293">We recommend [Azure Storage](https://docs.microsoft.com/azure/storage/?WT.mc_id=iotinsightssoln-docs-ercenk) for the cold storage.</span></span> <span data-ttu-id="7abae-294">高い可用性とセキュリティ、耐久性、スケーラビリティ、冗長性を備えたクラウド ストレージを提供する、Microsoft が管理するクラウド サービスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-294">It is a Microsoft-managed service providing cloud storage that is highly available, secure, durable, scalable, and redundant.</span></span> <span data-ttu-id="7abae-295">Azure Storage には、Azure BLOB (オブジェクト)、Azure Data Lake Storage Gen2、Azure Files、Azure キュー、Azure テーブルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="7abae-295">Azure Storage includes Azure Blobs (objects), Azure Data Lake Storage Gen2, Azure Files, Azure Queues, and Azure Tables.</span></span> <span data-ttu-id="7abae-296">コールド ストレージには、BLOB、Data Lake Storage Gen2、Azure テーブル、またはそれらの組み合わせを使用できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-296">The cold storage can be either Blobs, Data Lake Storage Gen2, or Azure Tables., or a combination of those.</span></span>

<span data-ttu-id="7abae-297">[Azure Table Storage](https://docs.microsoft.com/azure/cosmos-db/table-storage-overview?WT.mc_id=iotinsightssoln-docs-ercenk) は、NoSQL の構造化データをクラウド内に格納するサービスです。スキーマレスのデザインでキー/属性ストアを実現します。</span><span class="sxs-lookup"><span data-stu-id="7abae-297">[Azure Table storage](https://docs.microsoft.com/azure/cosmos-db/table-storage-overview?WT.mc_id=iotinsightssoln-docs-ercenk) is a service that stores structured NoSQL data in the cloud, providing a key/attribute store with a schemaless design.</span></span> <span data-ttu-id="7abae-298">Table Storage はスキーマがないため、アプリケーションの進化のニーズに合わせてデータを容易に修正できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-298">Because Table Storage is schemaless, it is easy to adapt your data as the needs of your application evolve.</span></span> <span data-ttu-id="7abae-299">Table Storage のデータ アクセスは、多くの種類のアプリケーションにとって高速でコスト効率に優れ、また一般に、従来の SQL と比較して、同様の容量のデータを低コストで保存することができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-299">Access to Table Storage data is fast and cost-effective for many types of applications and is typically lower in cost than traditional SQL for similar volumes of data.</span></span> <span data-ttu-id="7abae-300">ここでは、サンプル用に 1 つのテーブルを使用し、データ ストリームから受信するイベント用に 1 つのテーブルを使用します。</span><span class="sxs-lookup"><span data-stu-id="7abae-300">We use one table for samples, and one table for events that are received from data streams.</span></span> <span data-ttu-id="7abae-301">パーティション キーの設計は特に重要な概念です。どちらのテーブルも、イベントまたはサンプルのタイムスタンプに時間を使用します。</span><span class="sxs-lookup"><span data-stu-id="7abae-301">The design of the partition key is an especially important concept; both tables use the hour of the timestamp on the event or the sample.</span></span> <span data-ttu-id="7abae-302">詳細については、「 [Table サービス データ モデルについて](https://docs.microsoft.com/rest/api/storageservices/Understanding-the-Table-Service-Data-Model?WT.mc_id=iotinsightssoln-docs-ercenk)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7abae-302">For more information, see [Understanding the Table Service Data Model](https://docs.microsoft.com/rest/api/storageservices/Understanding-the-Table-Service-Data-Model?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="7abae-303">JSON や、IoT アプリケーションによって受信される未処理データを含む XML ドキュメントなど、膨大な量の非構造化データを格納するには、[Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction?WT.mc_id=iotinsightssoln-docs-ercenk)、[Azure Files](https://docs.microsoft.com/azure/storage/files/storage-files-introduction?WT.mc_id=iotinsightssoln-docs-ercenk)、または [Azure Data Lake Storage Gen2](https://docs.microsoft.com/azure/storage/data-lake-storage/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) が最適なオプションです。</span><span class="sxs-lookup"><span data-stu-id="7abae-303">To store massive amounts of unstructured data, such as JSON, or XML documents containing the unprocessed data received by the IoT application, [Blob storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction?WT.mc_id=iotinsightssoln-docs-ercenk), [Azure Files](https://docs.microsoft.com/azure/storage/files/storage-files-introduction?WT.mc_id=iotinsightssoln-docs-ercenk), or [Azure Data Lake Storage Gen2](https://docs.microsoft.com/azure/storage/data-lake-storage/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) are the best options.</span></span>

<span data-ttu-id="7abae-304">Azure Blob Storage には、世界中のどこからでも HTTP または HTTPS 経由で安全にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-304">Azure Blob storage can be accessed from anywhere in the world via HTTP or HTTPS securely.</span></span> <span data-ttu-id="7abae-305">Blob Storage へのアクセスは、サービスで使用されているいずれかの[承認メカニズム](https://docs.microsoft.com/azure/storage/common/storage-auth?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk)を使用して、承認される必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-305">Access to the blob storage must be authorized using one of the [authorization mechanisms](https://docs.microsoft.com/azure/storage/common/storage-auth?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk) used by the service.</span></span> <span data-ttu-id="7abae-306">サービスでは、複数のレプリケーション [オプション](https://docs.microsoft.com/azure/storage/common/storage-redundancy?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk)が提供されています (ローカル冗長、ゾーン冗長、geo 冗長、読み取りアクセス geo 冗長)。</span><span class="sxs-lookup"><span data-stu-id="7abae-306">The service provides multiple replication [options](https://docs.microsoft.com/azure/storage/common/storage-redundancy?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk): locally redundant, zone-redundant, geo-redundant and read access geo-redundant.</span></span> <span data-ttu-id="7abae-307">また、最もコスト効率のよいソリューションを可能にする 3 つの[アクセス層](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=iotinsightssoln-docs-ercenk)もあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-307">There are also three [access tiers](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=iotinsightssoln-docs-ercenk) that allows the most cost-effective solutions.</span></span>

<span data-ttu-id="7abae-308">データがコールド ストレージに格納されたら、ラムダ アーキテクチャのサービス レイヤー上にバッチ ビューを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-308">Once the data is in cold storage, batch views on the serving layer of the Lambda architecture need to be created.</span></span> <span data-ttu-id="7abae-309">[Azure Data Factory](https://docs.microsoft.com/azure/data-factory/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) は、サービス レイヤー上にバッチ ビューを作成するための優れたソリューションです。</span><span class="sxs-lookup"><span data-stu-id="7abae-309">[Azure Data Factory](https://docs.microsoft.com/azure/data-factory/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) is a great solution for creating the batch views on the serving layer.</span></span> <span data-ttu-id="7abae-310">クラウドベースのマネージド データ統合サービスを通じて、データの移動と変換を制御して自動化するデータ主導型のワークフローをクラウドに作成することができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-310">It is a cloud-based managed data integration service that allows you to create data-driven workflows in the cloud for orchestrating and automating data movement and data transformation.</span></span> <span data-ttu-id="7abae-311">Azure Data Factory を使えば、各種のデータ ストアからデータを取り込むことができる[データ主導型のワークフロー](https://docs.microsoft.com/azure/data-factory/concepts-pipelines-activities?WT.mc_id=iotinsightssoln-docs-ercenk) (パイプライン) を作成し、スケジューリングできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-311">Using Azure Data Factory, you can create and schedule [data-driven workflows](https://docs.microsoft.com/azure/data-factory/concepts-pipelines-activities?WT.mc_id=iotinsightssoln-docs-ercenk) (called pipelines) that can ingest data from disparate data stores.</span></span> <span data-ttu-id="7abae-312">[Azure HDInsight Hadoop](https://docs.microsoft.com/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk)、[Spark](https://docs.microsoft.com/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk)、[Azure Databricks](https://docs.microsoft.com/azure/azure-databricks/?WT.mc_id=iotinsightssoln-docs-ercenk) などのサービスを使用して、データを処理および変換できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-312">It can process and transform the data by using services such as [Azure HDInsight Hadoop](https://docs.microsoft.com/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk), [Spark](https://docs.microsoft.com/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk), and [Azure Databricks](https://docs.microsoft.com/azure/azure-databricks/?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="7abae-313">これにより、機械学習モデルを構築し、分析クライアントでそれを使用できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-313">This allows you to build machine learning models and consume them with the analytics clients.</span></span>

<span data-ttu-id="7abae-314">たとえば、次の図に示すように、Data Factory のパイプラインは、マスター データ ストアからデータを読み取ります。</span><span class="sxs-lookup"><span data-stu-id="7abae-314">For example, as shown in the following figure, Data Factory pipelines read data from the master data store.</span></span> <span data-ttu-id="7abae-315">1 つのパイプラインで、データを要約して集計し、Azure Data Warehouse のインスタンスを設定します。</span><span class="sxs-lookup"><span data-stu-id="7abae-315">One pipeline summarizes and aggregates the data to populate an instance of Azure Data Warehouse.</span></span> <span data-ttu-id="7abae-316">また、Data Factory のパイプラインには、ML モデルの構築に使用される [Azure Databricks ノートブック アクティビティ](https://docs.microsoft.com/azure/data-factory/transform-data-using-databricks-notebook?WT.mc_id=iotinsightssoln-docs-ercenk)も含まれます。</span><span class="sxs-lookup"><span data-stu-id="7abae-316">The Data Factory pipeline also and contains [Azure Databricks notebook activities](https://docs.microsoft.com/azure/data-factory/transform-data-using-databricks-notebook?WT.mc_id=iotinsightssoln-docs-ercenk) that are used to build ML models.</span></span>

![ラムダ アーキテクチャ: バッチ レイヤーが強調表示されている。](assets/extracting-insights-from-iot/master-data-to-ml-analytics.png)
  
<span data-ttu-id="7abae-318">[Azure SQL Database](https://docs.microsoft.com/azure/sql-database/?WT.mc_id=iotinsightssoln-docs-ercenk) または [Azure SQL Data Warehouse](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is?WT.mc_id=iotinsightssoln-docs-ercenk) は、バッチ ビューをホストするのに最適なオプションです。</span><span class="sxs-lookup"><span data-stu-id="7abae-318">[Azure SQL Database](https://docs.microsoft.com/azure/sql-database/?WT.mc_id=iotinsightssoln-docs-ercenk) or [Azure SQL Data Warehouse](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is?WT.mc_id=iotinsightssoln-docs-ercenk) are the best options for hosting the batch views.</span></span> <span data-ttu-id="7abae-319">これらのサービスでは、マスター データについて事前計算され、集計されたビューが提供できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-319">These services can serve pre-calculated and aggregated views on the master data.</span></span> 

<span data-ttu-id="7abae-320">Azure SQL Database (SQL DB) は、Microsoft SQL Server データベース エンジンの最新バージョンに基づく、サービスとしてのリレーショナル データベースです。</span><span class="sxs-lookup"><span data-stu-id="7abae-320">Azure SQL Database (SQL DB) is a relational database-as-a-service based on the latest version of Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="7abae-321">SQL DB は、データドリブンのアプリケーションや Web サイトの構築に使用できる、高パフォーマンスで信頼性が高くセキュリティで保護されたデータベースです。</span><span class="sxs-lookup"><span data-stu-id="7abae-321">SQL DB is a high-performance, reliable, and secure database you can use to build data-driven applications and websites.</span></span> <span data-ttu-id="7abae-322">Azure サービスなので、インフラストラクチャを管理する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="7abae-322">As an Azure service,  there is no need to manage its infrastructure.</span></span> <span data-ttu-id="7abae-323">データ量が増加すると、ソリューションはクエリの高速化のためにデータを集計して格納する手法の使用を開始できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-323">As the data volume increases, the solution can start using techniques to aggregate and store data for speeding up the queries.</span></span> <span data-ttu-id="7abae-324">事前計算集計は、よく知られている手法です (特に追加専用データについて)。</span><span class="sxs-lookup"><span data-stu-id="7abae-324">Pre-calculating aggregations is a well-known technique, especially for append-only data.</span></span> <span data-ttu-id="7abae-325">コスト管理にも役に立ちます。</span><span class="sxs-lookup"><span data-stu-id="7abae-325">It is also useful for managing costs.</span></span>

<span data-ttu-id="7abae-326">Azure SQL Data Warehouse では、一部のシナリオで役に立つ多くの追加機能が提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-326">Azure SQL Data Warehouse provides many additional features that can be useful in some scenarios.</span></span> <span data-ttu-id="7abae-327">超並列処理を利用して、ペタバイト単位のデータに対して複雑なクエリを短時間で実行するクラウドベースのエンタープライズ データ ウェアハウスです。</span><span class="sxs-lookup"><span data-stu-id="7abae-327">It is a cloud-based enterprise data warehouse that leverages massively parallel processing  to quickly run complex queries across petabytes of data.</span></span> <span data-ttu-id="7abae-328">ペタバイト規模のデータを保持し、クエリを高速で実行したい場合は、SQL Data Warehouse をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-328">If you need to keep petabytes of data, and want to have queries running fast, we recommend SQL Data Warehouse.</span></span>

## <a name="visualizing-the-data"></a><span data-ttu-id="7abae-329">データの視覚化</span><span class="sxs-lookup"><span data-stu-id="7abae-329">Visualizing the data</span></span>

<span data-ttu-id="7abae-330">このレイヤーでは、2 つのデータ パイプライン (ウォーム パスとコールド パス) をマージして、データの集約されたビューを提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-330">At this layer, we want to merge the two data pipelines (warm and cold paths) to present a cohesive view of the data.</span></span> <span data-ttu-id="7abae-331">この例では、複数のメトリックを使用して、ウォームとコールド両方のパスで機械の使用率を推定しました。</span><span class="sxs-lookup"><span data-stu-id="7abae-331">In this example, we used multiple metrics to deduce the utilization of the machine on both warm and cold paths.</span></span> <span data-ttu-id="7abae-332">分析ステージでは、これらのパスからのデータを結合する視覚エフェクトを提供します。</span><span class="sxs-lookup"><span data-stu-id="7abae-332">In the analytics stage, we provide visualizations that combine the data from those paths.</span></span>

![ラムダ アーキテクチャ: 分析クライアント レイヤーが強調表示されている。](assets/extracting-insights-from-iot/lambda-4.png)

<span data-ttu-id="7abae-334">[Microsoft Power BI](https://docs.microsoft.com/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk) と [Azure Time Series Insights](https://docs.microsoft.com/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) では、すぐに使用できるデータ視覚化が提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-334">[Microsoft Power BI](https://docs.microsoft.com/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk) and [Azure Time Series Insights](https://docs.microsoft.com/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) provide data visualizations out-of-the-box.</span></span> <span data-ttu-id="7abae-335">Power BI はビジネス分析ソリューションであり、データを視覚化して、組織全体で分析情報を共有したり、アプリや Web サイトに埋め込んだりすることができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-335">Power BI is business analytics solution that lets you visualize your data and share insights across your organization, or embed them in your app or website.</span></span> <span data-ttu-id="7abae-336">[Power BI Desktop](https://powerbi.microsoft.com/desktop/?WT.mc_id=iotinsightssoln-docs-ercenk) は、レポートとその基になるデータ ソースをモデル化するための、強力な無料ツールです。</span><span class="sxs-lookup"><span data-stu-id="7abae-336">[Power BI Desktop](https://powerbi.microsoft.com/desktop/?WT.mc_id=iotinsightssoln-docs-ercenk) is a free and powerful tool for modelling reports and their underlying data sources.</span></span>  <span data-ttu-id="7abae-337">Power BI の視覚エフェクトを埋め込むアプリケーションでは、デスクトップ ツールによって作成され、Power BI サービス上でホストされているレポートを使用します。</span><span class="sxs-lookup"><span data-stu-id="7abae-337">The applications embedding Power BI visualizations use the reports authored by the desktop tool and hosted on the Power BI Service.</span></span>

<span data-ttu-id="7abae-338">Time Series Insights は、データの視覚化とクエリを行うためのデータ エクスプローラーと、REST Query API を備えています。</span><span class="sxs-lookup"><span data-stu-id="7abae-338">Time Series Insights has a data explorer to visualize and query data as well as REST query APIs.</span></span> <span data-ttu-id="7abae-339">さらに、TSI を利用したグラフをカスタム アプリケーションに埋め込むことができる、JavaScript コントロール ライブラリが公開されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-339">Further, it exposes a JavaScript controls library that lets you embed TSI-powered charts into custom applications.</span></span> <span data-ttu-id="7abae-340">次に示すのは、観察されたサンプルの数を単に調べることで、作業現場での機械の使用率を近似する着信データに対する、TSI での基本的なヒートマップ ビューです。</span><span class="sxs-lookup"><span data-stu-id="7abae-340">The following is a basic heatmap view on the TSI for the incoming data that approximates the utilization of the machines on the shop floor, by simply looking at the number of samples observed.</span></span>

![ラムダ アーキテクチャ: バッチ レイヤーが強調表示されている。](assets/extracting-insights-from-iot/client-screen.png)

<span data-ttu-id="7abae-342">複数のソースからデータを集約するブラウザー ベースのユーザー インターフェイスが必要な場合は、TSI と Power BI サービスのどちらでも視覚化コントロールを埋め込むことができます。</span><span class="sxs-lookup"><span data-stu-id="7abae-342">If you require a browser-based user interface that aggregates data from multiple sources, both TSI and Power BI services allow embedding visualization controls.</span></span> <span data-ttu-id="7abae-343">また、どちらでも、広範なカスタマイズが可能な REST API ([Power BI Rest API](https://docs.microsoft.com/rest/api/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk)、[TSI REST API](https://docs.microsoft.com/rest/api/time-series-insights/time-series-insights-reference-queryapi?WT.mc_id=iotinsightssoln-docs-ercenk)) と JavaScript SDK ([Power BI JavaScript SDK](https://github.com/Microsoft/PowerBI-JavaScript?WT.mc_id=iotinsightssoln-docs-ercenk)、[TSI JavaScript SDK](https://docs.microsoft.com/azure/time-series-insights/tutorial-explore-js-client-lib?WT.mc_id=iotinsightssoln-docs-ercenk)) が提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-343">Both also provide REST APIs ([Power BI Rest API](https://docs.microsoft.com/rest/api/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk), [TSI REST API](https://docs.microsoft.com/rest/api/time-series-insights/time-series-insights-reference-queryapi?WT.mc_id=iotinsightssoln-docs-ercenk)) and JavaScript SDKs ([Power BI JavaScript SDK](https://github.com/Microsoft/PowerBI-JavaScript?WT.mc_id=iotinsightssoln-docs-ercenk), [TSI JavaScript SDK](https://docs.microsoft.com/azure/time-series-insights/tutorial-explore-js-client-lib?WT.mc_id=iotinsightssoln-docs-ercenk)) that allows extensive customizations.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7abae-344">次の手順</span><span class="sxs-lookup"><span data-stu-id="7abae-344">Next Steps</span></span>

<span data-ttu-id="7abae-345">多くの概念について説明し、詳細を学習して独自の要件に手法を適用するための一連の出発点を読者に提供しました。</span><span class="sxs-lookup"><span data-stu-id="7abae-345">We covered a lot of concepts and would like to give the reader a set of starting points to learn more and apply the techniques to their own requirements.</span></span> <span data-ttu-id="7abae-346">この目的に役立つと思われるいくつかのチュートリアルを次に示します。</span><span class="sxs-lookup"><span data-stu-id="7abae-346">Here are some tutorials we believe can be useful for this purpose.</span></span>

- <span data-ttu-id="7abae-347">データからストリームへの変換</span><span class="sxs-lookup"><span data-stu-id="7abae-347">Converting the data to a stream</span></span>
  - [<span data-ttu-id="7abae-348">スケジュールに従って実行されるロジック アプリの作成</span><span class="sxs-lookup"><span data-stu-id="7abae-348">Creating a Logic App running on a schedule</span></span>](https://docs.microsoft.com/azure/logic-apps/tutorial-build-schedule-recurring-logic-app-workflow?WT.mc_id=iotinsightssoln-docs-ercenk)
  - [<span data-ttu-id="7abae-349">Logic Apps でのデータ操作のためのコード例</span><span class="sxs-lookup"><span data-stu-id="7abae-349">Code examples for data operations on Logic Apps</span></span>](https://docs.microsoft.com/azure/logic-apps/logic-apps-data-operations-code-samples?WT.mc_id=iotinsightssoln-docs-ercenk)
  - <span data-ttu-id="7abae-350">Azure 関数をホストするための[コンテナーでの Azure Functions の実行](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=iotinsightssoln-docs-ercenk)については、複数の場所で説明されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-350">[Running Azure Functions in a container](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=iotinsightssoln-docs-ercenk) to host your Azure Function is covered in multiple places.</span></span> <span data-ttu-id="7abae-351">カスタム イメージを使用した Linux での関数の作成、任意のプラットフォームでの関数の実行、Azure Functions Runtime 用の Docker イメージ</span><span class="sxs-lookup"><span data-stu-id="7abae-351">Creating a function on Linux using a custom image, running functions on any platform, Docker images for Azure Functions Runtime</span></span>
  - [<span data-ttu-id="7abae-352">Azure Functions でさまざまなバインドを使用する</span><span class="sxs-lookup"><span data-stu-id="7abae-352">Using various bindings on Azure Functions</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=iotinsightssoln-docs-ercenk)

- <span data-ttu-id="7abae-353">ホット パス</span><span class="sxs-lookup"><span data-stu-id="7abae-353">Hot path</span></span>
  - <span data-ttu-id="7abae-354">Event Hubs、Azure Stream Analytics、Power BI の使用方法を示すエンド ツー エンド チュートリアル。</span><span class="sxs-lookup"><span data-stu-id="7abae-354">End-to-end tutorials demonstrating the use of Event Hubs, Azure Stream Analytics and Power BI.</span></span> <span data-ttu-id="7abae-355">手順については、「[チュートリアル: Azure Event Hubs に送信されたリアルタイム イベントのデータの異常を視覚化する](https://docs.microsoft.com/azure/event-hubs/event-hubs-tutorial-visualize-anomalies?WT.mc_id=iotinsightssoln-docs-ercenk)」と、[Stream Analytics ジョブを作成して通話データを分析し、結果を Power BI ダッシュボードで視覚化する](https://docs.microsoft.com/azure/stream-analytics/stream-analytics-manage-job?WT.mc_id=iotinsightssoln-docs-ercenk)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-355">See [Tutorial: Visualize data anomalies](https://docs.microsoft.com/azure/event-hubs/event-hubs-tutorial-visualize-anomalies?WT.mc_id=iotinsightssoln-docs-ercenk) in real-time events sent to Azure Event Hubs, and [Create a Stream Analytics job to analyze phone call data](https://docs.microsoft.com/azure/stream-analytics/stream-analytics-manage-job?WT.mc_id=iotinsightssoln-docs-ercenk) and visualize results in a Power BI dashboard.</span></span>
  <span data-ttu-id="7abae-356">-[.NET での Azure Cosmos DB の使用](https://docs.microsoft.com/azure/cosmos-db/sql-api-get-started?WT.mc_id=iotinsightssoln-docs-ercenk)</span><span class="sxs-lookup"><span data-stu-id="7abae-356">-[Using Azure Cosmos DB with .NET](https://docs.microsoft.com/azure/cosmos-db/sql-api-get-started?WT.mc_id=iotinsightssoln-docs-ercenk)</span></span>
- <span data-ttu-id="7abae-357">コールド パス</span><span class="sxs-lookup"><span data-stu-id="7abae-357">Cold path</span></span>
  - <span data-ttu-id="7abae-358">Azure Data Factory で [Spark アクティビティを使用してクラウドのデータを変換する](https://docs.microsoft.com/azure/data-factory/tutorial-transform-data-spark-portal?WT.mc_id=iotinsightssoln-docs-ercenk)</span><span class="sxs-lookup"><span data-stu-id="7abae-358">[Transforming data in the cloud by using a Spark activity](https://docs.microsoft.com/azure/data-factory/tutorial-transform-data-spark-portal?WT.mc_id=iotinsightssoln-docs-ercenk) in Azure Data Factory</span></span>
  - [<span data-ttu-id="7abae-359">チュートリアル:Azure Time Series Insights 環境を作成する</span><span class="sxs-lookup"><span data-stu-id="7abae-359">Tutorial: Create an Azure Time Series Insights environment</span></span>](/azure/time-series-insights/tutorial-create-populate-tsi-environment?WT.mc_id=iotinsightssoln-docs-ercenk)
- <span data-ttu-id="7abae-360">分析クライアント</span><span class="sxs-lookup"><span data-stu-id="7abae-360">Analysis clients</span></span>
  - [<span data-ttu-id="7abae-361">Power BI について</span><span class="sxs-lookup"><span data-stu-id="7abae-361">Learning Power BI</span></span>](https://docs.microsoft.com/power-bi/guided-learning/?WT.mc_id=iotinsightssoln-docs-ercenk)
  - [<span data-ttu-id="7abae-362">Time Series Insights SPA を作成する</span><span class="sxs-lookup"><span data-stu-id="7abae-362">Creating a Time Series Insights SPA</span></span>](https://docs.microsoft.com/azure/time-series-insights/tutorial-create-tsi-sample-spa?WT.mc_id=iotinsightssoln-docs-ercenk)
  - [<span data-ttu-id="7abae-363">Time Series Insights Java Script クライアント ライブラリを調べる</span><span class="sxs-lookup"><span data-stu-id="7abae-363">Exploring Time Series Insights Java Script client library</span></span>](https://docs.microsoft.com/azure/time-series-insights/tutorial-explore-js-client-lib?WT.mc_id=iotinsightssoln-docs-ercenk)
  - <span data-ttu-id="7abae-364">[TSI のデモ](https://insights.timeseries.azure.com/demo)および [Power BI のデモ](https://microsoft.github.io/PowerBI-JavaScript/demo/v2-demo/index.html)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-364">See the [TSI demo](https://insights.timeseries.azure.com/demo) and [Power BI demo](https://microsoft.github.io/PowerBI-JavaScript/demo/v2-demo/index.html).</span></span>

## <a name="appendix-pillars-of-software-quality-posq"></a><span data-ttu-id="7abae-365">付録:ソフトウェア品質の重要な要素 (PoSQ)</span><span class="sxs-lookup"><span data-stu-id="7abae-365">Appendix: Pillars of software quality (PoSQ)</span></span>

<span data-ttu-id="7abae-366">成功するクラウド アプリケーションは、これらの[ソフトウェア品質の重要な要素](https://docs.microsoft.com/azure/architecture/guide/pillars?WT.mc_id=iotinsightssoln-docs-ercenk)に基づいて構築されています。拡張性、可用性、回復性、管理性、セキュリティに重点が置かれています。</span><span class="sxs-lookup"><span data-stu-id="7abae-366">A successful cloud application is built on these [pillars of software quality](https://docs.microsoft.com/azure/architecture/guide/pillars?WT.mc_id=iotinsightssoln-docs-ercenk): Scalability, availability, resiliency, management, and security.</span></span> <span data-ttu-id="7abae-367">ここでは、必要に応じて、コンポーネントごとにこれらの要素について簡単に説明します。</span><span class="sxs-lookup"><span data-stu-id="7abae-367">In this section, we will briefly cover those pillars for each component as necessary.</span></span> <span data-ttu-id="7abae-368">可用性、回復性、管理性、および DevOps については説明しません。これらは主として実装レベルで対応されており、ここでは Azure プラットフォームが API、ツール、診断、ログによってこれらを実現するための広範な手段を提供していることを説明したいためです。</span><span class="sxs-lookup"><span data-stu-id="7abae-368">We don’t cover availability, resiliency, management and DevOps, since they are mostly addressed at the implementation level, and we want to mention Azure platform provides extensive means for achieving those through APIs, tools, diagnostics and logging.</span></span> <span data-ttu-id="7abae-369">上記の要素に加えて、コスト効率についても説明します。</span><span class="sxs-lookup"><span data-stu-id="7abae-369">In addition to the mentioned pillars, we will also mention cost efficiency.</span></span>

<span data-ttu-id="7abae-370">以下の要素について簡単に確認しておきます。</span><span class="sxs-lookup"><span data-stu-id="7abae-370">Let’s quickly review those pillars:</span></span>

- <span data-ttu-id="7abae-371">**拡張性**は、増加した負荷を処理する、システムの能力です。</span><span class="sxs-lookup"><span data-stu-id="7abae-371">**Scalability** is the ability of a system to handle increased load.</span></span> <span data-ttu-id="7abae-372">アプリケーションをスケーリングする方法は、主に 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-372">There are two main ways that an application can scale.</span></span> <span data-ttu-id="7abae-373">垂直スケーリング (スケールアップ) は、VM のサイズを大きくするなど、リソースの容量を増やすことです。</span><span class="sxs-lookup"><span data-stu-id="7abae-373">Vertical scaling (scaling up) means increasing the capacity of a resource, for example by using a larger VM size.</span></span> <span data-ttu-id="7abae-374">水平スケーリング (スケールアウト) とは、VM やデータベース レプリカなど、リソースの新しいインスタンスを追加することです。</span><span class="sxs-lookup"><span data-stu-id="7abae-374">Horizontal scaling (scaling out) is adding new instances of a resource, such as VMs or database replicas.</span></span> <span data-ttu-id="7abae-375">拡張性要素には、パフォーマンスと負荷処理機能も含まれています。</span><span class="sxs-lookup"><span data-stu-id="7abae-375">The scalability pillar also includes performance and the ability to handle load.</span></span>
- <span data-ttu-id="7abae-376">**可用性**とは、システムが動作し実際に使用可能である時間の割合です。</span><span class="sxs-lookup"><span data-stu-id="7abae-376">**Availability** is the proportion of time that the system is functional and working.</span></span> <span data-ttu-id="7abae-377">通常は、アップタイムの割合として測定されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-377">It is usually measured as a percentage of uptime.</span></span> <span data-ttu-id="7abae-378">アプリケーション エラー、インフラストラクチャの問題、システムの負荷はすべて、可用性を低下させる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-378">Application errors, infrastructure problems, and system load can all reduce availability.</span></span> <span data-ttu-id="7abae-379">Microsoft Azure サービスのサービス レベル アグリーメントについては、「[サービス レベル アグリーメント](https://azure.microsoft.com/support/legal/sla/?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-379">The service level agreements for Microsoft Azure services are published and available at [Service Level Agreements](https://azure.microsoft.com/support/legal/sla/?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="7abae-380">可用性は、システム レベルでのみ意味のあるメトリックです。</span><span class="sxs-lookup"><span data-stu-id="7abae-380">Availability is the only meaningful metric at the system level.</span></span> <span data-ttu-id="7abae-381">個別のコンポーネントが、システムの全体的な可用性に寄与します。</span><span class="sxs-lookup"><span data-stu-id="7abae-381">Separate components contribute to the overall availability of the system.</span></span>
- <span data-ttu-id="7abae-382">**回復性**とは、障害から回復して動作を続行する、システムの能力です。</span><span class="sxs-lookup"><span data-stu-id="7abae-382">**Resiliency** is the ability of the system to recover from failures and continue to function.</span></span> <span data-ttu-id="7abae-383">回復性の目的は、障害の発生後にアプリケーションを十分に機能する状態に戻すことです。</span><span class="sxs-lookup"><span data-stu-id="7abae-383">The goal of resiliency is to return the application to a fully functioning state after a failure occurs.</span></span> <span data-ttu-id="7abae-384">回復性は、可用性に密接に関連しています。</span><span class="sxs-lookup"><span data-stu-id="7abae-384">Resiliency is closely related to availability.</span></span>
- <span data-ttu-id="7abae-385">**管理性と DevOps**。</span><span class="sxs-lookup"><span data-stu-id="7abae-385">**Management and DevOps**.</span></span> <span data-ttu-id="7abae-386">この要素は、運用環境においてアプリケーションの稼働を維持する運用プロセスを対象とするものです。</span><span class="sxs-lookup"><span data-stu-id="7abae-386">This pillar covers the operations processes that keep an application running in production.</span></span> <span data-ttu-id="7abae-387">デプロイは、信頼性が高く、予測可能である必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-387">Deployments must be reliable and predictable.</span></span> <span data-ttu-id="7abae-388">人的ミスの可能性を下げるために、自動化されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-388">They should be automated to reduce the chance of human error.</span></span> <span data-ttu-id="7abae-389">迅速かつ定期的なプロセスであるべきで、新機能やバグ修正のリリースを遅らせることはありません。</span><span class="sxs-lookup"><span data-stu-id="7abae-389">They should be a fast and routine process, so they do not slow down the release of new features or bug fixes.</span></span> <span data-ttu-id="7abae-390">同じくらい重要なのは、　更新プログラムに問題がある場合に、ご自分で迅速にロールバックまたはロールフォワードできる必要があるということです。</span><span class="sxs-lookup"><span data-stu-id="7abae-390">Equally important, you must be able to quickly roll back or roll forward if an update has problems.</span></span>
- <span data-ttu-id="7abae-391">設計と実装から、デプロイと運用まで、ソリューションのライフ サイクル全体を通して、**セキュリティ**を主要な対象にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-391">**Security** should be a major focus point throughout the entire lifecycle of a solution, from design and implementation to deployment and operations.</span></span> <span data-ttu-id="7abae-392">ID 管理、インフラストラクチャの保護、アプリケーションのセキュリティ、承認、データの主権と暗号化、監査はすべて、対処する必要がある広範な領域です。</span><span class="sxs-lookup"><span data-stu-id="7abae-392">Identity management, protecting your infrastructure, application security, authorization, data sovereignty and encryption, auditing are all broad areas that need to be addressed.</span></span>

## <a name="posq-converting-the-data-to-a-stream"></a><span data-ttu-id="7abae-393">PoSQ:データからストリームへの変換</span><span class="sxs-lookup"><span data-stu-id="7abae-393">PoSQ: Converting the data to a stream</span></span>

<span data-ttu-id="7abae-394">**スケーラビリティ**:スケーラビリティには、2 つの観点からアプローチできます。</span><span class="sxs-lookup"><span data-stu-id="7abae-394">**Scalability**: We can approach the scalability from two perspectives.</span></span> <span data-ttu-id="7abae-395">1 つ目はコンポーネントの観点で、2 つ目はソース データを提供するシステムの観点です。</span><span class="sxs-lookup"><span data-stu-id="7abae-395">First, from the perspective of the component, second, from the perspective of the system that provides the source data.</span></span>

<span data-ttu-id="7abae-396">各 Azure サービスでは、垂直スケーリングと水平スケーリングのオプションが提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-396">Each Azure service provides options for vertical and horizontal scaling.</span></span> <span data-ttu-id="7abae-397">ソリューションの設計時に、拡張性の要件を検討することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-397">We strongly recommend considering the scalability requirements while designing the solution.</span></span>

<span data-ttu-id="7abae-398">ソース データを提供するシステムの場合、あまり頻繁にクエリを実行することにより、システムが過負荷になって、基本的にシステムに対するサービス拒否 (DoS) 攻撃にならないように、十分注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-398">As for the systems providing the source data, we need to be careful about not to overwhelm the system, and basically causing a denial of service (DoS) attack on the system, by querying it too frequently.</span></span> <span data-ttu-id="7abae-399">システムをポーリングする場合は、ポーリング頻度の調整に 2 つの影響があることに留意する必要があります。つまり、データの粒度 (クエリの頻度を高くするほど、リアルタイムに近くなります) と、リモート システムにかかる負荷です。</span><span class="sxs-lookup"><span data-stu-id="7abae-399">If you are polling the system, you should keep in mind that adjusting the polling frequency has two effects, the granularity of the data (the more often you query, the closer it gets to real-time) and the load created on the remote system.</span></span>

<span data-ttu-id="7abae-400">**セキュリティ**: 対称キーまたは非対称キーを使用してリモート システムにアクセスする場合、シークレットを [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/?WT.mc_id=iotinsightssoln-docs-ercenk) で保持することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-400">**Security**: If the remote system is accessed by symmetrical or asymmetrical keys, we recommend the secrets to be kept in [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

## <a name="posq-warm-path"></a><span data-ttu-id="7abae-401">PoSQ:ウォーム パス</span><span class="sxs-lookup"><span data-stu-id="7abae-401">PoSQ: Warm path</span></span>

<span data-ttu-id="7abae-402">**スケーラビリティ**:インジェスト サブシステムで Azure Event Hubs を使用する場合、メインのスケーラビリティ メカニズムは[スループット ユニット](https://docs.microsoft.com/azure/event-hubs/event-hubs-features#throughput-units?WT.mc_id=iotinsightssoln-docs-ercenk)です。</span><span class="sxs-lookup"><span data-stu-id="7abae-402">**Scalability**: If Azure Event Hubs is the used in the ingestion subsystem, the main scalability mechanism is [throughput units](https://docs.microsoft.com/azure/event-hubs/event-hubs-features#throughput-units?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="7abae-403">Event Hubs では、スループット ユニットを静的に設定する機能、または[自動インフレ機能](https://docs.microsoft.com/azure/event-hubs/event-hubs-auto-inflate?WT.mc_id=iotinsightssoln-docs-ercenk)によって設定する機能が提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-403">Event Hubs provide the capability of setting the throughput units statically, or through the [auto-inflate feature](https://docs.microsoft.com/azure/event-hubs/event-hubs-auto-inflate?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="7abae-404">Stream Analytics の[ストリーミング ユニット](https://docs.microsoft.com/azure/stream-analytics/stream-analytics-streaming-unit-consumption?WT.mc_id=iotinsightssoln-docs-ercenk) (SU) とは、ジョブを実行するために割り当てられる計算リソースのことです。</span><span class="sxs-lookup"><span data-stu-id="7abae-404">[Streaming Units](https://docs.microsoft.com/azure/stream-analytics/stream-analytics-streaming-unit-consumption?WT.mc_id=iotinsightssoln-docs-ercenk) (SUs) in Stream Analytics represent the computing resources that are allocated to execute a job.</span></span> <span data-ttu-id="7abae-405">SU 数が大きいほど、多くの CPU とメモリ リソースがジョブ用に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="7abae-405">The higher the number of SUs, the more CPU and memory resources are allocated for your job.</span></span> <span data-ttu-id="7abae-406">この能力により、クエリ ロジックに集中することができ、Stream Analytics ジョブがタイミングよく実行されるようハードウェアを管理する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="7abae-406">This capacity lets you focus on the query logic and abstracts the need to manage the hardware to run your Stream Analytics job in a timely manner.</span></span> <span data-ttu-id="7abae-407">SU だけでなく、[クエリを適切に並列化する](https://docs.microsoft.com/azure/stream-analytics/stream-analytics-scale-jobs?WT.mc_id=iotinsightssoln-docs-ercenk)ことで効率的に使用することが非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="7abae-407">In addition to SUs, making efficient use of them through [properly parallelizing the queries](https://docs.microsoft.com/azure/stream-analytics/stream-analytics-scale-jobs?WT.mc_id=iotinsightssoln-docs-ercenk) is crucial.</span></span>

<span data-ttu-id="7abae-408">Azure Cosmos DB の実装は、適切なスループット パラメーターと適切なパーティション分割設計でプロビジョニングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7abae-408">Azure Cosmos DB implementations need to be provisioned with the right throughput parameters and proper partitioning design.</span></span> <span data-ttu-id="7abae-409">スループットのプロビジョニングは、コンテナー レベルまたはデータベース レベルで利用できます。詳しくは、[要求ユニット](https://docs.microsoft.com/azure/cosmos-db/request-units?WT.mc_id=iotinsightssoln-docs-ercenk) (RU) に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-409">Provisioning the throughput is available at the container or the data base level, and expressed in [Request Units](https://docs.microsoft.com/azure/cosmos-db/request-units?WT.mc_id=iotinsightssoln-docs-ercenk) (RUs).</span></span> <span data-ttu-id="7abae-410">Cosmos DB では、RU を見積もるためのツールが提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-410">Cosmos DB provides a tool for estimating the RUs.</span></span> <span data-ttu-id="7abae-411">スループットをプロビジョニングするだけでなく、[データベースを効率的にパーティション分割する](https://docs.microsoft.com/azure/cosmos-db/partition-data?WT.mc_id=iotinsightssoln-docs-ercenk)ことが重要です。</span><span class="sxs-lookup"><span data-stu-id="7abae-411">In addition to provisioning the throughput, [efficiently partitioning the database](https://docs.microsoft.com/azure/cosmos-db/partition-data?WT.mc_id=iotinsightssoln-docs-ercenk) is key.</span></span>

<span data-ttu-id="7abae-412">**セキュリティ**: クライアントによる Azure Event Hubs へのアクセスでは、Shared Access Signature (SAS) トークンとイベント パブリッシャーの組み合わせがクライアント認証に使用されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-412">**Security**: Access to Azure Event Hubs by clients is through a combination of Shared Access Signature (SAS) tokens and event publishers for client authentication.</span></span> <span data-ttu-id="7abae-413">バックエンド アプリケーションのセキュリティは、Service Bus のトピックと同じ概念に従います。</span><span class="sxs-lookup"><span data-stu-id="7abae-413">The security for back-end applications follow the same concepts as the Service Bus topics.</span></span> <span data-ttu-id="7abae-414">Event Hubs のセキュリティ モデルについて詳しくは、「[Event Hubs の認証とセキュリティ モデルの概要](https://docs.microsoft.com/azure/event-hubs/event-hubs-authentication-and-security-model-overview?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-414">A thorough description of the Event Hubs security model is in the [Event Hubs authentication and security model overview](https://docs.microsoft.com/azure/event-hubs/event-hubs-authentication-and-security-model-overview?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="7abae-415">Cosmos DB データベースのセキュリティ保護では、データに対する制御されたアクセスと、保存時の暗号化が提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-415">Securing the Cosmos DB databases provides controlled access to the data, and encryption at rest.</span></span> <span data-ttu-id="7abae-416">詳しくは、「[Azure Cosmos DB データベースのセキュリティ](https://docs.microsoft.com/azure/cosmos-db/database-security?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-416">For more information, see [Azure Cosmos DB database security](https://docs.microsoft.com/azure/cosmos-db/database-security?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="7abae-417">**コスト効率**:Event Hubs の価格は、SKU (Standard または Premium)、受信したイベントの数 (百万単位)、およびスループット ユニットの関数です。</span><span class="sxs-lookup"><span data-stu-id="7abae-417">**Cost Efficiency**: The pricing of Event Hubs is a function of the SKU (standard or premium), and the millions of events received, plus throughput units.</span></span> <span data-ttu-id="7abae-418">最適な組み合わせは、受信メッセージによって決定されるデータ取り込み率を調べることによって実現できます。</span><span class="sxs-lookup"><span data-stu-id="7abae-418">The optimum combination can be achieved by looking at the data ingest rate that is dictated by the incoming messages.</span></span>

<span data-ttu-id="7abae-419">Cosmos DB を使用するときは、RU の使用率によってストアの最適な使用を観察することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-419">When using Cosmos DB, we recommend observing the most optimum use of the store through the RU utilization.</span></span> <span data-ttu-id="7abae-420">Cosmos DB には、データ保持を制御するための機能もあります。前に説明したように、この機能を使用してレコードがデータベースに留まっている時間を制御し、それによってデータベースのサイズを制御することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-420">Cosmos DB also has a feature for controlling data retention, as we stated earlier, we recommend using the feature to control the time the records stay in the database, thus controlling the database size.</span></span>

## <a name="posq-cold-path"></a><span data-ttu-id="7abae-421">PoSQ:コールド パス</span><span class="sxs-lookup"><span data-stu-id="7abae-421">PoSQ: Cold path</span></span>

<span data-ttu-id="7abae-422">**スケーラビリティ**:Azure Time Series Insights (TSI) は、"容量" という名前のメトリックによってスケーリングされます。これは、SKU に関連するイングレス レート、ストレージ容量、コストに適用される乗数です。</span><span class="sxs-lookup"><span data-stu-id="7abae-422">**Scalability**: Azure Time Series Insights (TSI) is scaled with a metric named as “capacity” which is a multiplier applied to the ingress rate, storage capacity and the cost associated with the SKU.</span></span> 

<span data-ttu-id="7abae-423">Azure Time Series Insights には複数の SKU があり、やはり垂直スケーリングに直接影響します。</span><span class="sxs-lookup"><span data-stu-id="7abae-423">Azure Time Series Insights has multiple SKUs that also have direct effect on its vertical scale.</span></span> <span data-ttu-id="7abae-424">スケーリングについて詳しくは、「[Azure Time Series Insights 環境の計画](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-environment-planning?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-424">See the document [Plan your Azure Time Series Insights environment](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-environment-planning?WT.mc_id=iotinsightssoln-docs-ercenk) for details on scale.</span></span> <span data-ttu-id="7abae-425">他の多くの Azure サービスと同じように、TSI も "迷惑な隣人" 問題を回避するための調整の対象になります。</span><span class="sxs-lookup"><span data-stu-id="7abae-425">Like many other Azure services, TSI is also subject to throttling to avoid the “noisy neighbor” problem.</span></span> <span data-ttu-id="7abae-426">迷惑な隣人は、リソースを独占して他のユーザーを困らせる共有環境上 https://docs.microsoft.com/azure/sql-database/sql-database-service-tiers-vcore?WT.mc_id=iotinsightssoln-docs-ercenk のアプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="7abae-426">A noisy neighbor is an application on a shared environment https://docs.microsoft.com/azure/sql-database/sql-database-service-tiers-vcore?WT.mc_id=iotinsightssoln-docs-ercenk that monopolizes the resources and starves the other users.</span></span> <span data-ttu-id="7abae-427">調整の管理については、[TSI のドキュメント](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-environment-mitigate-latency?WT.mc_id=iotinsightssoln-docs-ercenk)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-427">Please see the [TSI documentation](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-environment-mitigate-latency?WT.mc_id=iotinsightssoln-docs-ercenk) for managing the throttling.</span></span> 

<span data-ttu-id="7abae-428">ストレージ アカウントの拡張性ターゲットについては、「[Azure Storage のスケーラビリティおよびパフォーマンスのターゲット](https://docs.microsoft.com/azure/storage/common/storage-scalability-targets?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-428">Scalability targets of storage accounts are documented in [Azure Storage Scalability and Performance Targets](https://docs.microsoft.com/azure/storage/common/storage-scalability-targets?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="7abae-429">1 つのストレージ アカウントの容量を超えてデータを格納するための一般的な手法は、複数のストレージ アカウント間でのパーティション分割です。</span><span class="sxs-lookup"><span data-stu-id="7abae-429">A common technique for storing data beyond the capacity of a single storage account is partitioning across multiple storage accounts.</span></span>

<span data-ttu-id="7abae-430">Azure SQL Database には、購入モデル ([DTU ベース](https://docs.microsoft.com/azure/sql-database/sql-database-service-tiers-dtu?WT.mc_id=iotinsightssoln-docs-ercenk)と仮想コア ベース) に応じて垂直と水平両方の拡張性を管理するための多くのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-430">Azure SQL Database has many options to manage scalability, both vertically and horizontally, depending on the purchasing model ([DTU based](https://docs.microsoft.com/azure/sql-database/sql-database-service-tiers-dtu?WT.mc_id=iotinsightssoln-docs-ercenk) and vCore based).</span></span> <span data-ttu-id="7abae-431">[SQL Database のドキュメント](https://docs.microsoft.com/azure/sql-database/sql-database-scale-resources?WT.mc_id=iotinsightssoln-docs-ercenk)を使用して将来のソリューションに対する最適なオプションをさらに調査することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7abae-431">We recommend further research to find the best option for a future solution using the [SQL Database documentation](https://docs.microsoft.com/azure/sql-database/sql-database-scale-resources?WT.mc_id=iotinsightssoln-docs-ercenk) on the topic.</span></span>

<span data-ttu-id="7abae-432">**セキュリティ**: TSI 環境では、管理アクセスとデータ アクセスに対して個別に[アクセス ポリシー](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-data-access?WT.mc_id=iotinsightssoln-docs-ercenk)が提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-432">**Security**: TSI environments provide [access policies](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-data-access?WT.mc_id=iotinsightssoln-docs-ercenk) for management access and data access independent of each other.</span></span> <span data-ttu-id="7abae-433">定義されているデータ ソース以外に、TSI 環境にデータを直接追加する方法はありません。</span><span class="sxs-lookup"><span data-stu-id="7abae-433">There is no direct way to add data to a TSI environment other than the defined data sources.</span></span> <span data-ttu-id="7abae-434">管理アクセス ポリシーでは、環境の構成に関連したアクセス許可が付与されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-434">Management access policies grant permissions related to the configuration of the environment.</span></span> <span data-ttu-id="7abae-435">データ アクセス ポリシーは、データ クエリの発行、環境内での参照データの操作、環境に関連付けられた保存クエリとパースペクティブの共有を実行するためのアクセス許可を付与します。</span><span class="sxs-lookup"><span data-stu-id="7abae-435">Data access policies grant permissions to issue data queries, manipulate reference data in the environment, and share saved queries and perspectives associated with the environment.</span></span>

<span data-ttu-id="7abae-436">Azure Data Factory サービスでは、マネージド ストアまたは Azure Key Vault で、データ ストアの資格情報を保護する複数の方法が提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-436">Azure Data Factory service provides multiple methods for securing data store credentials, either in its managed store, or in Azure Key Vault.</span></span> <span data-ttu-id="7abae-437">転送中のデータの暗号化は、データ ストアのトランスポート (HTTPS、TLS など) に依存します。</span><span class="sxs-lookup"><span data-stu-id="7abae-437">In-transit data encryption depends on the data store’s transport (e.g. HTTPS or TLS).</span></span> <span data-ttu-id="7abae-438">保存時のデータの暗号化は、データ ストアにも依存します。</span><span class="sxs-lookup"><span data-stu-id="7abae-438">At-rest data encryption also depends on the data stores.</span></span> <span data-ttu-id="7abae-439">詳しくは、「[Azure Data Factory におけるデータ移動のセキュリティに関する考慮事項](https://docs.microsoft.com/azure/data-factory/data-movement-security-considerations?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-439">See [Security considerations for data movement in Azure Data Factory](https://docs.microsoft.com/azure/data-factory/data-movement-security-considerations?WT.mc_id=iotinsightssoln-docs-ercenk) for further details.</span></span>

<span data-ttu-id="7abae-440">SQL Database では、データ アクセス、監視と監査、および保存時のデータの暗号化に関する広範なセキュリティ機能のセットが提供されています。</span><span class="sxs-lookup"><span data-stu-id="7abae-440">SQL Database provides an extensive set of security features for data access, monitoring and auditing as well as encrypting data at rest.</span></span> <span data-ttu-id="7abae-441">詳しくは、「[SQL Server Database エンジンと Azure SQL Database のセキュリティ センター](https://docs.microsoft.com/sql/relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database?WT.mc_id=iotinsightssoln-docs-ercenk)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="7abae-441">For details, see [Security Center for SQL Server Database Engine and Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="7abae-442">**コスト効率**:すべての分析ソリューションの中心にあるのはストレージです。</span><span class="sxs-lookup"><span data-stu-id="7abae-442">**Cost Efficiency**: At the heart of any analytics solution is the storage.</span></span> <span data-ttu-id="7abae-443">分析エンジンでは、大量のデータを妥当な時間で処理するための速度、効率、セキュリティ、およびスループットが必要です。</span><span class="sxs-lookup"><span data-stu-id="7abae-443">Analytics engines need speed, efficiency, security, and throughput for processing volumes of data in reasonable times.</span></span> <span data-ttu-id="7abae-444">データの集計と要約により基盤プラットフォームを最適に使用するメカニズムの考案と、ポリグロットなストアの効率的な使用が、コストを効率的に管理するための手段です。</span><span class="sxs-lookup"><span data-stu-id="7abae-444">Devising mechanisms to make best of use of the underlying platform, by aggregating and summarizing data, and efficiently using polyglot stores are the means for efficiently managing costs.</span></span> <span data-ttu-id="7abae-445">Azure はクラウド プラットフォームなので、プログラムで使用停止、使用再開、リソース サイズ変更を行うメソッドがあります。</span><span class="sxs-lookup"><span data-stu-id="7abae-445">As Azure is a cloud platform, there are methods to programmatically decommission, recommission, and resize resources.</span></span> <span data-ttu-id="7abae-446">たとえば、[作成または更新操作](https://docs.microsoft.com/rest/api/sql/databases/createorupdate?WT.mc_id=iotinsightssoln-docs-ercenk)では、Azure SQL Database のデータベースのサイズを変更する方法が提供されます。</span><span class="sxs-lookup"><span data-stu-id="7abae-446">For example, the [Create or Update operation](https://docs.microsoft.com/rest/api/sql/databases/createorupdate?WT.mc_id=iotinsightssoln-docs-ercenk) provides a way to change the database size of Azure SQL Database.</span></span>