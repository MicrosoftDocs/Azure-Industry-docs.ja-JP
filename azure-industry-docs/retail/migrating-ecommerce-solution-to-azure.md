---
title: eコマース ソリューションの Azure への移行の概要
author: scseely
ms.author: scseely, mazoroto
ms.date: 07/16/2018
ms.topic: article
ms.service: industry
description: この記事では、オンプレミスから Azure に eコマース インフラストラクチャを移行する各フェーズについて説明します。
ms.openlocfilehash: 847950673475f7f59a0c8c8c8bfc821414b2cc77
ms.sourcegitcommit: 76f2862adbec59311b5888e043a120f89dc862af
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2018
ms.locfileid: "51654269"
---
# <a name="migrating-your-e-commerce-solution-to-azure-overview"></a><span data-ttu-id="f2801-103">eコマース ソリューションの Azure への移行の概要</span><span class="sxs-lookup"><span data-stu-id="f2801-103">Migrating your e-commerce solution to Azure overview</span></span>

## <a name="introduction"></a><span data-ttu-id="f2801-104">はじめに</span><span class="sxs-lookup"><span data-stu-id="f2801-104">Introduction</span></span>

<span data-ttu-id="f2801-105">企業にとって、既存の eコマース ソリューションをクラウドに移行することには多くのメリットがあります。これにより、スケーラビリティが実現され、24 時間 365 日のアクセシビリティを顧客に提供することができ、クラウド サービスの統合が容易になります。</span><span class="sxs-lookup"><span data-stu-id="f2801-105">Moving an existing e-commerce solution to the cloud presents many benefits for an enterprise: it enables scalability, it offers customers 24/7 accessibility, and it becomes easier to integrate cloud services.</span></span> <span data-ttu-id="f2801-106">しかし、eコマース ソリューションをクラウドに移行する作業は大掛かりなものとなり、コストについても意志決定者の理解を得る必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-106">But first, to move an e-commerce solution to the cloud is a significant task, with costs that must be understood by a decision maker.</span></span> <span data-ttu-id="f2801-107">このドキュメントでは、オプションを提示することを目的に Azure の移行の範囲について説明します。</span><span class="sxs-lookup"><span data-stu-id="f2801-107">This document explains the scope of an Azure migration with the goal of informing you of the options.</span></span> <span data-ttu-id="f2801-108">最初のフェーズは、IT 部門によるコンポーネントのクラウドへの移行から始まります。</span><span class="sxs-lookup"><span data-stu-id="f2801-108">The first phase begins with IT Pros moving the components to the cloud.</span></span> <span data-ttu-id="f2801-109">Azure に移行した後は、eコマース チームが ROI を向上させ、クラウドを活用するために実行できる手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="f2801-109">Once on Azure, we describe the steps the e-commerce team can take to increase ROI and take advantage of the cloud.</span></span>

<span data-ttu-id="f2801-110">**重大な決定を下すべきとき**</span><span class="sxs-lookup"><span data-stu-id="f2801-110">**At the crossroads**</span></span>

<span data-ttu-id="f2801-111">グローバルな eコマース取引が小売売上高の総額に占める割合はごくわずかに過ぎませんが、その販売経路は年々着実に成長を続けています。</span><span class="sxs-lookup"><span data-stu-id="f2801-111">Although global e-commerce transactions account for only a fraction of total retail sales, the channel continues to see steady year-over-year growth.</span></span> <span data-ttu-id="f2801-112">2017 年には、小売売上高の総額に占める eコマースの売上は 10.2% で、2016 年の 8.6% から増加しました ([出典](https://www.emarketer.com/Report/Worldwide-Retail-Ecommerce-Sales-eMarketers-Updated-Forecast-New-Mcommerce-Estimates-20162021/2002182))。</span><span class="sxs-lookup"><span data-stu-id="f2801-112">In 2017, e-commerce constituted 10.2% of total retail sales, up from 8.6% in 2016 ( [source](https://www.emarketer.com/Report/Worldwide-Retail-Ecommerce-Sales-eMarketers-Updated-Forecast-New-Mcommerce-Estimates-20162021/2002182)).</span></span> <span data-ttu-id="f2801-113">クラウド コンピューティングの登場と共に、eコマースが成熟してくるにつれ、小売業者は岐路に立たされています。</span><span class="sxs-lookup"><span data-stu-id="f2801-113">As e-commerce has matured, along with the advent of cloud computing, retailers are at a crossroads.</span></span>  <span data-ttu-id="f2801-114">選択しなければなりません。</span><span class="sxs-lookup"><span data-stu-id="f2801-114">There are choices to make.</span></span> <span data-ttu-id="f2801-115">進化し続けるテクノロジによってもたらされる新機能を用いたビジネス モデルを構想することも、既存システムのモダナイゼーションを計画することもできます。</span><span class="sxs-lookup"><span data-stu-id="f2801-115">They can envision their business model with new capabilities made possible by evolving technology; and they can plan their modernization given their current capability footprint.</span></span>

<span data-ttu-id="f2801-116">**カスタマー ジャーニーを向上させる**</span><span class="sxs-lookup"><span data-stu-id="f2801-116">**Improving the customer journey**</span></span>

<span data-ttu-id="f2801-117">カスタマー ジャーニーに主に的を絞った eコマースには、さまざまな属性があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-117">E-commerce, which is primarily focused on the customer journey, has many different attributes.</span></span> <span data-ttu-id="f2801-118">これらの属性は、発見、評価、購入、購入後という 4 つの主な領域に分類できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-118">These attributes can be grouped into four main areas: discovery, evaluation, purchase and post-purchase.</span></span>

<span data-ttu-id="f2801-119">顧客の行動は、データとして取り込まれます。</span><span class="sxs-lookup"><span data-stu-id="f2801-119">The customer behavior is captured as data.</span></span> <span data-ttu-id="f2801-120">ショッピング ファネルは、製品データ、トランザクション、インベントリ、配送、受注処理、顧客プロファイル、ショッピング カート、製品のおすすめなどを表示するために使用するアプリケーションへのコネクション ポイントをまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="f2801-120">And the shopping funnel is a collection of connection points to applications used for viewing product data, transactions, inventory, shipping, order fulfillment, customer profile, shopping cart, and product recommendations to name a few.</span></span>

<span data-ttu-id="f2801-121">一般的なリテール ビジネスでは、顧客向けのアプリケーションから基盤となるアプリケーションまでソフトウェア ソリューションの大きなコレクションに依存します。</span><span class="sxs-lookup"><span data-stu-id="f2801-121">A typical retail business relies on a large collection of software solutions that range from customer-facing applications down through the stack to foundational applications.</span></span>  <span data-ttu-id="f2801-122">次の図は、一般的なリテール ビジネスに存在する機能を絵で表しています。</span><span class="sxs-lookup"><span data-stu-id="f2801-122">The following drawing shows a view of the functionality present in a typical retail business.</span></span>

 ![](./assets/migrating-ecommerce-solution-to-azure/ecommerce-system-sketch.png)

<span data-ttu-id="f2801-123">クラウドは、組織がテクノロジを獲得し、使用し、管理する方法を一変させるチャンスを与えてくれます。</span><span class="sxs-lookup"><span data-stu-id="f2801-123">The cloud presents an opportunity to shift how an organization obtains, uses and manages technology.</span></span>  <span data-ttu-id="f2801-124">データ センターの維持にかかるコストの削減、信頼性やパフォーマンスの向上、サービスを後から追加できる柔軟性の実現など、その他にもメリットがあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-124">Other benefits include: reduced costs of maintaining data centers, improved reliability and performance, and the flexibility to add other services.</span></span> <span data-ttu-id="f2801-125">このユース ケースでは、リテール ビジネスが既存のインフラストラクチャを Azure に移行するために選択できるフローに注目します。</span><span class="sxs-lookup"><span data-stu-id="f2801-125">In this use case, we look at a path a retail business can take to migrate its existing infrastructure to Azure.</span></span> <span data-ttu-id="f2801-126">また、リホスト、リファクター、リビルドといった段階的なアプローチを使用して、新しい環境を活用していきます。</span><span class="sxs-lookup"><span data-stu-id="f2801-126">We also take advantage of the new environment using a phased approach of rehost, refactor and rebuild.</span></span> <span data-ttu-id="f2801-127">多くの組織がこの一連のフローに従ってモダナイゼーションを行うかもしれませんが、ほとんどの場合、開始点としていずれかのフェーズに落ち着きます。</span><span class="sxs-lookup"><span data-stu-id="f2801-127">While many organizations may follow this series path to modernization, in most cases, organizations can drop into any phase as their stating point.</span></span>  <span data-ttu-id="f2801-128">現在のアプリケーションを Azure にリホストすることを断念し、直接リファクターまたはリビルドから開始することを選択するかもしれません。</span><span class="sxs-lookup"><span data-stu-id="f2801-128">Organizations may choose to forgo rehosting their current application on Azure, and jump straight to refactor or even rebuild.</span></span>  <span data-ttu-id="f2801-129">この決定は、組織のモダナイゼーションの必要を最適な形で満たすために、アプリケーション、そして組織によってそれぞれ異なったものとなります。</span><span class="sxs-lookup"><span data-stu-id="f2801-129">This decision will be unique to the application, and organization to best meet their modernization needs.</span></span>

## <a name="rehost"></a><span data-ttu-id="f2801-130">リホスト</span><span class="sxs-lookup"><span data-stu-id="f2801-130">Rehost</span></span>

<span data-ttu-id="f2801-131">&quot;リフト アンド シフト&quot; とも呼ばれますが、この段階では、物理サーバーと VM をクラウドにそのまま移行します。</span><span class="sxs-lookup"><span data-stu-id="f2801-131">Also referred to as &quot;lift and shift,&quot; this stage entails migrating physical servers and VMs as-is to the cloud.</span></span> <span data-ttu-id="f2801-132">現在のサーバー環境を IaaS に直接移行することによって、コスト削減、セキュリティや信頼性の向上といったメリットが得られます。</span><span class="sxs-lookup"><span data-stu-id="f2801-132">By simply shifting your current server environment straight to IaaS, you reap the benefits of cost savings, security, and increased reliability.</span></span> <span data-ttu-id="f2801-133">サイズを適切に設定した VM でワークロードを実行するといった手法によって、コストを削減できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-133">The savings come from techniques like running workloads on properly sized VMs.</span></span> <span data-ttu-id="f2801-134">今日、オンプレミスの VM や物理マシンの性能が、小売業者が通常の業務で必要とする性能を超えているということが多々見受けられます。</span><span class="sxs-lookup"><span data-stu-id="f2801-134">Today, the capabilities of on-premises VMs and physical machines frequently exceed the day-to-day needs of retailers.</span></span> <span data-ttu-id="f2801-135">VM は、1 年に数回だけ発生する季節的なビジネス ピークに対応できるように備えておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-135">The VMs must be able to handle seasonal business peaks that occur only a few times a year.</span></span> <span data-ttu-id="f2801-136">その結果、オフピーク シーズン中には使用しない性能のためにも支払っていることになります。</span><span class="sxs-lookup"><span data-stu-id="f2801-136">Therefore you are paying for unused capabilities during the off-peak season.</span></span> <span data-ttu-id="f2801-137">Azure では、その時点のビジネス サイクルの需要に基づいて、適切なサイズの VM を選択します。</span><span class="sxs-lookup"><span data-stu-id="f2801-137">With Azure, you pick the right sized VM based on demands for the current business cycle.</span></span>

<span data-ttu-id="f2801-138">Azure にリホストするための 3 つのフェーズがあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-138">To rehost in Azure, there are three phases:</span></span>

- <span data-ttu-id="f2801-139">**分析**: アプリケーション、ワークロード、ネットワーク、セキュリティなどのオンプレミス リソースを識別し、一覧を作成します。</span><span class="sxs-lookup"><span data-stu-id="f2801-139">**Analysis** : Identify and inventory on-premises resources like applications, workloads, networking, and security.</span></span> <span data-ttu-id="f2801-140">このフェーズの終わりには、既存システムの完全なドキュメントが作成されています。</span><span class="sxs-lookup"><span data-stu-id="f2801-140">At the end of this phase, you have complete documentation of the existing system.</span></span>
- <span data-ttu-id="f2801-141">**移行**: 各サブシステムをオンプレミスから Azure に移行します。</span><span class="sxs-lookup"><span data-stu-id="f2801-141">**Migration** : Move each subsystem from on-premises to Azure.</span></span> <span data-ttu-id="f2801-142">この段階では、アプリケーションの通信を継続しながら、Azure をデータ センターの拡張機能として使用します。</span><span class="sxs-lookup"><span data-stu-id="f2801-142">During this stage, you will use Azure as an extension of your data center with the applications continuing to communicate.</span></span>
- <span data-ttu-id="f2801-143">**最適化**: システムを Azure に移行する際、適切にサイズが設定されるようにします。</span><span class="sxs-lookup"><span data-stu-id="f2801-143">**Optimization** : As systems move into Azure, make sure that things are sized properly.</span></span> <span data-ttu-id="f2801-144">一部の VM に割り当てられているリソースが多過ぎることが判明した場合、VM のタイプを CPU、メモリ、ローカル ストレージが適切に組み合わされたものに変更します。</span><span class="sxs-lookup"><span data-stu-id="f2801-144">If the environment shows that too many resources are allocated to some VMs, change the VM type to one that has a more appropriate combination of CPU, memory, and local storage.</span></span>

### <a name="analyze"></a><span data-ttu-id="f2801-145">分析</span><span class="sxs-lookup"><span data-stu-id="f2801-145">Analyze</span></span>

<span data-ttu-id="f2801-146">以下の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="f2801-146">Do the following:</span></span>

1. <span data-ttu-id="f2801-147">オンプレミスのサーバーとアプリケーションのリストを作成します。</span><span class="sxs-lookup"><span data-stu-id="f2801-147">List the on-premises servers and applications.</span></span> <span data-ttu-id="f2801-148">その際、エージェントまたは管理ツールを使用して、サーバー、そのサーバーで実行されているアプリケーション、現在のサーバー使用率、サーバーとアプリケーションの構成方法に関するメタデータを収集します。</span><span class="sxs-lookup"><span data-stu-id="f2801-148">This relies upon an agent or management tool to gather metadata about the servers, the applications running on the servers, the current server usage, and how the servers and their applications are configured.</span></span> <span data-ttu-id="f2801-149">結果として、環境内のすべてのサーバーとアプリケーションのレポートが生成されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-149">This result is a report of all the servers and applications in the environment.</span></span>
1. <span data-ttu-id="f2801-150">依存関係を識別します。</span><span class="sxs-lookup"><span data-stu-id="f2801-150">Identify the dependencies.</span></span> <span data-ttu-id="f2801-151">ツールを使用して、相互に通信しているサーバーおよび相互に通信しているアプリケーションを識別します。</span><span class="sxs-lookup"><span data-stu-id="f2801-151">You can use tooling to identify which servers talk to each other, and applications that communicate to each other.</span></span> <span data-ttu-id="f2801-152">結果として、すべてのアプリケーションとワークロードのマップが生成されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-152">The result is a map—or maps—of all applications and workloads.</span></span> <span data-ttu-id="f2801-153">これらのマップは、移行計画に送られ使用されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-153">These maps feed into migration planning.</span></span>
1. <span data-ttu-id="f2801-154">構成を分析します。</span><span class="sxs-lookup"><span data-stu-id="f2801-154">Analyze the configurations.</span></span> <span data-ttu-id="f2801-155">目標は、Azure で実行するのに必要な VM のタイプを把握することです。</span><span class="sxs-lookup"><span data-stu-id="f2801-155">The goal is to know what VM types you need once running in Azure.</span></span> <span data-ttu-id="f2801-156">結果として、Azure に移行できるすべてのアプリケーションのレポートが生成されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-156">The result is a report on all applications that can move to Azure.</span></span> <span data-ttu-id="f2801-157">これらは、さらに以下のように分類できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-157">They can be further classified as having:</span></span>
      1. <span data-ttu-id="f2801-158">変更なし</span><span class="sxs-lookup"><span data-stu-id="f2801-158">No modifications</span></span>
      1. <span data-ttu-id="f2801-159">名前の変更など基本的な変更</span><span class="sxs-lookup"><span data-stu-id="f2801-159">Basic modifications such as naming changes</span></span>
      1. <span data-ttu-id="f2801-160">わずかなコードの変更など小規模な変更</span><span class="sxs-lookup"><span data-stu-id="f2801-160">Minor modifications, such as a slight code changes</span></span>
      1. <span data-ttu-id="f2801-161">移行に余分な作業を必要とする互換性のないワークロード</span><span class="sxs-lookup"><span data-stu-id="f2801-161">Incompatible workloads which require extra effort to move</span></span>
1. <span data-ttu-id="f2801-162">予算を作成します。</span><span class="sxs-lookup"><span data-stu-id="f2801-162">Create your budget.</span></span> <span data-ttu-id="f2801-163">CPU やメモリなどをそれぞれ列挙したリストと各アプリケーションの要件は既に作成されています。</span><span class="sxs-lookup"><span data-stu-id="f2801-163">You now have a list that enumerates each CPU—memory, and so on—and the requirements for each application.</span></span> <span data-ttu-id="f2801-164">これらのワークロードを適切なサイズで設定された VM に配置します。</span><span class="sxs-lookup"><span data-stu-id="f2801-164">Place those workloads on properly sized VMs.</span></span> <span data-ttu-id="f2801-165">クラウド プラットフォームでは、使用量に基づいて請求されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-165">Cloud platforms bill costs based on usage.</span></span> <span data-ttu-id="f2801-166">お客様のニーズを適切なサイズに設定された Azure VM にマップするツールがあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-166">Tooling exists to map your needs to the right sized Azure VMs.</span></span> <span data-ttu-id="f2801-167">Windows VM または SQL Server を移行している場合、Azure での費用を削減する [Azure ハイブリッド特典](https://azure.microsoft.com/pricing/hybrid-benefit/?WT.mc_id=retailecomm-docs-scseely)についても調べる必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-167">If you are migrating Windows VMs or SQL Server, you should also look at the [Azure Hybrid Benefit](https://azure.microsoft.com/pricing/hybrid-benefit/?WT.mc_id=retailecomm-docs-scseely) which reduces your expenses on Azure.</span></span>

<span data-ttu-id="f2801-168">Microsoft では、システムを分析し、カタログするための複数のツールを提供しています。</span><span class="sxs-lookup"><span data-stu-id="f2801-168">Microsoft provides several tools to analyze and catalog your systems.</span></span> <span data-ttu-id="f2801-169">VMWare を実行している場合、検出と評価をサポートする [Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) を使用できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-169">If you run VMWare, you can use [Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) to assist with discovery and assessment.</span></span> <span data-ttu-id="f2801-170">このツールは、Azure に移動できるマシンを識別し、実行する VM のタイプを提案し、ワークロードのコストを見積もります。</span><span class="sxs-lookup"><span data-stu-id="f2801-170">The tool identifies machines that can be moved to Azure, recommends the type of VM to run, and estimates the cost of the workload.</span></span> <span data-ttu-id="f2801-171">Hyper-V 環境では、[Azure Site Recovery Deployment Planner](/azure/site-recovery/hyper-v-deployment-planner-overview?WT.mc_id=retailecomm-docs-scseely) を使用します。</span><span class="sxs-lookup"><span data-stu-id="f2801-171">For Hyper-V environments use [Azure Site Recovery Deployment Planner](/azure/site-recovery/hyper-v-deployment-planner-overview?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="f2801-172">数百もの VM を移動する必要がある大規模な移行では、[Azure 移行パートナー](https://azure.microsoft.com/migration/partners/?WT.mc_id=retailecomm-docs-scseely)を利用することも検討できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-172">For large migrations where you need to move hundreds or more VMs, you may want to work with an [Azure migration partner](https://azure.microsoft.com/migration/partners/?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="f2801-173">これらのパートナーは、ワークロードを移行するための専門知識と経験を有しています。</span><span class="sxs-lookup"><span data-stu-id="f2801-173">These partners have the expertise and experience to move your workloads.</span></span>

### <a name="migrate"></a><span data-ttu-id="f2801-174">移行</span><span class="sxs-lookup"><span data-stu-id="f2801-174">Migrate</span></span>

<span data-ttu-id="f2801-175">どのサービスをクラウドに移行するか、どのような順序で移行するかについて計画を開始します。</span><span class="sxs-lookup"><span data-stu-id="f2801-175">Begin planning which services to move to the cloud and in what order.</span></span> <span data-ttu-id="f2801-176">この段階でワークロードの移行も行うため、次の順序で実行します。</span><span class="sxs-lookup"><span data-stu-id="f2801-176">Because this stage involves moving workloads, follow this order:</span></span>

1. <span data-ttu-id="f2801-177">ネットワークを構築する。</span><span class="sxs-lookup"><span data-stu-id="f2801-177">Build out the network.</span></span>
2. <span data-ttu-id="f2801-178">ID システム (Azure Active Directory) を組み込む。</span><span class="sxs-lookup"><span data-stu-id="f2801-178">Incorporate an identity system (Azure Active Directory).</span></span>
3. <span data-ttu-id="f2801-179">Azure でのストレージ部分をプロビジョニングする。</span><span class="sxs-lookup"><span data-stu-id="f2801-179">Provision storage pieces in Azure.</span></span>

<span data-ttu-id="f2801-180">移行中、Azure 環境はオンプレミス ネットワークの拡張機能となります。</span><span class="sxs-lookup"><span data-stu-id="f2801-180">During migration, the Azure environment is an extension of your on-premises network.</span></span> <span data-ttu-id="f2801-181">論理ネットワークと [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely) を接続できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-181">You can connect the logical networks with [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="f2801-182">[Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) を使用することで、インターネットに接続したことのないプライベート接続で、ネットワークと Azure 間の通信を維持することもできます。</span><span class="sxs-lookup"><span data-stu-id="f2801-182">You can choose to use [Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) to keep communications between your network and Azure on a private connection that never touches the Internet.</span></span> <span data-ttu-id="f2801-183">Azure VPN Gateway がオンプレミス VPN デバイスと通信するサイト間 VPN を使用することもできます。この方法では、すべてのトラフィックが Azure とネットワーク間の暗号化された通信を使用して安全に送信されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-183">You can also use a site-to-site VPN where an Azure VPN Gateway talks to your on-premises VPN device with all traffic sent securely using encrypted communication between Azure and your network.</span></span> <span data-ttu-id="f2801-184">ハイブリッド ネットワークをセットアップする方法の詳細を示すリファレンス アーキテクチャを公開しました。[こちら](/azure/architecture/reference-architectures/hybrid-networking/vpn?WT.mc_id=retailecomm-docs-scseely)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f2801-184">We have published a reference architecture detailing how to setup a hybrid network [here](/azure/architecture/reference-architectures/hybrid-networking/vpn?WT.mc_id=retailecomm-docs-scseely).</span></span>

<span data-ttu-id="f2801-185">ネットワークを構成したら、ビジネス継続性について計画します。</span><span class="sxs-lookup"><span data-stu-id="f2801-185">Once the network is configured, plan for business continuity.</span></span> <span data-ttu-id="f2801-186">オンプレミス データをクラウドに移行して、クラウドと既存のデータが同じであることを確認する、リアルタイム レプリケーションを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f2801-186">A recommendation is to use real time replication to move your on-premises data to the cloud and to ensure that the cloud and the existing data are the same.</span></span> <span data-ttu-id="f2801-187">eコマース ストアを閉じることはありません。重複では、顧客に与える影響を最小限に留めながら、オンプレミスから Azure に切り替える機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="f2801-187">Ecommerce stores never close; duplication provides the ability to switch over from on-premises to Azure with minimal impact to your customers.</span></span>

<span data-ttu-id="f2801-188">データ、アプリケーション、および関連するサーバーの Azure への移行を開始します。</span><span class="sxs-lookup"><span data-stu-id="f2801-188">Begin moving the data, applications, and related servers into Azure.</span></span> <span data-ttu-id="f2801-189">多くの企業では、[Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) サービスを使用して Azure に移行します。</span><span class="sxs-lookup"><span data-stu-id="f2801-189">Many companies use the [Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) service to migrate to Azure.</span></span> <span data-ttu-id="f2801-190">このサービスは、事業継続とディザスター リカバリー (BCDR) を目的としています。</span><span class="sxs-lookup"><span data-stu-id="f2801-190">The service targets business continuity and disaster recovery (BCDR).</span></span> <span data-ttu-id="f2801-191">これは、オンプレミスから Azure への移行に最適です。</span><span class="sxs-lookup"><span data-stu-id="f2801-191">This is perfect for a migration from on-premises to Azure.</span></span> <span data-ttu-id="f2801-192">実装チームは、オンプレミスの VM と物理サーバーを Azure に移行する方法を詳しく説明した[こちら](/azure/site-recovery/migrate-tutorial-on-premises-azure?WT.mc_id=retailecomm-docs-scseely)をお読みください。</span><span class="sxs-lookup"><span data-stu-id="f2801-192">Your implementation team can read the details of how to migrate on-premises VMs and physical servers to Azure [here](/azure/site-recovery/migrate-tutorial-on-premises-azure?WT.mc_id=retailecomm-docs-scseely).</span></span>

<span data-ttu-id="f2801-193">サブシステムを Azure に移行したら、テストを行い、すべて想定どおりに動作していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="f2801-193">Once a subsystem has been moved to Azure, test to make sure that everything works as expected.</span></span> <span data-ttu-id="f2801-194">すべての問題が解決されたら、ワークロードを Azure に移動します。</span><span class="sxs-lookup"><span data-stu-id="f2801-194">Once all issues are closed, move the workloads over to Azure.</span></span>

### <a name="optimize"></a><span data-ttu-id="f2801-195">最適化</span><span class="sxs-lookup"><span data-stu-id="f2801-195">Optimize</span></span>

<span data-ttu-id="f2801-196">この時点では、環境を監視し続け、環境の変化にワークロードが一致するように基盤となるコンピューティング オプションを変更します。</span><span class="sxs-lookup"><span data-stu-id="f2801-196">At this point, you will continue to monitor the environment and change the underlying compute options to fit workloads as the environment changes.</span></span> <span data-ttu-id="f2801-197">環境の正常性を監視する際は、必ず各リソースがどれほど使用されているかに注目する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-197">Whoever monitors the health of the environment should watch how much each resource is used.</span></span> <span data-ttu-id="f2801-198">目標は、ほとんどの VM で使用率が 75 - 90% になるようにすることです。</span><span class="sxs-lookup"><span data-stu-id="f2801-198">The goal should be to have 75-90% utilization on most of the VMs.</span></span> <span data-ttu-id="f2801-199">極端に低い使用率で稼働する VM では、より多くのアプリケーションをその VM で実行するようにするか、適切なパフォーマンス レベルを保持する Azure 上の最もコストのかからない VM に移行することを検討します。</span><span class="sxs-lookup"><span data-stu-id="f2801-199">On VMs that have exceptionally low utilization, consider packing them with more applications, or migrating to the lowest cost VMs on Azure that retain the right level of performance.</span></span>

<span data-ttu-id="f2801-200">Azure には、環境を最適化するツールも用意されています。</span><span class="sxs-lookup"><span data-stu-id="f2801-200">Azure provides tools to optimize the environment as well.</span></span> <span data-ttu-id="f2801-201">[Azure Advisor](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely) は、環境のコンポーネントを監視し、ベスト プラクティスに基づいてユーザーの環境に合わせた推奨事項を提示します。</span><span class="sxs-lookup"><span data-stu-id="f2801-201">[Azure Advisor](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely) monitors components of your environment and provides personalized recommendations based on best practices.</span></span> <span data-ttu-id="f2801-202">この推奨事項は、アプリケーションを使用するリソースのパフォーマンス、セキュリティ、可用性の向上を図るのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f2801-202">The recommendations help improve the performance, security, and availability of the resources used in your applications.</span></span> <span data-ttu-id="f2801-203">Azure portal では、アプリケーションの正常性に関する情報も把握できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-203">The Azure portal also exposes information about the health of your applications.</span></span> <span data-ttu-id="f2801-204">ご使用の VM で、[Linux および Windows 向けの Azure 仮想マシン拡張機能](/azure/virtual-machines/extensions/overview?WT.mc_id=retailecomm-docs-scseely)を活用してください。</span><span class="sxs-lookup"><span data-stu-id="f2801-204">Your VMs should take advantage of the [Azure virtual machine extensions for Linux and Windows](/azure/virtual-machines/extensions/overview?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="f2801-205">これらの拡張機能では、デプロイ後の構成、ウイルス対策、アプリの監視といった機能を利用できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-205">Those extensions provide for post deployment configuration, antivirus, app monitoring, and more.</span></span> <span data-ttu-id="f2801-206">また、[Network Watcher](/azure/network-watcher/network-watcher-monitoring-overview?WT.mc_id=retailecomm-docs-scseely)、[Service Map](/azure/monitoring/monitoring-walkthrough-servicemap?WT.mc_id=retailecomm-docs-scseely)、[Application Insights](/azure/application-insights/app-insights-overview?WT.mc_id=retailecomm-docs-scseely)、[Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=retailecomm-docs-scseely) など、ネットワーク診断、サービスの使用状況、サービスを介したアラートに関するその他の Azure サービスも利用できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-206">You can also take advantage of many other Azure services for network diagnostics, service usage, and alerting through services like [Network Watcher](/azure/network-watcher/network-watcher-monitoring-overview?WT.mc_id=retailecomm-docs-scseely), [Service Map](/azure/monitoring/monitoring-walkthrough-servicemap?WT.mc_id=retailecomm-docs-scseely), [Application Insights](/azure/application-insights/app-insights-overview?WT.mc_id=retailecomm-docs-scseely), and [Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=retailecomm-docs-scseely).</span></span>

<span data-ttu-id="f2801-207">組織の一部のシステムが Azure で最適化されている中、開発チームは移行後のフェーズ、つまりリファクターを開始することができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-207">While parts of the organization are optimizing the system now in Azure, the development teams can begin moving to the post-migration phase: refactor.</span></span>

## <a name="refactor"></a><span data-ttu-id="f2801-208">リファクター</span><span class="sxs-lookup"><span data-stu-id="f2801-208">Refactor</span></span>

<span data-ttu-id="f2801-209">移行が完了したら、eコマース アプリケーションは、Azure で新しいホームのメリットを使い始めることができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-209">With the migration complete, your ecommerce application can start taking advantage of its new home in Azure.</span></span> <span data-ttu-id="f2801-210">リファクター フェーズは、環境全体が移行が完了するまで待つ必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f2801-210">The refactor phase does not have to wait until the entire environment has moved.</span></span> <span data-ttu-id="f2801-211">CMS チームの移行が完了したものの、ERP チームがまだ完了していないといった場合でも、問題ありません。</span><span class="sxs-lookup"><span data-stu-id="f2801-211">If your CMS team has migrated, but the ERP team has not, no problem.</span></span> <span data-ttu-id="f2801-212">CMS チームは、リファクタリングの作業を開始できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-212">The CMS team can still begin their refactoring efforts.</span></span> <span data-ttu-id="f2801-213">この段階で追加の Azure サービスを使用して、アプリケーションをリファクタリングすることにより、コスト、信頼性、パフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="f2801-213">This stage involves using additional Azure services to optimize the cost, reliability, and performance by refactoring your applications.</span></span> <span data-ttu-id="f2801-214">リフト アンド シフトでは、プロバイダーが管理するハードウェアと OS しか利用できませんでしたが、このモデルではクラウド サービスを利用してコストを削減することもできます。</span><span class="sxs-lookup"><span data-stu-id="f2801-214">Where in lift and shift, you were only taking advantage of the provider managed hardware and OS, in this model you also take advantage of cloud services to drive down cost.</span></span> <span data-ttu-id="f2801-215">アプリケーション コードや構成を少し変更するだけで、現在のアプリケーションのそのまま利用し、コンテナー、データベース、ID 管理システムなどの新しいインフラストラクチャ サービスにアプリケーションを接続します。</span><span class="sxs-lookup"><span data-stu-id="f2801-215">You continue to utilize your current application as-is, with some minor application code or configuration changes, and connect your application to new infrastructure services such as containers, database, and identity management systems.</span></span>

<span data-ttu-id="f2801-216">リファクタリング作業で変更するコードと構成はほんのわずかです。</span><span class="sxs-lookup"><span data-stu-id="f2801-216">The refactoring effort changes very little code and configuration.</span></span> <span data-ttu-id="f2801-217">ほとんどの場合、この段階で採用されるテクノロジはリソースを構築してデプロイするスクリプトに依存するため、つまりデプロイ手順はスクリプトで行うため、オートメーションにより専念することになります。</span><span class="sxs-lookup"><span data-stu-id="f2801-217">You will focus more time on automation mostly because the technologies adopted at this phase rely upon scripting to build up and deploy the resources; the deployment instructions are a script.</span></span>

<span data-ttu-id="f2801-218">さまざまな Azure サービスを利用できますが、リファクター フェーズで使用する最も一般的なサービス、つまりコンテナー、アプリ サービス、データベース サービスに焦点を当てます。</span><span class="sxs-lookup"><span data-stu-id="f2801-218">While many of the Azure services can be used, we will focus on the most common services used in the refactor phase: containers, app services, and database services.</span></span> <span data-ttu-id="f2801-219">なぜリファクタリングに注目するのでしょうか。</span><span class="sxs-lookup"><span data-stu-id="f2801-219">Why do we look at refactoring?</span></span> <span data-ttu-id="f2801-220">リファクタリングでは、無理のない範囲でコードの負債を保持することで、長期的なコストを削減する強力なコード基盤を提供します。</span><span class="sxs-lookup"><span data-stu-id="f2801-220">Refactoring provides a strong code foundation that lowers long-term costs by keeping code debt within reason.</span></span>

<span data-ttu-id="f2801-221">コンテナーは、アプリケーションをバンドルする方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="f2801-221">Containers provide a way to bundle applications.</span></span> <span data-ttu-id="f2801-222">コンテナーがオペレーティング システムを仮想化する手法のおかげで、1 つの VM に複数のコンテナーをまとめることができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-222">Because of the way a container virtualizes the operating system, you can pack multiple containers into a single VM.</span></span> <span data-ttu-id="f2801-223">まったくコードを変更せずに、またはいくつかコードを変更するだけで、アプリケーションをコンテナーに移動することができます。構成は変更しなければならない場合があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-223">You can move an application to a container with zero to few code changes; you may need configuration changes.</span></span> <span data-ttu-id="f2801-224">この作業は、アプリケーションをコンテナーにバンドルするスクリプトの記述につながります。</span><span class="sxs-lookup"><span data-stu-id="f2801-224">This effort also leads to writing scripts that bundle applications into a container.</span></span> <span data-ttu-id="f2801-225">開発チームは、リファクタリング期間に、これらのスクリプトの記述とテストを行います。</span><span class="sxs-lookup"><span data-stu-id="f2801-225">Your development teams will spend their refactoring time writing and testing these scripts.</span></span> <span data-ttu-id="f2801-226">Azure では、[Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) (AKS) と、コンテナー イメージを管理するために使用できる関連する [Azure Container Registry](https://azure.microsoft.com/services/container-registry/?WT.mc_id=retailecomm-docs-scseely) を介してコンテナー詰めをサポートします。</span><span class="sxs-lookup"><span data-stu-id="f2801-226">Azure supports containerization through the [Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) (AKS) and the related [Azure Container Registry](https://azure.microsoft.com/services/container-registry/?WT.mc_id=retailecomm-docs-scseely) which you can use to manage the container images.</span></span>

<span data-ttu-id="f2801-227">アプリ サービスでは、さまざまな Azure サービスを利用できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-227">For app services, you can take advantage of various Azure services.</span></span> <span data-ttu-id="f2801-228">たとえば、[RabbitMQ](https://www.rabbitmq.com/) のようなキューにメッセージを配置することで、既存のインフラストラクチャで顧客の注文を処理できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-228">For example, your existing infrastructure may handle a customer order by placing messages into a queue like [RabbitMQ](https://www.rabbitmq.com/).</span></span> <span data-ttu-id="f2801-229">(たとえば、1 つのメッセージで顧客に請求し、2 つ目のメッセージで注文の品を出荷します)。リホストするときは、別の VM に RabbitMQ を配置します。</span><span class="sxs-lookup"><span data-stu-id="f2801-229">(For example, one message is to charge the customer, a second is to ship the order.) When rehosting, you put RabbitMQ in a separate VM.</span></span> <span data-ttu-id="f2801-230">リファクタリング中に、[Service Bus](/azure/service-bus-messaging/service-bus-queues-topics-subscriptions?WT.mc_id=retailecomm-docs-scseely) のキューまたはトピックをソリューションに追加し、RabbitMQ コードを書き直して、キュー機能を提供する VM の使用を停止します。</span><span class="sxs-lookup"><span data-stu-id="f2801-230">During refactoring, you add a [Service Bus](/azure/service-bus-messaging/service-bus-queues-topics-subscriptions?WT.mc_id=retailecomm-docs-scseely) queue or topic to the solution, rewrite your RabbitMQ code, and stop using the VMs that served the queuing functionality.</span></span> <span data-ttu-id="f2801-231">この変更により、一連の VM を低コストの常時オン メッセージ キュー サービスと置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="f2801-231">This change replaces a set of VMs with an always-on message queue service for a lower cost.</span></span> <span data-ttu-id="f2801-232">Azure Portal には、その他のアプリ サービスもあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-232">Other app services can be found in the Azure Portal.</span></span>

<span data-ttu-id="f2801-233">データベースについては、VM からサービスにデータベースを移行できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-233">For databases, you can move your database from a VM to a service.</span></span> <span data-ttu-id="f2801-234">Azure では、[Azure SQL Database](/azure/sql-database/sql-database-cloud-migrate?WT.mc_id=retailecomm-docs-scseely) および [Azure SQL Database Managed Instance](/azure/sql-database/sql-database-managed-instance?WT.mc_id=retailecomm-docs-scseely) で SQL Server のワークロードをサポートします。</span><span class="sxs-lookup"><span data-stu-id="f2801-234">Azure supports SQL Server workloads with [Azure SQL Database](/azure/sql-database/sql-database-cloud-migrate?WT.mc_id=retailecomm-docs-scseely) and [Azure SQL Database Managed Instance](/azure/sql-database/sql-database-managed-instance?WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="f2801-235">[データ移行サービス](https://azure.microsoft.com/services/database-migration/?WT.mc_id=retailecomm-docs-scseely)はご使用のデータベースを評価し、移行前に行う必要のある処理について知らせ、それからデータベースを VM からサービスに移行します。</span><span class="sxs-lookup"><span data-stu-id="f2801-235">The [Data Migration Service](https://azure.microsoft.com/services/database-migration/?WT.mc_id=retailecomm-docs-scseely) assesses your database, informs you of work that needs to happen prior to the migration, and then moves the database from your VM to the service.</span></span> <span data-ttu-id="f2801-236">Azure では、[MySQL](https://azure.microsoft.com/services/mysql/?WT.mc_id=retailecomm-docs-scseely)、[PostgreSQL](https://azure.microsoft.com/services/postgresql/?WT.mc_id=retailecomm-docs-scseely)、および[その他のデータベース](https://azure.microsoft.com/services/#databases?WT.mc_id=retailecomm-docs-scseely) エンジンのサービスをサポートします。</span><span class="sxs-lookup"><span data-stu-id="f2801-236">Azure supports [MySQL](https://azure.microsoft.com/services/mysql/?WT.mc_id=retailecomm-docs-scseely), [PostgreSQL](https://azure.microsoft.com/services/postgresql/?WT.mc_id=retailecomm-docs-scseely), and [other database](https://azure.microsoft.com/services/#databases?WT.mc_id=retailecomm-docs-scseely) engine services  as well.</span></span>

## <a name="rebuild"></a><span data-ttu-id="f2801-237">再構築</span><span class="sxs-lookup"><span data-stu-id="f2801-237">Rebuild</span></span>

<span data-ttu-id="f2801-238">ここまで、eコマース システムへの変更を最小限に留める努力をしてきました。稼働しているシステムはそのまま残してきました。</span><span class="sxs-lookup"><span data-stu-id="f2801-238">Up until this point, we tried to minimize changes to the ecommerce systems—we left working systems alone.</span></span> <span data-ttu-id="f2801-239">これから、クラウドのメリットを利用する方法について考慮します。</span><span class="sxs-lookup"><span data-stu-id="f2801-239">Now, let's discuss how to really take advantage of the cloud.</span></span> <span data-ttu-id="f2801-240">この段階では、PaaS または SaaS のサービスとアーキテクチャを積極的に採用することにより、既存のアプリケーションを変更します。</span><span class="sxs-lookup"><span data-stu-id="f2801-240">This stage means to revise the existing application by aggressively adopting PaaS or even SaaS services and architecture.</span></span> <span data-ttu-id="f2801-241">このプロセスでは、新機能を追加するか、クラウドのアプリケーションを再設計するため、大掛かりな変更が発生します。</span><span class="sxs-lookup"><span data-stu-id="f2801-241">The process encompasses major revisions to add new functionality or to rearchitect the application for the cloud.</span></span>  <span data-ttu-id="f2801-242">_マネージド API_ は、クラウド システムを活用する新しい概念です。</span><span class="sxs-lookup"><span data-stu-id="f2801-242">_Managed APIs_ is a new concept that takes advantage of cloud systems.</span></span> <span data-ttu-id="f2801-243">サービス間の通信用の API を作成して、システムを簡単に更新することができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-243">We can make our system easier to update, by creating APIs for communication between services.</span></span>  <span data-ttu-id="f2801-244">2 つ目のメリットは、所有しているデータから分析情報を得られることです。</span><span class="sxs-lookup"><span data-stu-id="f2801-244">A second benefit is the ability to gain insights on the data we have.</span></span> <span data-ttu-id="f2801-245">_マイクロサービス プラス API_ アーキテクチャに移行し、機械学習とデータを分析するための他のツールを使用することによって、これを行います。</span><span class="sxs-lookup"><span data-stu-id="f2801-245">We do this by moving to a _microservice plus API_ architecture and use machine learning and other tools to analyze data.</span></span>

### <a name="microservices--apis"></a><span data-ttu-id="f2801-246">マイクロサービス プラス API</span><span class="sxs-lookup"><span data-stu-id="f2801-246">Microservices + APIs</span></span>

<span data-ttu-id="f2801-247">マイクロサービスは、外部と接続する API を介して通信します。</span><span class="sxs-lookup"><span data-stu-id="f2801-247">Microservices communicate through externally facing APIs.</span></span> <span data-ttu-id="f2801-248">各サービスは自己完結型であり、1 つのビジネス機能を実装させる必要があります (たとえば、顧客に商品を提案する、ショッピング カートを維持するなど)。</span><span class="sxs-lookup"><span data-stu-id="f2801-248">Each service is self-contained and should implement a single business capability, for example: recommend items to customers, maintain shopping carts, and so on.</span></span> <span data-ttu-id="f2801-249">アプリケーションをマイクロサービスに分解するには、時間と計画が必要です。</span><span class="sxs-lookup"><span data-stu-id="f2801-249">Decomposing an application into microservices requires time and planning.</span></span> <span data-ttu-id="f2801-250">マイクロサービスを定義する明確なルールはありませんが、大抵一緒に変更するコンポーネントをまとめて、デプロイ可能なユニットを減らすようにするのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="f2801-250">While no hard rules exist to define a microservice, the general idea involves reducing the deployable unit to a set of components which almost always change together.</span></span> <span data-ttu-id="f2801-251">マイクロサービスを使用すると、全体的なアプリケーションのテスト負荷を削減しながら、必要な頻度で変更をデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="f2801-251">Microservices allow you to deploy changes as frequently as needed while reducing the testing burden for the overall application.</span></span> <span data-ttu-id="f2801-252">一部のサービスは、非常に小さくなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-252">Some services might be extremely small.</span></span> <span data-ttu-id="f2801-253">そのため、[Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) を使用してサーバーレスを進めると、使用していないときにリソースを消費しないようにしながら、呼び出し元の必要に応じてスケールアウトすることができるようになります。</span><span class="sxs-lookup"><span data-stu-id="f2801-253">For those, going serverless with [Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) works well to scale out to as many callers as needed while consuming no resources when not in use.</span></span> <span data-ttu-id="f2801-254">その他のサービスは、製品の管理、顧客の注文の取り込みなど、ビジネス機能に基づいて分けられます。</span><span class="sxs-lookup"><span data-stu-id="f2801-254">Other services will be broken out around business capabilities: manage product, capture customer orders, and so on.</span></span>

<span data-ttu-id="f2801-255">サーバーレスのメカニズムには難点もあります。負荷が軽いときに、クラウド内のサーバーがコードを構成して実行するのに数秒かかるため、応答が遅くなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-255">Serverless mechanisms do have drawbacks: when under light load, they can be slow to respond as some server in the cloud takes a few seconds to configure and run your code.</span></span> <span data-ttu-id="f2801-256">顧客による商品の検索、注文、返品要求など、環境内の顧客によってよく使われる部分については、迅速かつ容易に対応できるようにしておきたいと思われるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="f2801-256">For parts of your environment used heavily by customers, you want to make sure that they can find products, place orders, request returns, and so on with speed and ease.</span></span> <span data-ttu-id="f2801-257">パフォーマンスが低下してしまうと、ショッピング ファネルで顧客を失ってしまうリスクがあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-257">Any time that performance slows down, you risk losing customers in the shopping funnel.</span></span> <span data-ttu-id="f2801-258">迅速に対応する機能を既に備えていれば、[Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) で個別にデプロイ可能なユニットとしてその機能をリビルドします。</span><span class="sxs-lookup"><span data-stu-id="f2801-258">If you have functionality that must respond quickly, rebuild that functionality as individually deployable units in [Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely).</span></span>  <span data-ttu-id="f2801-259">大量のメモリ、複数の CPU、たくさんのローカル ストレージを組み合わせる必要があるサービスなどのケースでは、自社の VM でマイクロサービスをホストする方が良い場合もあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-259">For other cases, such as services which require some combination of lots of memory, several CPUs, and plenty of local storage, it may make sense to host the microservice in its own VM.</span></span>

<span data-ttu-id="f2801-260">各サービスは、相互作用に API を使用します。</span><span class="sxs-lookup"><span data-stu-id="f2801-260">Each service uses an API for interaction.</span></span> <span data-ttu-id="f2801-261">API へのアクセスでは、マイクロサービスに直接接続できますが、その場合、サービスと通信する側がアプリケーション トポロジを把握している必要があります。</span><span class="sxs-lookup"><span data-stu-id="f2801-261">Access to the API can be direct to the microservice, but this requires anyone communicating with the service to know the application topology.</span></span> <span data-ttu-id="f2801-262">[API Management](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely) のようなサービスでは、API を発行する一元的な方法が提供されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-262">A service like [API Management](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely) gives you a central way to publish APIs.</span></span> <span data-ttu-id="f2801-263">すべてのアプリケーションは、API Management サービスに接続するだけで済みます。</span><span class="sxs-lookup"><span data-stu-id="f2801-263">All applications simply connect to the API Management service.</span></span> <span data-ttu-id="f2801-264">開発者は使用可能な API を検出できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-264">Developers can discover what APIs are available.</span></span> <span data-ttu-id="f2801-265">API Management サービスは、リテール環境のパフォーマンスを向上させる機能も提供します。</span><span class="sxs-lookup"><span data-stu-id="f2801-265">The API Management service also provides capabilities to make your retail environment perform well.</span></span> <span data-ttu-id="f2801-266">このサービスは、アプリケーションのさまざまな部分に分けて API へのアクセスを制限したり (ボトルネックを避けるため)、値の変更に時間のかかる応答をキャッシュしたり、JSON から XML に変換したりできます。</span><span class="sxs-lookup"><span data-stu-id="f2801-266">The service can limit access to the API by different parts of the application (to prevent bottlenecks), cache responses to slow changing values, convert from JSON to XML, and more.</span></span> <span data-ttu-id="f2801-267">ポリシーの完全な一覧については、[こちら](/azure/api-management/api-management-policies?WT.mc_id=retailecomm-docs-scseely)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f2801-267">A complete list of policies can be found [here](/azure/api-management/api-management-policies?WT.mc_id=retailecomm-docs-scseely).</span></span>

### <a name="make-use-of-your-data-and-the-azure-marketplace"></a><span data-ttu-id="f2801-268">データと Azure Marketplace を使用する</span><span class="sxs-lookup"><span data-stu-id="f2801-268">Make use of your data and the Azure Marketplace</span></span>

<span data-ttu-id="f2801-269">すべてのデータとシステムを Azure に配置しているため、ビジネスに他の SaaS ソリューションを簡単に組み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-269">Because you have all your data and systems in Azure, you can easily incorporate other SaaS solutions into your business.</span></span> <span data-ttu-id="f2801-270">すぐに行えることがあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-270">You can do some things immediately.</span></span> <span data-ttu-id="f2801-271">たとえば、[Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) を使用してさまざまなデータ ソースを 1 つにまとめることができます。これにより、視覚化を実現し、レポートを生成して、分析情報を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-271">For example, use [Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) to stitch together various data sources to create visualizations and reports—and gain insights.</span></span>

<span data-ttu-id="f2801-272">次に、[Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/?WT.mc_id=retailecomm-docs-scseely) で提供されるサービスに注目してください。これは、在庫の最適化、顧客の属性に基づいたキャンペーンの管理、好みや履歴に基づいた各顧客への適切なアイテムの表示などを実現するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="f2801-272">Next, take a look at the offerings in the [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/?WT.mc_id=retailecomm-docs-scseely) which can help you do things like optimize inventory, manage campaigns based on customer attributes, and present the right items to each customer based on their preferences and history.</span></span> <span data-ttu-id="f2801-273">Marketplace オファリングで機能するデータを構成するのに少し時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="f2801-273">Expect to spend some time configuring your data to work in the Marketplace offerings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f2801-274">次の手順</span><span class="sxs-lookup"><span data-stu-id="f2801-274">Next Steps</span></span>

<span data-ttu-id="f2801-275">多くの開発チームは、技術的負債に対処し、キャパシティをより効率的に活用するために、リホストとリファクターを同時に行えないものかと模索します。</span><span class="sxs-lookup"><span data-stu-id="f2801-275">Many development teams are tempted to do rehost and refactor simultaneously to address technical debt and better leverage capacity.</span></span> <span data-ttu-id="f2801-276">次の手順に進む前に、リホストを行うことにはメリットがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="f2801-276">There are benefits to rehosting before jumping into the next steps.</span></span>  <span data-ttu-id="f2801-277">新しい環境にデプロイする際に生じる問題を診断して修正するのが簡単になります。</span><span class="sxs-lookup"><span data-stu-id="f2801-277">Any issues in the deployment to the new environment will be easier to diagnose and fix.</span></span> <span data-ttu-id="f2801-278">これにより、開発チームとサポート チームに、Azure を用いた新しい環境に慣れる時間を与えることができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-278">This in turn gives your development and support teams time to ramp up with Azure as the new environment.</span></span> <span data-ttu-id="f2801-279">システムのリファクーとリビルドを開始するときには、安定して稼働しているアプリケーションの上に構築していくことができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-279">As you begin to refactor and rebuild the system, you are building on a stable, working application.</span></span> <span data-ttu-id="f2801-280">そして、加える変更をより小さく、的を絞ったものにし、更新の頻度を増やすことができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-280">This allows for smaller, targeted changes and more frequent updates.</span></span>

<span data-ttu-id="f2801-281">クラウドへの移行に関する汎用的なホワイト ペーパー「[Cloud Migration Essentials](https://azure.microsoft.com/resources/cloud-migration-essentials-e-book/?_lrsc=9618a836-9f81-4087-901f-51058783c3a8&WT.mc_id=retailecomm-docs-scseely)」を公開しました。</span><span class="sxs-lookup"><span data-stu-id="f2801-281">We have published a more general whitepaper on migrating to the cloud: [Cloud Migration Essentials](https://azure.microsoft.com/resources/cloud-migration-essentials-e-book/?_lrsc=9618a836-9f81-4087-901f-51058783c3a8&WT.mc_id=retailecomm-docs-scseely).</span></span> <span data-ttu-id="f2801-282">移行を計画する際にこれをお読みいただければ、きっとお役に立つでしょう。</span><span class="sxs-lookup"><span data-stu-id="f2801-282">This is a great piece to read through as you plan out your migration.</span></span>

## <a name="technologies-presented"></a><span data-ttu-id="f2801-283">使用するテクノロジ</span><span class="sxs-lookup"><span data-stu-id="f2801-283">Technologies Presented</span></span>

<span data-ttu-id="f2801-284">リホスト中に以下が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-284">Used during rehost:</span></span>

- <span data-ttu-id="f2801-285">[Azure Advisor](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely) は、ベスト プラクティスに従って Azure デプロイメントを最適化できるようにする、個人用に設定されたクラウド コンサルタントです。</span><span class="sxs-lookup"><span data-stu-id="f2801-285">[Azure Advisor](/azure/advisor/advisor-overview?WT.mc_id=retailecomm-docs-scseely) is a personalized cloud consultant that helps you follow best practices to optimize your Azure deployments.</span></span>
- <span data-ttu-id="f2801-286">[Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) サービスは、Azure への移行についてオンプレミスのワークロードを評価します。</span><span class="sxs-lookup"><span data-stu-id="f2801-286">The [Azure Migrate](/azure/migrate/migrate-overview?WT.mc_id=retailecomm-docs-scseely) service assesses on-premises workloads for migration to Azure.</span></span>
- <span data-ttu-id="f2801-287">[Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) では、Azure VM、オンプレミス VM、物理サーバーのディザスター リカバリーを調整および管理します。</span><span class="sxs-lookup"><span data-stu-id="f2801-287">[Azure Site Recovery](/azure/site-recovery/site-recovery-overview?WT.mc_id=retailecomm-docs-scseely) orchestrates and manages disaster recovery for Azure VMs, and on-premises VMs and physical servers.</span></span>
- <span data-ttu-id="f2801-288">[Azure Virtual Network](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely) では、Azure Virtual Machines (VM) などのさまざまな種類の Azure リソースが、他の Azure リソース、インターネット、およびオンプレミスのネットワークと安全に通信することができます。</span><span class="sxs-lookup"><span data-stu-id="f2801-288">[Azure Virtual Network](/azure/virtual-network/virtual-networks-overview?WT.mc_id=retailecomm-docs-scseely) enables many types of Azure resources, such as Azure Virtual Machines (VM), to securely communicate with each other, the internet, and on-premises networks.</span></span>
- <span data-ttu-id="f2801-289">[Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) を利用すると、接続プロバイダーが提供するプライベート接続を介して、オンプレミスのネットワークを Microsoft クラウドに拡張できます。</span><span class="sxs-lookup"><span data-stu-id="f2801-289">[Azure ExpressRoute](/azure/expressroute/?WT.mc_id=retailecomm-docs-scseely) lets you extend your on-premises networks into the Microsoft cloud over a private connection facilitated by a connectivity provider.</span></span>

<span data-ttu-id="f2801-290">リファクター中に以下が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-290">Used during refactor:</span></span>

- <span data-ttu-id="f2801-291">[Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) を使用すると、ホストされている Kubernetes 環境を管理できます。これによって、コンテナー オーケストレーションの知識がなくてもコンテナー化されたアプリケーションを迅速かつ簡単にデプロイおよび管理できるようになります。</span><span class="sxs-lookup"><span data-stu-id="f2801-291">[Azure Kubernetes Service](/azure/aks/?WT.mc_id=retailecomm-docs-scseely) manages your hosted Kubernetes environment, making it quick and easy to deploy and manage containerized applications without container orchestration expertise.</span></span>
- <span data-ttu-id="f2801-292">[Azure SQL Database](/azure/sql-database/sql-database-technical-overview?WT.mc_id=retailecomm-docs-scseely) は、Microsoft Azure における汎用リレーショナル データベース管理サービスです。</span><span class="sxs-lookup"><span data-stu-id="f2801-292">[Azure SQL Database](/azure/sql-database/sql-database-technical-overview?WT.mc_id=retailecomm-docs-scseely) is a general-purpose relational database managed service in Microsoft Azure.</span></span> <span data-ttu-id="f2801-293">これは、リレーショナル データ、JSON、空間、XML などの構造をサポートします。</span><span class="sxs-lookup"><span data-stu-id="f2801-293">It supports structures such as relational data, JSON, spatial, and XML.</span></span> <span data-ttu-id="f2801-294">SQL Database には、マネージド シングル SQL データベース、エラスティック プール内のマネージド SQL データベース、および SQL マネージド インスタンスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="f2801-294">SQL Database offers managed single SQL databases, managed SQL databases in an elastic pool, and SQL Managed Instances.</span></span>

<span data-ttu-id="f2801-295">リビルド中に以下が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f2801-295">Used during rebuild:</span></span>

- <span data-ttu-id="f2801-296">Azure [API Management](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely) が組織にもたらす利点は、外部のパートナーや社内の開発者に API を公開することによって、社内に眠っているデータやサービスの可能性を発掘できることです。</span><span class="sxs-lookup"><span data-stu-id="f2801-296">Azure [API Management](/azure/api-management/?WT.mc_id=retailecomm-docs-scseely) helps organizations publish APIs to external, partner, and internal developers to unlock the potential of their data and services.</span></span>
- <span data-ttu-id="f2801-297">[Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) は、小規模なコード (&quot;関数&quot;) をクラウドで手軽に実行できるソリューションです。</span><span class="sxs-lookup"><span data-stu-id="f2801-297">[Azure Functions](/azure/azure-functions/functions-overview?WT.mc_id=retailecomm-docs-scseely) isa solution for easily running small pieces of code, or &quot;functions,&quot; in the cloud.</span></span>
- <span data-ttu-id="f2801-298">[Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) は、組織全体に分析情報を提供できるビジネス分析ツール スイートです。</span><span class="sxs-lookup"><span data-stu-id="f2801-298">[Power BI](https://powerbi.microsoft.com/?WT.mc_id=retailecomm-docs-scseely) is a suite of business analytics tools that deliver insights throughout your organization.</span></span>

## <a name="conclusion"></a><span data-ttu-id="f2801-299">まとめ</span><span class="sxs-lookup"><span data-stu-id="f2801-299">Conclusion</span></span>

<span data-ttu-id="f2801-300">eコマース システムを Azure に移行するには、分析、計画、明確に定められたアプローチが必要になります。</span><span class="sxs-lookup"><span data-stu-id="f2801-300">Moving your ecommerce system into Azure takes analysis, planning and a defined approach.</span></span> <span data-ttu-id="f2801-301">リホスト、リファクター、リビルドの 3 段階のアプローチについて考慮しました。</span><span class="sxs-lookup"><span data-stu-id="f2801-301">We looked at a three phase approach of rehost, refactor, and rebuild.</span></span> <span data-ttu-id="f2801-302">これらのアプローチでは、各ステップで生じる変更を最小限に抑えながら、作業中のフェーズから次のフェーズに移ることが可能になります。</span><span class="sxs-lookup"><span data-stu-id="f2801-302">This allows an organization to move from one working state to another while minimizing the amount of change at each step.</span></span> <span data-ttu-id="f2801-303">小売業者は、リホストをスキップして、コンポーネントのリファクターまたはリビルドを行うこともできます。</span><span class="sxs-lookup"><span data-stu-id="f2801-303">Retailers may also choose to refactor or even rebuild components, skipping rehosting altogether.</span></span> <span data-ttu-id="f2801-304">多くの場合、これでモダナイゼーションへの明確な道筋が見えてきます。後はできるときに行うだけです。</span><span class="sxs-lookup"><span data-stu-id="f2801-304">Many times, you will have a clear path forward to modernization—take it when you can.</span></span> <span data-ttu-id="f2801-305">Azure での経験を重ねるにつれ、新しい機能の追加、コストの削減、システム全体の改善といった機会が見えてくるでしょう。</span><span class="sxs-lookup"><span data-stu-id="f2801-305">As you gain experience running in Azure, you will see more opportunities to add new capabilities, reduce costs, and improve the overall system.</span></span>


<span data-ttu-id="f2801-306">_この記事は、Scott Seely と Mariya Zorotovich によって作成されました。_</span><span class="sxs-lookup"><span data-stu-id="f2801-306">_This article was authored by Scott Seely and Mariya Zorotovich._</span></span>